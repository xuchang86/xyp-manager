/**
 * CUI project was create in COMTOP Technology Research  Center.
 * @author liangpei@szcomtop.com
*/

/*! cuiV4.2.32-build20161117*/
function _log(a,b){if(_canLog){var c=Array.prototype.slice.apply(arguments,[1]),d=new Date,e=d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()+"."+d.getMilliseconds();c[0]=e+" - "+c[0];try{switch(a){case"info":window.console.info.apply(window.console,c);break;case"warn":window.console.warn.apply(window.console,c);break;default:window.console.log.apply(window.console,c)}}catch(f){window.console||(_canLog=!1)}}}function logMsg(a){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)}!function(a,b){window.__hasCUILoad||("object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a))}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b="length"in a&&a.length,c=ea.type(a);return"function"!==c&&!ea.isWindow(a)&&(!(1!==a.nodeType||!b)||("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a))}function d(a,b,c){if(ea.isFunction(b))return ea.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return ea.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ma.test(b))return ea.filter(b,a,c);b=ea.filter(b,a)}return ea.grep(a,function(a){return ea.inArray(a,b)>=0!==c})}function e(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function f(a){var b=ua[a]={};return ea.each(a.match(ta)||[],function(a,c){b[c]=!0}),b}function g(){oa.addEventListener?(oa.removeEventListener("DOMContentLoaded",h,!1),a.removeEventListener("load",h,!1)):(oa.detachEvent("onreadystatechange",h),a.detachEvent("onload",h))}function h(){(oa.addEventListener||"load"===event.type||"complete"===oa.readyState)&&(g(),ea.ready())}function i(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(za,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:ya.test(c)?ea.parseJSON(c):c)}catch(e){}ea.data(a,b,c)}else c=void 0}return c}function j(a){var b;for(b in a)if(("data"!==b||!ea.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function k(a,b,c,d){if(ea.acceptData(a)){var e,f,g=ea.expando,h=a.nodeType,i=h?ea.cache:a,j=h?a[g]:a[g]&&g;if(j&&i[j]&&(d||i[j].data)||void 0!==c||"string"!=typeof b)return j||(j=h?a[g]=W.pop()||ea.guid++:g),i[j]||(i[j]=h?{}:{toJSON:ea.noop}),"object"!=typeof b&&"function"!=typeof b||(d?i[j]=ea.extend(i[j],b):i[j].data=ea.extend(i[j].data,b)),f=i[j],d||(f.data||(f.data={}),f=f.data),void 0!==c&&(f[ea.camelCase(b)]=c),"string"==typeof b?(e=f[b],null==e&&(e=f[ea.camelCase(b)])):e=f,e}}function l(a,b,c){if(ea.acceptData(a)){var d,e,f=a.nodeType,g=f?ea.cache:a,h=f?a[ea.expando]:ea.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){ea.isArray(b)?b=b.concat(ea.map(b,ea.camelCase)):b in d?b=[b]:(b=ea.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!j(d):!ea.isEmptyObject(d))return}(c||(delete g[h].data,j(g[h])))&&(f?ea.cleanData([a],!0):ca.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}function m(){return!0}function n(){return!1}function o(){try{return oa.activeElement}catch(a){}}function p(a){var b=Ka.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function q(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==xa?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==xa?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||ea.nodeName(d,b)?f.push(d):ea.merge(f,q(d,b));return void 0===b||b&&ea.nodeName(a,b)?ea.merge([a],f):f}function r(a){Ea.test(a.type)&&(a.defaultChecked=a.checked)}function s(a,b){return ea.nodeName(a,"table")&&ea.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function t(a){return a.type=(null!==ea.find.attr(a,"type"))+"/"+a.type,a}function u(a){var b=Va.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function v(a,b){for(var c,d=0;null!=(c=a[d]);d++)ea._data(c,"globalEval",!b||ea._data(b[d],"globalEval"))}function w(a,b){if(1===b.nodeType&&ea.hasData(a)){var c,d,e,f=ea._data(a),g=ea._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)ea.event.add(b,c,h[c][d])}g.data&&(g.data=ea.extend({},g.data))}}function x(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ca.noCloneEvent&&b[ea.expando]){e=ea._data(b);for(d in e.events)ea.removeEvent(b,d,e.handle);b.removeAttribute(ea.expando)}"script"===c&&b.text!==a.text?(t(b).text=a.text,u(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ca.html5Clone&&a.innerHTML&&!ea.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Ea.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}}function y(b,c){var d,e=ea(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:ea.css(e[0],"display");return e.detach(),f}function z(a){var b=oa,c=_a[a];return c||(c=y(a,b),"none"!==c&&c||($a=($a||ea("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=($a[0].contentWindow||$a[0].contentDocument).document,b.write(),b.close(),c=y(a,b),$a.detach()),_a[a]=c),c}function A(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}function B(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=mb.length;e--;)if(b=mb[e]+c,b in a)return b;return d}function C(a,b){for(var c,d,e,f=[],g=0,h=a.length;g<h;g++)d=a[g],d.style&&(f[g]=ea._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&Ca(d)&&(f[g]=ea._data(d,"olddisplay",z(d.nodeName)))):(e=Ca(d),(c&&"none"!==c||!e)&&ea._data(d,"olddisplay",e?c:ea.css(d,"display"))));for(g=0;g<h;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function D(a,b,c){var d=ib.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function E(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=ea.css(a,c+Ba[f],!0,e)),d?("content"===c&&(g-=ea.css(a,"padding"+Ba[f],!0,e)),"margin"!==c&&(g-=ea.css(a,"border"+Ba[f]+"Width",!0,e))):(g+=ea.css(a,"padding"+Ba[f],!0,e),"padding"!==c&&(g+=ea.css(a,"border"+Ba[f]+"Width",!0,e)));return g}function F(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=ab(a),g=ca.boxSizing&&"border-box"===ea.css(a,"boxSizing",!1,f);if(e<=0||null==e){if(e=bb(a,b,f),(e<0||null==e)&&(e=a.style[b]),db.test(e))return e;d=g&&(ca.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+E(a,b,c||(g?"border":"content"),d,f)+"px"}function G(a,b,c,d,e){return new G.prototype.init(a,b,c,d,e)}function H(){return setTimeout(function(){nb=void 0}),nb=ea.now()}function I(a,b){var c,d={height:a},e=0;for(b=b?1:0;e<4;e+=2-b)c=Ba[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function J(a,b,c){for(var d,e=(tb[b]||[]).concat(tb["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function K(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&Ca(a),p=ea._data(a,"fxshow");c.queue||(h=ea._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,ea.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=ea.css(a,"display"),k="none"===j?ea._data(a,"olddisplay")||z(a.nodeName):j,"inline"===k&&"none"===ea.css(a,"float")&&(ca.inlineBlockNeedsLayout&&"inline"!==z(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",ca.shrinkWrapBlocks()||l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],pb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||ea.style(a,d)}else j=void 0;if(ea.isEmptyObject(m))"inline"===("none"===j?z(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=ea._data(a,"fxshow",{}),f&&(p.hidden=!o),o?ea(a).show():l.done(function(){ea(a).hide()}),l.done(function(){var b;ea._removeData(a,"fxshow");for(b in m)ea.style(a,b,m[b])});for(d in m)g=J(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function L(a,b){var c,d,e,f,g;for(c in a)if(d=ea.camelCase(c),e=b[d],f=a[c],ea.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=ea.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function M(a,b,c){var d,e,f=0,g=sb.length,h=ea.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=nb||H(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ea.extend({},b),opts:ea.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:nb||H(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ea.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(L(k,j.opts.specialEasing);f<g;f++)if(d=sb[f].call(j,a,k,j.opts))return d;return ea.map(k,J,j),ea.isFunction(j.opts.start)&&j.opts.start.call(a,j),ea.fx.timer(ea.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function N(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ta)||[];if(ea.isFunction(c))for(;d=f[e++];)"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function O(a,b,c,d){function e(h){var i;return f[h]=!0,ea.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Rb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function P(a,b){var c,d,e=ea.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&ea.extend(!0,a,c),a}function Q(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}if(f)return f!==i[0]&&i.unshift(f),c[f]}function R(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function S(a,b,c,d){var e;if(ea.isArray(b))ea.each(b,function(b,e){c||Vb.test(a)?d(a,e):S(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ea.type(b))d(a,b);else for(e in b)S(a+"["+e+"]",b[e],c,d)}function T(){try{return new a.XMLHttpRequest}catch(b){}}function U(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function V(a){return ea.isWindow(a)?a:9===a.nodeType&&(a.defaultView||a.parentWindow)}var W=[],X=W.slice,Y=W.concat,Z=W.push,$=W.indexOf,_={},aa=_.toString,ba=_.hasOwnProperty,ca={},da="1.11.3",ea=function(a,b){return new ea.fn.init(a,b)},fa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ga=/^-ms-/,ha=/-([\da-z])/gi,ia=function(a,b){return b.toUpperCase()};ea.fn=ea.prototype={jquery:da,constructor:ea,selector:"",length:0,toArray:function(){return X.call(this)},get:function(a){return null!=a?a<0?this[a+this.length]:this[a]:X.call(this)},pushStack:function(a){var b=ea.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ea.each(this,a,b)},map:function(a){return this.pushStack(ea.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:W.sort,splice:W.splice},ea.extend=ea.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||ea.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(ea.isPlainObject(c)||(b=ea.isArray(c)))?(b?(b=!1,f=a&&ea.isArray(a)?a:[]):f=a&&ea.isPlainObject(a)?a:{},g[d]=ea.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},ea.extend({expando:"jQuery"+(da+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===ea.type(a)},isArray:Array.isArray||function(a){return"array"===ea.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!ea.isArray(a)&&a-parseFloat(a)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==ea.type(a)||a.nodeType||ea.isWindow(a))return!1;try{if(a.constructor&&!ba.call(a,"constructor")&&!ba.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(ca.ownLast)for(b in a)return ba.call(a,b);for(b in a);return void 0===b||ba.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?_[aa.call(a)]||"object":typeof a},globalEval:function(b){b&&ea.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ga,"ms-").replace(ha,ia)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;f<g&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;f<g&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(fa,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ea.merge(d,"string"==typeof a?[a]:a):Z.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if($)return $.call(b,a,c);for(d=b.length,c=c?c<0?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;f<g;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return Y.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(e=a[b],b=a,a=e),ea.isFunction(a))return c=X.call(arguments,2),d=function(){return a.apply(b||this,c.concat(X.call(arguments)))},d.guid=a.guid=a.guid||ea.guid++,d},now:function(){return+new Date},support:ca}),ea.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){_["[object "+b+"]"]=b.toLowerCase()});var ja=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],h=b.nodeType,"string"!=typeof a||!a||1!==h&&9!==h&&11!==h)return c;if(!d&&I){if(11!==h&&(e=sa.exec(a)))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return $.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName)return $.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){if(n=l=N,o=b,p=1!==h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=z(a),(l=b.getAttribute("id"))?n=l.replace(ua,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=ta.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return $.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ia,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;e<f;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];h<e;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;d<e&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ia,"$1"),c,h<d&&s(a.slice(h,d)),d<e&&s(a=a.slice(d)),d<e&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ea=da.replace("w","w#"),fa="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ea+"))|)"+ca+"*\\]",ga=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fa+")*)|.*)\\)|)",ha=new RegExp(ca+"+","g"),ia=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ja=new RegExp("^"+ca+"*,"+ca+"*"),ka=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),la=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),ma=new RegExp(ga),na=new RegExp("^"+ea+"$"),oa={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da.replace("w","w*")+")"),ATTR:new RegExp("^"+fa),PSEUDO:new RegExp("^"+ga),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},pa=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,ra=/^[^{]+\{\s*\[native \w/,sa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ta=/[+~]/,ua=/'|\\/g,va=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),wa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},xa=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(ya){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=d.documentElement,c=d.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),I=!y(d),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=ra.test(d.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!d.getElementsByName||!d.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){if(I)return b.getElementsByClassName(a)},K=[],J=[],(v.qsa=ra.test(d.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=d.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+ca+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=ra.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ga)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=ra.test(H.compareDocumentPosition),M=b||ra.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===d||a.ownerDocument===O&&M(O,a)?-1:b===d||b.ownerDocument===O&&M(O,b)?1:D?aa(D,a)-aa(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===d?-1:b===d?1:f?-1:h?1:D?aa(D,a)-aa(D,b):0;if(f===h)return g(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},d):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(la,"='$1']"),v.matchesSelector&&I&&(!K||!K.test(c))&&(!J||!J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:oa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(va,wa),a[3]=(a[3]||a[4]||a[5]||"").replace(va,wa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return oa.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&ma.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(va,wa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ha," ")+" ").indexOf(d)>-1:"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ia,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(va,wa),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return na.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(va,wa).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qa.test(a.nodeName)},input:function(a){return pa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[c<0?c+b:c]}),even:j(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;
for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){d&&!(e=ja.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ka.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ia," ")}),h=h.slice(d.length));for(g in w.filter)!(e=oa[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(va,wa),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=oa.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(va,wa),ta.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,ta.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);ea.find=ja,ea.expr=ja.selectors,ea.expr[":"]=ea.expr.pseudos,ea.unique=ja.uniqueSort,ea.text=ja.getText,ea.isXMLDoc=ja.isXML,ea.contains=ja.contains;var ka=ea.expr.match.needsContext,la=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ma=/^.[^:#\[\.,]*$/;ea.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?ea.find.matchesSelector(d,a)?[d]:[]:ea.find.matches(a,ea.grep(b,function(a){return 1===a.nodeType}))},ea.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(ea(a).filter(function(){for(b=0;b<e;b++)if(ea.contains(d[b],this))return!0}));for(b=0;b<e;b++)ea.find(a,d[b],c);return c=this.pushStack(e>1?ea.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&ka.test(a)?ea(a):a||[],!1).length}});var na,oa=a.document,pa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,qa=ea.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:pa.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||na).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof ea?b[0]:b,ea.merge(this,ea.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:oa,!0)),la.test(c[1])&&ea.isPlainObject(b))for(c in b)ea.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=oa.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return na.find(a);this.length=1,this[0]=d}return this.context=oa,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ea.isFunction(a)?"undefined"!=typeof na.ready?na.ready(a):a(ea):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),ea.makeArray(a,this))};qa.prototype=ea.fn,na=ea(oa);var ra=/^(?:parents|prev(?:Until|All))/,sa={children:!0,contents:!0,next:!0,prev:!0};ea.extend({dir:function(a,b,c){for(var d=[],e=a[b];e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!ea(e).is(c));)1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),ea.fn.extend({has:function(a){var b,c=ea(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(ea.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=ka.test(a)||"string"!=typeof a?ea(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&ea.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?ea.unique(f):f)},index:function(a){return a?"string"==typeof a?ea.inArray(this[0],ea(a)):ea.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(ea.unique(ea.merge(this.get(),ea(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ea.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ea.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ea.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return ea.dir(a,"nextSibling")},prevAll:function(a){return ea.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ea.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ea.dir(a,"previousSibling",c)},siblings:function(a){return ea.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ea.sibling(a.firstChild)},contents:function(a){return ea.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ea.merge([],a.childNodes)}},function(a,b){ea.fn[a]=function(c,d){var e=ea.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=ea.filter(d,e)),this.length>1&&(sa[a]||(e=ea.unique(e)),ra.test(a)&&(e=e.reverse())),this.pushStack(e)}});var ta=/\S+/g,ua={};ea.Callbacks=function(a){a="string"==typeof a?ua[a]||f(a):ea.extend({},a);var b,c,d,e,g,h,i=[],j=!a.once&&[],k=function(f){for(c=a.memory&&f,d=!0,g=h||0,h=0,e=i.length,b=!0;i&&g<e;g++)if(i[g].apply(f[0],f[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var d=i.length;!function f(b){ea.each(b,function(b,c){var d=ea.type(c);"function"===d?a.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=i.length:c&&(h=d,k(c))}return this},remove:function(){return i&&ea.each(arguments,function(a,c){for(var d;(d=ea.inArray(c,i,d))>-1;)i.splice(d,1),b&&(d<=e&&e--,d<=g&&g--)}),this},has:function(a){return a?ea.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],e=0,this},disable:function(){return i=j=c=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,c){return!i||d&&!j||(c=c||[],c=[a,c.slice?c.slice():c],b?j.push(c):k(c)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},ea.extend({Deferred:function(a){var b=[["resolve","done",ea.Callbacks("once memory"),"resolved"],["reject","fail",ea.Callbacks("once memory"),"rejected"],["notify","progress",ea.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ea.Deferred(function(c){ea.each(b,function(b,f){var g=ea.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&ea.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ea.extend(a,d):d}},e={};return d.pipe=d.then,ea.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=X.call(arguments),g=f.length,h=1!==g||a&&ea.isFunction(a.promise)?g:0,i=1===h?a:ea.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?X.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);e<g;e++)f[e]&&ea.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var va;ea.fn.ready=function(a){return ea.ready.promise().done(a),this},ea.extend({isReady:!1,readyWait:1,holdReady:function(a){a?ea.readyWait++:ea.ready(!0)},ready:function(a){if(a===!0?!--ea.readyWait:!ea.isReady){if(!oa.body)return setTimeout(ea.ready);ea.isReady=!0,a!==!0&&--ea.readyWait>0||(va.resolveWith(oa,[ea]),ea.fn.triggerHandler&&(ea(oa).triggerHandler("ready"),ea(oa).off("ready")))}}}),ea.ready.promise=function(b){if(!va)if(va=ea.Deferred(),"complete"===oa.readyState)setTimeout(ea.ready);else if(oa.addEventListener)oa.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1);else{oa.attachEvent("onreadystatechange",h),a.attachEvent("onload",h);var c=!1;try{c=null==a.frameElement&&oa.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!ea.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}g(),ea.ready()}}()}return va.promise(b)};var wa,xa="undefined";for(wa in ea(ca))break;ca.ownLast="0"!==wa,ca.inlineBlockNeedsLayout=!1,ea(function(){var a,b,c,d;c=oa.getElementsByTagName("body")[0],c&&c.style&&(b=oa.createElement("div"),d=oa.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==xa&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ca.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=oa.createElement("div");if(null==ca.deleteExpando){ca.deleteExpando=!0;try{delete a.test}catch(b){ca.deleteExpando=!1}}a=null}(),ea.acceptData=function(a){var b=ea.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return(1===c||9===c)&&(!b||b!==!0&&a.getAttribute("classid")===b)};var ya=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,za=/([A-Z])/g;ea.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?ea.cache[a[ea.expando]]:a[ea.expando],!!a&&!j(a)},data:function(a,b,c){return k(a,b,c)},removeData:function(a,b){return l(a,b)},_data:function(a,b,c){return k(a,b,c,!0)},_removeData:function(a,b){return l(a,b,!0)}}),ea.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=ea.data(f),1===f.nodeType&&!ea._data(f,"parsedAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=ea.camelCase(d.slice(5)),i(f,d,e[d])));ea._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){ea.data(this,a)}):arguments.length>1?this.each(function(){ea.data(this,a,b)}):f?i(f,a,ea.data(f,a)):void 0},removeData:function(a){return this.each(function(){ea.removeData(this,a)})}}),ea.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=ea._data(a,b),c&&(!d||ea.isArray(c)?d=ea._data(a,b,ea.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=ea.queue(a,b),d=c.length,e=c.shift(),f=ea._queueHooks(a,b),g=function(){ea.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ea._data(a,c)||ea._data(a,c,{empty:ea.Callbacks("once memory").add(function(){ea._removeData(a,b+"queue"),ea._removeData(a,c)})})}}),ea.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?ea.queue(this[0],a):void 0===b?this:this.each(function(){var c=ea.queue(this,a,b);ea._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&ea.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ea.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=ea.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=ea._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Aa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ba=["Top","Right","Bottom","Left"],Ca=function(a,b){return a=b||a,"none"===ea.css(a,"display")||!ea.contains(a.ownerDocument,a)},Da=ea.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===ea.type(c)){e=!0;for(h in c)ea.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,ea.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(ea(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Ea=/^(?:checkbox|radio)$/i;!function(){var a=oa.createElement("input"),b=oa.createElement("div"),c=oa.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ca.leadingWhitespace=3===b.firstChild.nodeType,ca.tbody=!b.getElementsByTagName("tbody").length,ca.htmlSerialize=!!b.getElementsByTagName("link").length,ca.html5Clone="<:nav></:nav>"!==oa.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),ca.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",ca.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",ca.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,ca.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){ca.noCloneEvent=!1}),b.cloneNode(!0).click()),null==ca.deleteExpando){ca.deleteExpando=!0;try{delete b.test}catch(d){ca.deleteExpando=!1}}}(),function(){var b,c,d=oa.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(ca[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),ca[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var Fa=/^(?:input|select|textarea)$/i,Ga=/^key/,Ha=/^(?:mouse|pointer|contextmenu)|click/,Ia=/^(?:focusinfocus|focusoutblur)$/,Ja=/^([^.]*)(?:\.(.+)|)$/;ea.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ea._data(a);if(q){for(c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=ea.guid++),(g=q.events)||(g=q.events={}),(k=q.handle)||(k=q.handle=function(a){return typeof ea===xa||a&&ea.event.triggered===a.type?void 0:ea.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(ta)||[""],h=b.length;h--;)f=Ja.exec(b[h])||[],n=p=f[1],o=(f[2]||"").split(".").sort(),n&&(j=ea.event.special[n]||{},n=(e?j.delegateType:j.bindType)||n,j=ea.event.special[n]||{},l=ea.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&ea.expr.match.needsContext.test(e),namespace:o.join(".")},i),(m=g[n])||(m=g[n]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,o,k)!==!1||(a.addEventListener?a.addEventListener(n,k,!1):a.attachEvent&&a.attachEvent("on"+n,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),ea.event.global[n]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ea.hasData(a)&&ea._data(a);if(q&&(k=q.events)){for(b=(b||"").match(ta)||[""],j=b.length;j--;)if(h=Ja.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ea.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ea.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ea.event.remove(a,n+b[j],c,d,!0);ea.isEmptyObject(k)&&(delete q.handle,ea._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||oa],n=ba.call(b,"type")?b.type:b,o=ba.call(b,"namespace")?b.namespace.split("."):[];if(h=k=d=d||oa,3!==d.nodeType&&8!==d.nodeType&&!Ia.test(n+ea.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),g=n.indexOf(":")<0&&"on"+n,b=b[ea.expando]?b:new ea.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:ea.makeArray(c,[b]),j=ea.event.special[n]||{},e||!j.trigger||j.trigger.apply(d,c)!==!1)){if(!e&&!j.noBubble&&!ea.isWindow(d)){for(i=j.delegateType||n,Ia.test(i+n)||(h=h.parentNode);h;h=h.parentNode)m.push(h),k=h;k===(d.ownerDocument||oa)&&m.push(k.defaultView||k.parentWindow||a)}for(l=0;(h=m[l++])&&!b.isPropagationStopped();)b.type=l>1?i:j.bindType||n,f=(ea._data(h,"events")||{})[b.type]&&ea._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&ea.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=n,!e&&!b.isDefaultPrevented()&&(!j._default||j._default.apply(m.pop(),c)===!1)&&ea.acceptData(d)&&g&&d[n]&&!ea.isWindow(d)){k=d[g],k&&(d[g]=null),ea.event.triggered=n;try{d[n]()}catch(p){}ea.event.triggered=void 0,k&&(d[g]=k)}return b.result}},dispatch:function(a){a=ea.event.fix(a);var b,c,d,e,f,g=[],h=X.call(arguments),i=(ea._data(this,"events")||{})[a.type]||[],j=ea.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=ea.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,f=0;(d=e.handlers[f++])&&!a.isImmediatePropagationStopped();)a.namespace_re&&!a.namespace_re.test(d.namespace)||(a.handleObj=d,a.data=d.data,c=((ea.event.special[d.origType]||{}).handle||d.handler).apply(e.elem,h),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;f<h;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?ea(c,this).index(i)>=0:ea.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[ea.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Ha.test(e)?this.mouseHooks:Ga.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ea.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||oa),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||oa,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==o()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){if(this===o()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ea.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(a){return ea.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ea.extend(new ea.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ea.event.trigger(e,null,b):ea.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ea.removeEvent=oa.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===xa&&(a[d]=null),a.detachEvent(d,c))},ea.Event=function(a,b){return this instanceof ea.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?m:n):this.type=a,b&&ea.extend(this,b),this.timeStamp=a&&a.timeStamp||ea.now(),void(this[ea.expando]=!0)):new ea.Event(a,b)},ea.Event.prototype={isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=m,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=m,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=m,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},ea.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){ea.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||ea.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ca.submitBubbles||(ea.event.special.submit={setup:function(){return!ea.nodeName(this,"form")&&void ea.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=ea.nodeName(b,"input")||ea.nodeName(b,"button")?b.form:void 0;c&&!ea._data(c,"submitBubbles")&&(ea.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),ea._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ea.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return!ea.nodeName(this,"form")&&void ea.event.remove(this,"._submit")}}),ca.changeBubbles||(ea.event.special.change={setup:function(){return Fa.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(ea.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ea.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ea.event.simulate("change",this,a,!0)})),!1):void ea.event.add(this,"beforeactivate._change",function(a){var b=a.target;Fa.test(b.nodeName)&&!ea._data(b,"changeBubbles")&&(ea.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ea.event.simulate("change",this.parentNode,a,!0)}),ea._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){return ea.event.remove(this,"._change"),!Fa.test(this.nodeName)}}),ca.focusinBubbles||ea.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){ea.event.simulate(b,a.target,ea.event.fix(a),!0)};ea.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=ea._data(d,b);e||d.addEventListener(a,c,!0),ea._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=ea._data(d,b)-1;e?ea._data(d,b,e):(d.removeEventListener(a,c,!0),ea._removeData(d,b))}}}),ea.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=n;else if(!d)return this;return 1===e&&(g=d,d=function(a){return ea().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=ea.guid++)),this.each(function(){ea.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,ea(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=n),this.each(function(){ea.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){ea.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return ea.event.trigger(a,b,c,!0)}});var Ka="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",La=/ jQuery\d+="(?:null|\d+)"/g,Ma=new RegExp("<(?:"+Ka+")[\\s/>]","i"),Na=/^\s+/,Oa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Pa=/<([\w:]+)/,Qa=/<tbody/i,Ra=/<|&#?\w+;/,Sa=/<(?:script|style|link)/i,Ta=/checked\s*(?:[^=]|=\s*.checked.)/i,Ua=/^$|\/(?:java|ecma)script/i,Va=/^true\/(.*)/,Wa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ca.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ya=p(oa),Za=Ya.appendChild(oa.createElement("div"));Xa.optgroup=Xa.option,Xa.tbody=Xa.tfoot=Xa.colgroup=Xa.caption=Xa.thead,Xa.th=Xa.td,ea.extend({clone:function(a,b,c){var d,e,f,g,h,i=ea.contains(a.ownerDocument,a);if(ca.html5Clone||ea.isXMLDoc(a)||!Ma.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Za.innerHTML=a.outerHTML,Za.removeChild(f=Za.firstChild)),!(ca.noCloneEvent&&ca.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ea.isXMLDoc(a)))for(d=q(f),h=q(a),g=0;null!=(e=h[g]);++g)d[g]&&x(e,d[g]);if(b)if(c)for(h=h||q(a),d=d||q(f),g=0;null!=(e=h[g]);g++)w(e,d[g]);else w(a,f);return d=q(f,"script"),d.length>0&&v(d,!i&&q(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=p(b),n=[],o=0;o<l;o++)if(f=a[o],f||0===f)if("object"===ea.type(f))ea.merge(n,f.nodeType?[f]:f);else if(Ra.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(Pa.exec(f)||["",""])[1].toLowerCase(),k=Xa[i]||Xa._default,h.innerHTML=k[1]+f.replace(Oa,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ca.leadingWhitespace&&Na.test(f)&&n.push(b.createTextNode(Na.exec(f)[0])),!ca.tbody)for(f="table"!==i||Qa.test(f)?"<table>"!==k[1]||Qa.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ea.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ea.merge(n,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else n.push(b.createTextNode(f));for(h&&m.removeChild(h),ca.appendChecked||ea.grep(q(n,"input"),r),o=0;f=n[o++];)if((!d||ea.inArray(f,d)===-1)&&(g=ea.contains(f.ownerDocument,f),h=q(m.appendChild(f),"script"),g&&v(h),c))for(e=0;f=h[e++];)Ua.test(f.type||"")&&c.push(f);return h=null,m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ea.expando,i=ea.cache,j=ca.deleteExpando,k=ea.event.special;null!=(c=a[g]);g++)if((b||ea.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ea.event.remove(c,d):ea.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==xa?c.removeAttribute(h):c[h]=null,W.push(e))}}}),ea.fn.extend({text:function(a){return Da(this,function(a){return void 0===a?ea.text(this):this.empty().append((this[0]&&this[0].ownerDocument||oa).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=s(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=s(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?ea.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||ea.cleanData(q(c)),c.parentNode&&(b&&ea.contains(c.ownerDocument,c)&&v(q(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ea.cleanData(q(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ea.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return ea.clone(this,a,b)})},html:function(a){return Da(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(La,""):void 0;if("string"==typeof a&&!Sa.test(a)&&(ca.htmlSerialize||!Ma.test(a))&&(ca.leadingWhitespace||!Na.test(a))&&!Xa[(Pa.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Oa,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(ea.cleanData(q(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,ea.cleanData(q(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=Y.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],n=ea.isFunction(m);if(n||j>1&&"string"==typeof m&&!ca.checkClone&&Ta.test(m))return this.each(function(c){var d=k.eq(c);n&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(h=ea.buildFragment(a,this[0].ownerDocument,!1,this),c=h.firstChild,1===h.childNodes.length&&(h=c),c)){for(f=ea.map(q(h,"script"),t),e=f.length;i<j;i++)d=h,i!==l&&(d=ea.clone(d,!0,!0),e&&ea.merge(f,q(d,"script"))),b.call(this[i],d,i);if(e)for(g=f[f.length-1].ownerDocument,ea.map(f,u),i=0;i<e;i++)d=f[i],Ua.test(d.type||"")&&!ea._data(d,"globalEval")&&ea.contains(g,d)&&(d.src?ea._evalUrl&&ea._evalUrl(d.src):ea.globalEval((d.text||d.textContent||d.innerHTML||"").replace(Wa,"")));h=c=null}return this}}),ea.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ea.fn[a]=function(a){for(var c,d=0,e=[],f=ea(a),g=f.length-1;d<=g;d++)c=d===g?this:this.clone(!0),ea(f[d])[b](c),Z.apply(e,c.get());return this.pushStack(e)}});var $a,_a={};!function(){var a;ca.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=oa.getElementsByTagName("body")[0],c&&c.style?(b=oa.createElement("div"),d=oa.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==xa&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(oa.createElement("div")).style.width="5px",a=3!==b.offsetWidth),
c.removeChild(d),a):void 0}}();var ab,bb,cb=/^margin/,db=new RegExp("^("+Aa+")(?!px)[a-z%]+$","i"),eb=/^(top|right|bottom|left)$/;a.getComputedStyle?(ab=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)},bb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||ab(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||ea.contains(a.ownerDocument,a)||(g=ea.style(a,b)),db.test(g)&&cb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):oa.documentElement.currentStyle&&(ab=function(a){return a.currentStyle},bb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||ab(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),db.test(g)&&!eb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"}),function(){function b(){var b,c,d,e;c=oa.getElementsByTagName("body")[0],c&&c.style&&(b=oa.createElement("div"),d=oa.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f=g=!1,i=!0,a.getComputedStyle&&(f="1%"!==(a.getComputedStyle(b,null)||{}).top,g="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,e=b.appendChild(oa.createElement("div")),e.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",b.style.width="1px",i=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight),b.removeChild(e)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=b.getElementsByTagName("td"),e[0].style.cssText="margin:0;border:0;padding:0;display:none",h=0===e[0].offsetHeight,h&&(e[0].style.display="",e[1].style.display="none",h=0===e[0].offsetHeight),c.removeChild(d))}var c,d,e,f,g,h,i;c=oa.createElement("div"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=c.getElementsByTagName("a")[0],d=e&&e.style,d&&(d.cssText="float:left;opacity:.5",ca.opacity="0.5"===d.opacity,ca.cssFloat=!!d.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",ca.clearCloneStyle="content-box"===c.style.backgroundClip,ca.boxSizing=""===d.boxSizing||""===d.MozBoxSizing||""===d.WebkitBoxSizing,ea.extend(ca,{reliableHiddenOffsets:function(){return null==h&&b(),h},boxSizingReliable:function(){return null==g&&b(),g},pixelPosition:function(){return null==f&&b(),f},reliableMarginRight:function(){return null==i&&b(),i}}))}(),ea.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var fb=/alpha\([^)]*\)/i,gb=/opacity\s*=\s*([^)]*)/,hb=/^(none|table(?!-c[ea]).+)/,ib=new RegExp("^("+Aa+")(.*)$","i"),jb=new RegExp("^([+-])=("+Aa+")","i"),kb={position:"absolute",visibility:"hidden",display:"block"},lb={letterSpacing:"0",fontWeight:"400"},mb=["Webkit","O","Moz","ms"];ea.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ca.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=ea.camelCase(b),i=a.style;if(b=ea.cssProps[h]||(ea.cssProps[h]=B(i,h)),g=ea.cssHooks[b]||ea.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=jb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(ea.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||ea.cssNumber[h]||(c+="px"),ca.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=ea.camelCase(b);return b=ea.cssProps[h]||(ea.cssProps[h]=B(a.style,h)),g=ea.cssHooks[b]||ea.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=bb(a,b,d)),"normal"===f&&b in lb&&(f=lb[b]),""===c||c?(e=parseFloat(f),c===!0||ea.isNumeric(e)?e||0:f):f}}),ea.each(["height","width"],function(a,b){ea.cssHooks[b]={get:function(a,c,d){if(c)return hb.test(ea.css(a,"display"))&&0===a.offsetWidth?ea.swap(a,kb,function(){return F(a,b,d)}):F(a,b,d)},set:function(a,c,d){var e=d&&ab(a);return D(a,c,d?E(a,b,d,ca.boxSizing&&"border-box"===ea.css(a,"boxSizing",!1,e),e):0)}}}),ca.opacity||(ea.cssHooks.opacity={get:function(a,b){return gb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ea.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ea.trim(f.replace(fb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=fb.test(f)?f.replace(fb,e):f+" "+e)}}),ea.cssHooks.marginRight=A(ca.reliableMarginRight,function(a,b){if(b)return ea.swap(a,{display:"inline-block"},bb,[a,"marginRight"])}),ea.each({margin:"",padding:"",border:"Width"},function(a,b){ea.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+Ba[d]+b]=f[d]||f[d-2]||f[0];return e}},cb.test(a)||(ea.cssHooks[a+b].set=D)}),ea.fn.extend({css:function(a,b){return Da(this,function(a,b,c){var d,e,f={},g=0;if(ea.isArray(b)){for(d=ab(a),e=b.length;g<e;g++)f[b[g]]=ea.css(a,b[g],!1,d);return f}return void 0!==c?ea.style(a,b,c):ea.css(a,b)},a,b,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Ca(this)?ea(this).show():ea(this).hide()})}}),ea.Tween=G,G.prototype={constructor:G,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ea.cssNumber[c]?"":"px")},cur:function(){var a=G.propHooks[this.prop];return a&&a.get?a.get(this):G.propHooks._default.get(this)},run:function(a){var b,c=G.propHooks[this.prop];return this.options.duration?this.pos=b=ea.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):G.propHooks._default.set(this),this}},G.prototype.init.prototype=G.prototype,G.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ea.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ea.fx.step[a.prop]?ea.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ea.cssProps[a.prop]]||ea.cssHooks[a.prop])?ea.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},G.propHooks.scrollTop=G.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ea.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ea.fx=G.prototype.init,ea.fx.step={};var nb,ob,pb=/^(?:toggle|show|hide)$/,qb=new RegExp("^(?:([+-])=|)("+Aa+")([a-z%]*)$","i"),rb=/queueHooks$/,sb=[K],tb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=qb.exec(b),f=e&&e[3]||(ea.cssNumber[a]?"":"px"),g=(ea.cssNumber[a]||"px"!==f&&+d)&&qb.exec(ea.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,ea.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};ea.Animation=ea.extend(M,{tweener:function(a,b){ea.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],tb[c]=tb[c]||[],tb[c].unshift(b)},prefilter:function(a,b){b?sb.unshift(a):sb.push(a)}}),ea.speed=function(a,b,c){var d=a&&"object"==typeof a?ea.extend({},a):{complete:c||!c&&b||ea.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ea.isFunction(b)&&b};return d.duration=ea.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ea.fx.speeds?ea.fx.speeds[d.duration]:ea.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){ea.isFunction(d.old)&&d.old.call(this),d.queue&&ea.dequeue(this,d.queue)},d},ea.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Ca).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ea.isEmptyObject(a),f=ea.speed(b,c,d),g=function(){var b=M(this,ea.extend({},a),f);(e||ea._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=ea.timers,g=ea._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&rb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||ea.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ea._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ea.timers,g=d?d.length:0;for(c.finish=!0,ea.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ea.each(["toggle","show","hide"],function(a,b){var c=ea.fn[b];ea.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(I(b,!0),a,d,e)}}),ea.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ea.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ea.timers=[],ea.fx.tick=function(){var a,b=ea.timers,c=0;for(nb=ea.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||ea.fx.stop(),nb=void 0},ea.fx.timer=function(a){ea.timers.push(a),a()?ea.fx.start():ea.timers.pop()},ea.fx.interval=13,ea.fx.start=function(){ob||(ob=setInterval(ea.fx.tick,ea.fx.interval))},ea.fx.stop=function(){clearInterval(ob),ob=null},ea.fx.speeds={slow:600,fast:200,_default:400},ea.fn.delay=function(a,b){return a=ea.fx?ea.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=oa.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=oa.createElement("select"),e=c.appendChild(oa.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",ca.getSetAttribute="t"!==b.className,ca.style=/top/.test(d.getAttribute("style")),ca.hrefNormalized="/a"===d.getAttribute("href"),ca.checkOn=!!a.value,ca.optSelected=e.selected,ca.enctype=!!oa.createElement("form").enctype,c.disabled=!0,ca.optDisabled=!e.disabled,a=oa.createElement("input"),a.setAttribute("value",""),ca.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),ca.radioValue="t"===a.value}();var ub=/\r/g;ea.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=ea.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,ea(this).val()):a,null==e?e="":"number"==typeof e?e+="":ea.isArray(e)&&(e=ea.map(e,function(a){return null==a?"":a+""})),b=ea.valHooks[this.type]||ea.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=ea.valHooks[e.type]||ea.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ub,""):null==c?"":c)}}}),ea.extend({valHooks:{option:{get:function(a){var b=ea.find.attr(a,"value");return null!=b?b:ea.trim(ea.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&(ca.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!ea.nodeName(c.parentNode,"optgroup"))){if(b=ea(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=ea.makeArray(b),g=e.length;g--;)if(d=e[g],ea.inArray(ea.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),ea.each(["radio","checkbox"],function(){ea.valHooks[this]={set:function(a,b){if(ea.isArray(b))return a.checked=ea.inArray(ea(a).val(),b)>=0}},ca.checkOn||(ea.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var vb,wb,xb=ea.expr.attrHandle,yb=/^(?:checked|selected)$/i,zb=ca.getSetAttribute,Ab=ca.input;ea.fn.extend({attr:function(a,b){return Da(this,ea.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ea.removeAttr(this,a)})}}),ea.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===xa?ea.prop(a,b,c):(1===f&&ea.isXMLDoc(a)||(b=b.toLowerCase(),d=ea.attrHooks[b]||(ea.expr.match.bool.test(b)?wb:vb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=ea.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void ea.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ta);if(f&&1===a.nodeType)for(;c=f[e++];)d=ea.propFix[c]||c,ea.expr.match.bool.test(c)?Ab&&zb||!yb.test(c)?a[d]=!1:a[ea.camelCase("default-"+c)]=a[d]=!1:ea.attr(a,c,""),a.removeAttribute(zb?c:d)},attrHooks:{type:{set:function(a,b){if(!ca.radioValue&&"radio"===b&&ea.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),wb={set:function(a,b,c){return b===!1?ea.removeAttr(a,c):Ab&&zb||!yb.test(c)?a.setAttribute(!zb&&ea.propFix[c]||c,c):a[ea.camelCase("default-"+c)]=a[c]=!0,c}},ea.each(ea.expr.match.bool.source.match(/\w+/g),function(a,b){var c=xb[b]||ea.find.attr;xb[b]=Ab&&zb||!yb.test(b)?function(a,b,d){var e,f;return d||(f=xb[b],xb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,xb[b]=f),e}:function(a,b,c){if(!c)return a[ea.camelCase("default-"+b)]?b.toLowerCase():null}}),Ab&&zb||(ea.attrHooks.value={set:function(a,b,c){return ea.nodeName(a,"input")?void(a.defaultValue=b):vb&&vb.set(a,b,c)}}),zb||(vb={set:function(a,b,c){var d=a.getAttributeNode(c);if(d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c))return b}},xb.id=xb.name=xb.coords=function(a,b,c){var d;if(!c)return(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},ea.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);if(c&&c.specified)return c.value},set:vb.set},ea.attrHooks.contenteditable={set:function(a,b,c){vb.set(a,""!==b&&b,c)}},ea.each(["width","height"],function(a,b){ea.attrHooks[b]={set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}}})),ca.style||(ea.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var Bb=/^(?:input|select|textarea|button|object)$/i,Cb=/^(?:a|area)$/i;ea.fn.extend({prop:function(a,b){return Da(this,ea.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ea.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),ea.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!ea.isXMLDoc(a),f&&(b=ea.propFix[b]||b,e=ea.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=ea.find.attr(a,"tabindex");return b?parseInt(b,10):Bb.test(a.nodeName)||Cb.test(a.nodeName)&&a.href?0:-1}}}}),ca.hrefNormalized||ea.each(["href","src"],function(a,b){ea.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),ca.optSelected||(ea.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),ea.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ea.propFix[this.toLowerCase()]=this}),ca.enctype||(ea.propFix.enctype="encoding");var Db=/[\t\r\n\f]/g;ea.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(ea.isFunction(a))return this.each(function(b){ea(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(ta)||[];h<i;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Db," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=ea.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(ea.isFunction(a))return this.each(function(b){ea(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(ta)||[];h<i;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Db," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?ea.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):ea.isFunction(a)?this.each(function(c){ea(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=ea(this),f=a.match(ta)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else c!==xa&&"boolean"!==c||(this.className&&ea._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ea._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;c<d;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Db," ").indexOf(b)>=0)return!0;return!1}}),ea.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ea.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ea.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Eb=ea.now(),Fb=/\?/,Gb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ea.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=ea.trim(b+"");return e&&!ea.trim(e.replace(Gb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():ea.error("Invalid JSON: "+b)},ea.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||ea.error("Invalid XML: "+b),c};var Hb,Ib,Jb=/#.*$/,Kb=/([?&])_=[^&]*/,Lb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Mb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nb=/^(?:GET|HEAD)$/,Ob=/^\/\//,Pb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Qb={},Rb={},Sb="*/".concat("*");try{Ib=location.href}catch(Tb){Ib=oa.createElement("a"),Ib.href="",Ib=Ib.href}Hb=Pb.exec(Ib.toLowerCase())||[],ea.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ib,type:"GET",isLocal:Mb.test(Hb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ea.parseJSON,"text xml":ea.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?P(P(a,ea.ajaxSettings),b):P(ea.ajaxSettings,a)},ajaxPrefilter:N(Qb),ajaxTransport:N(Rb),ajax:function(a,b){function c(a,b,c,d){var e,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),j=void 0,g=d||"",v.readyState=a>0?4:0,e=a>=200&&a<300||304===a,c&&(s=Q(l,v,c)),s=R(l,s,v,e),e?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(ea.lastModified[f]=u),u=v.getResponseHeader("etag"),u&&(ea.etag[f]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,e=!r)):(r=w,!a&&w||(w="error",a<0&&(a=0))),v.status=a,v.statusText=(b||w)+"",e?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,i&&n.trigger(e?"ajaxSuccess":"ajaxError",[v,l,e?k:r]),p.fireWith(m,[v,w]),i&&(n.trigger("ajaxComplete",[v,l]),--ea.active||ea.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=ea.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?ea(m):ea.event,o=ea.Deferred(),p=ea.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!k)for(k={};b=Lb.exec(g);)k[b[1].toLowerCase()]=b[2];b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(t<2)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return j&&j.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||Ib)+"").replace(Jb,"").replace(Ob,Hb[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=ea.trim(l.dataType||"*").toLowerCase().match(ta)||[""],null==l.crossDomain&&(d=Pb.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===Hb[1]&&d[2]===Hb[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Hb[3]||("http:"===Hb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=ea.param(l.data,l.traditional)),O(Qb,l,b,v),2===t)return v;i=ea.event&&l.global,i&&0===ea.active++&&ea.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Nb.test(l.type),f=l.url,l.hasContent||(l.data&&(f=l.url+=(Fb.test(f)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Kb.test(f)?f.replace(Kb,"$1_="+Eb++):f+(Fb.test(f)?"&":"?")+"_="+Eb++)),l.ifModified&&(ea.lastModified[f]&&v.setRequestHeader("If-Modified-Since",ea.lastModified[f]),ea.etag[f]&&v.setRequestHeader("If-None-Match",ea.etag[f])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Sb+"; q=0.01":""):l.accepts["*"]);for(e in l.headers)v.setRequestHeader(e,l.headers[e]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(e in{success:1,error:1,complete:1})v[e](l[e]);if(j=O(Rb,l,b,v)){v.readyState=1,i&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,j.send(r,c)}catch(w){if(!(t<2))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return ea.get(a,b,c,"json")},getScript:function(a,b){return ea.get(a,void 0,b,"script")}}),ea.each(["get","post"],function(a,b){ea[b]=function(a,c,d,e){return ea.isFunction(c)&&(e=e||d,d=c,c=void 0),ea.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),ea._evalUrl=function(a){return ea.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ea.fn.extend({wrapAll:function(a){if(ea.isFunction(a))return this.each(function(b){ea(this).wrapAll(a.call(this,b))});if(this[0]){var b=ea(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return ea.isFunction(a)?this.each(function(b){ea(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ea(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ea.isFunction(a);return this.each(function(c){ea(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ea.nodeName(this,"body")||ea(this).replaceWith(this.childNodes)}).end()}}),ea.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!ca.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||ea.css(a,"display"))},ea.expr.filters.visible=function(a){return!ea.expr.filters.hidden(a)};var Ub=/%20/g,Vb=/\[\]$/,Wb=/\r?\n/g,Xb=/^(?:submit|button|image|reset|file)$/i,Yb=/^(?:input|select|textarea|keygen)/i;ea.param=function(a,b){var c,d=[],e=function(a,b){b=ea.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=ea.ajaxSettings&&ea.ajaxSettings.traditional),ea.isArray(a)||a.jquery&&!ea.isPlainObject(a))ea.each(a,function(){e(this.name,this.value)});else for(c in a)S(c,a[c],b,e);return d.join("&").replace(Ub,"+")},ea.fn.extend({serialize:function(){return ea.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ea.prop(this,"elements");return a?ea.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ea(this).is(":disabled")&&Yb.test(this.nodeName)&&!Xb.test(a)&&(this.checked||!Ea.test(a))}).map(function(a,b){var c=ea(this).val();return null==c?null:ea.isArray(c)?ea.map(c,function(a){return{name:b.name,value:a.replace(Wb,"\r\n")}}):{name:b.name,value:c.replace(Wb,"\r\n")}}).get()}}),ea.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&T()||U()}:T;var Zb=0,$b={},_b=ea.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in $b)$b[a](void 0,!0)}),ca.cors=!!_b&&"withCredentials"in _b,_b=ca.ajax=!!_b,_b&&ea.ajaxTransport(function(a){if(!a.crossDomain||ca.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Zb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete $b[g],b=void 0,f.onreadystatechange=ea.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=$b[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}}),ea.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ea.globalEval(a),a}}}),ea.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),ea.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=oa.head||ea("head")[0]||oa.documentElement;return{send:function(d,e){b=oa.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ac=[],bc=/(=)\?(?=&|$)|\?\?/;ea.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ac.pop()||ea.expando+"_"+Eb++;return this[a]=!0,a}}),ea.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(bc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&bc.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=ea.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(bc,"$1"+e):b.jsonp!==!1&&(b.url+=(Fb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||ea.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,ac.push(e)),g&&ea.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),ea.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||oa;var d=la.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ea.buildFragment([a],b,e),e&&e.length&&ea(e).remove(),ea.merge([],d.childNodes))};var cc=ea.fn.load;ea.fn.load=function(a,b,c){if("string"!=typeof a&&cc)return cc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=ea.trim(a.slice(h,a.length)),a=a.slice(0,h)),ea.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&ea.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?ea("<div>").append(ea.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},ea.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ea.fn[b]=function(a){return this.on(b,a)}}),ea.expr.filters.animated=function(a){return ea.grep(ea.timers,function(b){return a===b.elem}).length};var dc=a.document.documentElement;ea.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=ea.css(a,"position"),l=ea(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=ea.css(a,"top"),i=ea.css(a,"left"),j=("absolute"===k||"fixed"===k)&&ea.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),ea.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},ea.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){ea.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,ea.contains(b,e)?(typeof e.getBoundingClientRect!==xa&&(d=e.getBoundingClientRect()),c=V(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ea.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ea.nodeName(a[0],"html")||(c=a.offset()),c.top+=ea.css(a[0],"borderTopWidth",!0),c.left+=ea.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ea.css(d,"marginTop",!0),left:b.left-c.left-ea.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||dc;a&&!ea.nodeName(a,"html")&&"static"===ea.css(a,"position");)a=a.offsetParent;return a||dc})}}),ea.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);ea.fn[a]=function(d){return Da(this,function(a,d,e){var f=V(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?ea(f).scrollLeft():e,c?e:ea(f).scrollTop()):a[d]=e);
},a,d,arguments.length,null)}}),ea.each(["top","left"],function(a,b){ea.cssHooks[b]=A(ca.pixelPosition,function(a,c){if(c)return c=bb(a,b),db.test(c)?ea(a).position()[b]+"px":c})}),ea.each({Height:"height",Width:"width"},function(b,c){ea.each({padding:"inner"+b,content:c,"":"outer"+b},function(d,e){ea.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return Da(this,function(c,d,e){var f;if(ea.isWindow(c)){var g=a.document.compatMode;return"BackCompat"==g?c.document.body["client"+b]:c.document.documentElement["client"+b]}return 9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+b],f["scroll"+b],c.body["offset"+b],f["offset"+b],f["client"+b])):void 0===e?ea.css(c,d,h):ea.style(c,d,e,h)},c,g?e:void 0,g,null)}})}),ea.fn.size=function(){return this.length},ea.fn.andSelf=ea.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ea});var ec=a.jQuery,fc=a.$;return ea.noConflict=function(b){return a.$===ea&&(a.$=fc),b&&a.jQuery===ea&&(a.jQuery=ec),ea},typeof b===xa&&(a.jQuery=a.$=ea),a.comtop=a.comtop||{},a.comtop.cQuery=ea.noConflict(!0),ea}),function(a,b,c){b.__hasCUILoad||(void 0===a.migrateMute&&(a.migrateMute=!0),function(a,b,c){function d(c){var d=b.console;f[c]||(f[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn("JQMIGRATE: "+c),a.migrateTrace&&d.trace&&d.trace()))}function e(b,e,f,g){if(Object.defineProperty)try{return Object.defineProperty(b,e,{configurable:!0,enumerable:!0,get:function(){return d(g),f},set:function(a){d(g),f=a}}),c}catch(h){}a._definePropertyBroken=!0,b[e]=f}var f={};a.migrateWarnings=[],!a.migrateMute&&b.console&&b.console.log&&b.console.log("JQMIGRATE: Logging is active"),a.migrateTrace===c&&(a.migrateTrace=!0),a.migrateReset=function(){f={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&d("jQuery is not compatible with Quirks Mode");var g=a("<input/>",{size:1}).attr("size")&&a.attrFn,h=a.attr,i=a.attrHooks.value&&a.attrHooks.value.get||function(){return null},j=a.attrHooks.value&&a.attrHooks.value.set||function(){return c},k=/^(?:input|button)$/i,l=/^[238]$/,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:checked|selected)$/i;e(a,"attrFn",g||{},"jQuery.attrFn is deprecated"),a.attr=function(b,e,f,i){var j=e.toLowerCase(),o=b&&b.nodeType;return i&&(4>h.length&&d("jQuery.fn.attr( props, pass ) is deprecated"),b&&!l.test(o)&&(g?e in g:a.isFunction(a.fn[e])))?a(b)[e](f):("type"===e&&f!==c&&k.test(b.nodeName)&&b.parentNode&&d("Can't change the 'type' of an input or button in IE 6/7/8"),!a.attrHooks[j]&&m.test(j)&&(a.attrHooks[j]={get:function(b,d){var e,f=a.prop(b,d);return f===!0||"boolean"!=typeof f&&(e=b.getAttributeNode(d))&&e.nodeValue!==!1?d.toLowerCase():c},set:function(b,c,d){var e;return c===!1?a.removeAttr(b,d):(e=a.propFix[d]||d,e in b&&(b[e]=!0),b.setAttribute(d,d.toLowerCase())),d}},n.test(j)&&d("jQuery.fn.attr('"+j+"') may use property instead of attribute")),h.call(a,b,e,f))},a.attrHooks.value={get:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?i.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value') no longer gets properties"),b in a?a.value:null)},set:function(a,b){var e=(a.nodeName||"").toLowerCase();return"button"===e?j.apply(this,arguments):("input"!==e&&"option"!==e&&d("jQuery.fn.attr('value', val) no longer sets properties"),a.value=b,c)}};var o,p,q=a.fn.init,r=a.parseJSON,s=/^([^<]*)(<[\w\W]+>)([^>]*)$/;a.fn.init=function(b,c,e){var f;return b&&"string"==typeof b&&!a.isPlainObject(c)&&(f=s.exec(a.trim(b)))&&f[0]&&("<"!==b.charAt(0)&&d("$(html) HTML strings must start with '<' character"),f[3]&&d("$(html) HTML text after last tag is ignored"),"#"===f[0].charAt(0)&&(d("HTML string cannot start with a '#' character"),a.error("JQMIGRATE: Invalid selector string (XSS)")),c&&c.context&&(c=c.context),a.parseHTML)?q.call(this,a.parseHTML(f[2],c,!0),c,e):q.apply(this,arguments)},a.fn.init.prototype=a.fn,a.parseJSON=function(a){return a||null===a?r.apply(this,arguments):(d("jQuery.parseJSON requires a valid JSON string"),null)},a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a.browser||(o=a.uaMatch(navigator.userAgent),p={},o.browser&&(p[o.browser]=!0,p.version=o.version),p.chrome?p.webkit=!0:p.webkit&&(p.safari=!0),a.browser=p),e(a,"browser",a.browser,"jQuery.browser is deprecated"),a.sub=function(){function b(a,c){return new b.fn.init(a,c)}a.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(d,e){return e&&e instanceof a&&!(e instanceof b)&&(e=b(e)),a.fn.init.call(this,d,e,c)},b.fn.init.prototype=b.fn;var c=b(document);return d("jQuery.sub() is deprecated"),b},a.ajaxSetup({converters:{"text json":a.parseJSON}});var t=a.fn.data;a.fn.data=function(b){var e,f,g=this[0];return!g||"events"!==b||1!==arguments.length||(e=a.data(g,b),f=a._data(g,b),e!==c&&e!==f||f===c)?t.apply(this,arguments):(d("Use of jQuery.fn.data('events') is deprecated"),f)};var u=/\/(java|ecma)script/i,v=a.fn.andSelf||a.fn.addBack;a.fn.andSelf=function(){return d("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),v.apply(this,arguments)},a.clean||(a.clean=function(b,e,f,g){e=e||document,e=!e.nodeType&&e[0]||e,e=e.ownerDocument||e,d("jQuery.clean() is deprecated");var h,i,j,k,l=[];if(a.merge(l,a.buildFragment(b,e).childNodes),f)for(j=function(a){return!a.type||u.test(a.type)?g?g.push(a.parentNode?a.parentNode.removeChild(a):a):f.appendChild(a):c},h=0;null!=(i=l[h]);h++)a.nodeName(i,"script")&&j(i)||(f.appendChild(i),i.getElementsByTagName!==c&&(k=a.grep(a.merge([],i.getElementsByTagName("script")),j),l.splice.apply(l,[h+1,0].concat(k)),h+=k.length));return l});var w=a.event.add,x=a.event.remove,y=a.event.trigger,z=a.fn.toggle,A=a.fn.live,B=a.fn.die,C="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",D=RegExp("\\b(?:"+C+")\\b"),E=/(?:^|\s)hover(\.\S+|)\b/,F=function(b){return"string"!=typeof b||a.event.special.hover?b:(E.test(b)&&d("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),b&&b.replace(E,"mouseenter$1 mouseleave$1"))};a.event.props&&"attrChange"!==a.event.props[0]&&a.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),a.event.dispatch&&e(a.event,"handle",a.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),a.event.add=function(a,b,c,e,f){a!==document&&D.test(b)&&d("AJAX events should be attached to document: "+b),w.call(this,a,F(b||""),c,e,f)},a.event.remove=function(a,b,c,d,e){x.call(this,a,F(b)||"",c,d,e)},a.fn.error=function(){var a=Array.prototype.slice.call(arguments,0);return d("jQuery.fn.error() is deprecated"),a.splice(0,0,"error"),arguments.length?this.bind.apply(this,a):(this.triggerHandler.apply(this,a),this)},a.fn.toggle=function(b,c){if(!a.isFunction(b)||!a.isFunction(c))return z.apply(this,arguments);d("jQuery.fn.toggle(handler, handler...) is deprecated");var e=arguments,f=b.guid||a.guid++,g=0,h=function(c){var d=(a._data(this,"lastToggle"+b.guid)||0)%g;return a._data(this,"lastToggle"+b.guid,d+1),c.preventDefault(),e[d].apply(this,arguments)||!1};for(h.guid=f;e.length>g;)e[g++].guid=f;return this.click(h)},a.fn.live=function(b,c,e){return d("jQuery.fn.live() is deprecated"),A?A.apply(this,arguments):(a(this.context).on(b,this.selector,c,e),this)},a.fn.die=function(b,c){return d("jQuery.fn.die() is deprecated"),B?B.apply(this,arguments):(a(this.context).off(b,this.selector||"**",c),this)},a.event.trigger=function(a,b,c,e){return c||D.test(a)||d("Global events are undocumented and deprecated"),y.call(this,a,b,c||document,e)},a.each(C.split("|"),function(b,c){a.event.special[c]={setup:function(){var b=this;return b!==document&&(a.event.add(document,c+"."+a.guid,function(){a.event.trigger(c,null,b,!0)}),a._data(this,c,a.guid++)),!1},teardown:function(){return this!==document&&a.event.remove(document,c+"."+a._data(this,c)),!1}}})}(a,b))}(window.comtop?window.comtop.cQuery:window.jQuery,window),function(a){function b(a,c){b.clearWhiteSpace&&(a=a.replace(/[\f\n\r\t\v]+/g,"")),this.Fn=new b.Instance(a,c);for(var d in this)this.Fn.Reserve+=d+","}a.JCT=b,b.prototype={Extend:function(a,b){for(var c in a)this[c]&&this[c].Fn&&this[c].Fn.JavaScriptCommonTemplates&&this[c].Extend?this[c].Extend(a[c]):this.Fn.Reserve.indexOf(","+c+",")==-1&&(this[c]=a[c]);return"function"==typeof a.ERun&&a.ERun.apply(this,b||[]),this},ExtendTo:function(a,b){for(var c in this)this.Fn.Reserve.indexOf(","+c+",")>0&&a[c]||(null==a[c]?a[c]=this[c]:this[c].Fn&&this[c].Fn.JavaScriptCommonTemplates&&this[c].ExtendTo&&this[c].ExtendTo(a[c]));return"function"==typeof a.ERun&&a.ERun.apply(a,b||[]),this},ExecChilds:function(a,b){if("string"==typeof a&&(b=a,a=0),b=b||"Exec",!a){a={};for(var c in this)this[c].Fn&&this[c].Fn.JavaScriptCommonTemplates&&(a[c]=[])}for(var c in a)this[c]&&"function"==typeof this[c][b]&&this[c][b].apply(this[c],a[c]);return this},BuildChilds:function(a){var b={},c=!1;if(void 0==a?a=[]:"string"==typeof a?a=a.split(","):(b=a,c=!0),a instanceof Array)for(var d=0;d<a.length;d++)b[a[d]]=!0;for(var d in this)this[d].Fn&&this[d].Fn.JavaScriptCommonTemplates&&(0==a.length||b[d])&&this[d].Build(c?a[d]:[]);return this},GetView:function(){return this.Fn.V=[],this.GetViewContinue.apply(this,arguments),this.Fn.V.join("")},GetViewContinue:function(){this.Build.apply(this,[arguments])},Build:function(a){return this.Fn.Build(this,a,arguments.callee.caller===this.GetViewContinue),this},PushView:function(a){this.Fn.V.push(a)}},b.Instance=function(a,b){this.Init(a,b)},b.clearWhiteSpace=!0,b.Instance.prototype={JavaScriptCommonTemplates:3,Reserve:",",args:[],Tags:{comment:{block:{begin:"<!---",end:"-->"},exp:{begin:"+-",end:"-+"},member:{begin:"/*+",end:"*/"},memberend:{begin:"/*-",end:"*/"},clean:{begin:"<!--clean",end:"/clean-->"}},script:{block:{begin:'<script type="text/jct">',end:"</script>"},exp:{begin:"+-",end:"-+"},member:{begin:"/*+",end:"*/"},memberend:{begin:"/*-",end:"*/"},clean:{begin:"<!--clean",end:"/clean-->"}},code:{block:{begin:'<code class="jct">',end:"</code>"},exp:{begin:"+-",end:"-+"},member:{begin:"/*+",end:"*/"},memberend:{begin:"/*-",end:"*/"},clean:{begin:"<!--clean",end:"/clean-->"}}},Init:function(a,b){this.Src=a||"",this.Path=b||"";for(var c in this.Tags)if(this.Src.indexOf(this.Tags[c].block.begin)>=0)break;this.Tag=this.Tags[c],this.A=[],this.V=[],this.EXEC=[];for(var d=[],e=[0,0,0,0,0],f=this.Src.length;this.Slice(this.Tag.clean,e[4],e,f);)d.push(this.Src.slice(e[0],e[1]));d.length&&(d.push(this.Src.slice(e[4])),this.Src=d.join(""))},Build:function(a,b,c){this.EXEC=[],this.Parse(a);try{var d=this.EXEC.join("\n");a.GetViewContinue=new Function(this.args,d),this.Src=""}catch(e){this.V=["jCT Parse Error"],a.ERROR={message:e.message+"\n"+(e.lineNumber||e.number),code:d}}a.BRun&&a.BRun.apply(a,b||[]),c&&(this.V=[],a.GetViewContinue.apply(a,b||[]))},Parse:function(a){for(var c=this.Tag,d=this.A,e=this.EXEC,f=this.Src.length,g=[0,0,0,0,0],h=[0,0,0,0,0];this.Slice(c.block,g[4],g,f);){for(h=[0,0,0,0,g[0]];this.Slice(c.exp,h[4],h,g[1]);)e.push("this.Fn.V.push(this.Fn.A["+d.length+"]);"),d.push(this.Src.slice(h[0],h[1])),e.push("this.Fn.V.push("+this.Src.slice(h[2],h[3])+");");if(h[4]!=g[1]&&(e.push("this.Fn.V.push(this.Fn.A["+d.length+"]);"),d.push(this.Src.slice(h[4],g[1]))),"//"==this.Src.slice(g[2],g[2]+2)){var i=this.Src.slice(g[2]+2,g[2]+3);if("/"==i){i=this.Src.slice(g[2]+3,g[3]);var j=i.indexOf(" "),k=[];j>0&&(k=i.slice(j+1).split(","),i=i.slice(0,j));var l=c.block.begin+"///"+i+c.block.end,m=this.Src.indexOf(l,g[4]);if(m>0){var n=new b(this.Src.slice(g[4],m),this.Path);n.Fn.args=k,a[i]||(a[i]={});for(var o in n)a[i][o]=n[o];g[4]=m+l.length}}else if("."==i){i=this.Src.slice(g[2]+3,g[3]);var j=i.indexOf(" ")+1;if("function"==i.slice(j,j+8)){var p=i.slice(0,j-1);a[p]=new Function("return "+i.slice(j,i.length))()}else{var p=new Function("return "+i.slice(j));a[i.slice(0,j)]=p.call(a)}}else" "==i&&(this.args=this.Src.slice(g[2]+2,g[3]).slice(1).split(","))}else e.push(this.Src.slice(g[2],g[3]))}for(h=[0,0,0,0,g[4]],g[1]=f;this.Slice(c.exp,h[4],h,g[1]);)e.push("this.Fn.V.push(this.Fn.A["+d.length+"]);"),d.push(this.Src.slice(h[0],h[1])),e.push("this.Fn.V.push("+this.Src.slice(h[2],h[3])+");");h[4]!=g[1]&&(e.push("this.Fn.V.push(this.Fn.A["+d.length+"]);"),d.push(this.Src.slice(h[4],g[1])))},Slice:function(a,b,c,d){var e,f,g,h=a.begin,i=a.end;return e=this.Src.indexOf(h,b),!(e<0||e>=d)&&(f=e+h.length,!(f<0||f>=d)&&(g=this.Src.indexOf(i,f),!(g<0||g>=d)&&(c[0]=b,c[1]=e,c[2]=f,c[3]=g,c[4]=g+i.length,!0)))}}}(window.comtop),window.comtop=window.comtop||{},function(a){function b(a){var b,c,d=a.split("."),e=window;for(b=0;b<d.length;b+=1)c=d[b],e[c]=e[c]||{},e=e[c];return e}function c(){return"xxxx-4xxx-yxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)}).toUpperCase()}window.console=window.console||{log:function(){},info:function(){},warn:function(){},error:function(){}},a.namespace=b,a.guid=c}(window.comtop=window.comtop||{}),comtop.namespace("comtop.UI"),comtop.namespace("comtop.Dom"),comtop.namespace("comtop.String"),comtop.namespace("comtop.Date"),comtop.namespace("comtop.Number"),comtop.namespace("comtop.Browser"),comtop.namespace("comtop.Tools"),function(a,b){var c,d=a('script[src*="cui/js/comtop.ui"]');c=d.eq(0).attr("src"),c=c.substr(0,c.lastIndexOf("/")),c=c.substr(0,c.lastIndexOf("/")+1),b.cuiFilePath=c}(window.comtop.cQuery,window.comtop),function(a,b){var c=a("head");c.attr("style","font-family:isIE\\0; border:none; *font-family:isIE7; _font-family:isIE6;-moz-border-radius-topleft:0"),b.Browser={isIE:!1,isIE6:!1,isIE7:!1,isIE8:!1,isIE9:!1,notIE:!0,isQM:"CSS1Compat"!==document.compatMode};var d=c.css("font-family");/^isIE\d?$/.test(d)&&(b.Browser[d]=!0,b.Browser.notIE=!1,"isIE6"===d||"isIE7"===d?b.Browser.isIE=!0:void 0===c.css("border")?b.Browser.isIE8=!0:b.Browser.isIE9=!0),c.removeAttr("style")}(window.comtop.cQuery,window.comtop),comtop.Browser.isIE6&&document.execCommand("BackgroundImageCache",!1,!0),function(a,b){if(comtop.Browser.isIE8){var c=a("head");if(a("#cuiFontCss").length<1&&c.length>0){var d=["@font-face {",'     font-family: "FontAwesome";','     src: url("',b.cuiFilePath,'themes/default/images/core/fonts/fontawesome-webfont.eot?#iefix&v=4.0.3") format("embedded-opentype")'," } "," .cui-icon {","     font-family: FontAwesome !important;","     speak: none;","     font-style: normal;","     font-weight: normal;","     font-variant: normal;","     font-size: 14px;"," }"];c.append('<style type="text/css" id="cuiFontCss">'+d.join("")+"</style>")}}}(window.comtop.cQuery,window.comtop),function(a){var b=a.cQuery;b.page={height:function(){if(a.Browser.isIE6||a.Browser.isIE7||a.Browser.isIE8){var c=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),d=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return c<d?b(window).height():a.Browser.isQM?c-4:c}return a.Browser.isQM?b(document).height()-4:b(document).height()},width:function(){var a=b("<div></div>");a.css({height:1});var c=parseInt(b("body").css("paddingLeft"))+parseInt(b("body").css("paddingRight"))+parseInt(b("body").css("marginLeft"))+parseInt(b("body").css("marginRight"));b("body").append(a);var d=a.width();return a.remove(),d+c},scrollTop:function(){return b("html").scrollTop()||b("body").scrollTop()},scrollLeft:function(){return b("html").scrollLeft()||b("body").scrollLeft()}},b.client={width:function(){return a.Browser.isQM?document.documentElement.clientWidth||document.documentElement.offsetWidth-21:b(window).width()},height:function(){return a.Browser.isQM?window.innerHeight||document.documentElement.offsetHeight-4:b(window).height()}}}(window.comtop),function(a,b){function c(c,d){if(c.options=a.extend(!0,{},d.options,c.options),d.options&&d.options.uitype){var e=d.options.uitype;c._superUITypes=a.extend(!0,[],d._superUITypes),c._superUITypes.push(e)}var f=c.options?c.options.uitype:null;if(f){var g=f.charAt(0).toLowerCase()+f.substring(1);null==a.fn[g]&&(a.fn[g]=function(c){var d=a(this).eq(0);if(d.selector=d.selector.replace(".slice(0,1)",""),!d.selector){var e="e-"+b.guid(),g=this.nodeName||"";d.attr("eventID",e),d.selector=g+"[eventID="+e+"]:eq(0)"}var h=d.data("uitype");return null==h&&(c=c||{},c.el=d,h=new b.UI[f](c),h.isCUI=!0,b.UI.componentList.push(h),d.size()&&d.data("uitype",h)),h}),c[g]=function(){return this}}}if(!window.__hasCUILoad){window.cui=function(b){var c=a(b),d=c.data("uitype")||c;if(d.options){var e=d.options.uitype;e=e.charAt(0).toLowerCase()+e.substring(1),d[e]||(d[e]=function(){return this})}return d};var d=!1,e=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;b.Class=function(){},b.Class.extend=function(a){function b(){!d&&this.__init&&this.__init.apply(this,arguments)}var f=this.prototype;c(a,f),d=!0;var g=new this;d=!1;for(var h in a)g[h]="function"==typeof a[h]&&"function"==typeof f[h]&&e.test(a[h])?function(a,b){return function(){var c=this._super;this._super=f[a];var d=b.apply(this,arguments);return this._super=c,d}}(h,a[h]):a[h];return b.prototype=g,b.prototype.constructor=b,b.extend=arguments.callee,b},b._registerCmp=c}}(window.comtop.cQuery,window.comtop),function(a,b){function c(a){for(var c=b.UI.templatePath,d=new RegExp(a),e=0;e<c.scriptTP.length;e++)if(d.test(c.scriptTP[e].attrTmpl))return{path:c.scriptTP[e].path,mark:"extend"};return{path:c.scriptOP[0].path,mark:"cui"}}function d(b,c){var d;"undefined"!=typeof b.outerHTML?d=b.outerHTML:(a("body").append('<div style="display: none;" id="f8_outerHTML_bug"></div>'),a("#f8_outerHTML_bug").append(a(b).clone()),d=a("#f8_outerHTML_bug")[0].innerHTML,a("#f8_outerHTML_bug").remove());var e=d.match(/<[^>]*>/)[0].replace(/[\r\n\t]/g,""),f=new RegExp("\\s"+c+"=[\"']*([\\w-\\%]*)[\"']*"),g=e.match(f);return g?g[1]:null}if(!window.__hasCUILoad){var e=e||{};b.UI.templatePath=null,b.UI.componentList=[],b.UI.setOpt=function(b){var c,d,e=this;if("object"==typeof b)for(c in b)switch(c){case"Dialog":cui.dialog.setOpt(b[c]);break;case"MsgBox":cui.msgbox.setOpt(b[c]);break;case"Message":cui.msgbox.setOpt(b[c],"message");break;default:b.hasOwnProperty(c)&&"function"==typeof e[c]&&(d=e[c].prototype.options,"object"==typeof d&&a.extend(d,b[c]))}},b.UI.Base=b.Class.extend({options:{},tpls:{},autoTpls:{},isInit:!1,cui_prompt:"\u4e0d\u5efa\u8bae\u4f7f\u7528\u6216\u4fee\u6539\uff08\u4e8c\u6b21\u5f00\u53d1\u9664\u5916\uff09\u6ca1\u6709\u5bf9\u5916\u516c\u5e03\u7684\u5185\u90e8\u65b9\u6cd5\u4e0e\u53d8\u91cf\uff0c\u4ee5\u907f\u514d\u56e0\u7ec4\u4ef6\u5347\u7ea7\u800c\u5f15\u8d77\u529f\u80fd\u5f02\u5e38",__init:function(b){var c=this,e={target:{eventName:"change",source:"getValue",target:"setValue"}},f=b.isScanner,g={},h="",i="";c.options.tpls=c.options.tpls||{};for(var j in c.options)if(f){switch(j){case"readonly":h=d(b.el[0],j);break;default:h=b.el.attr(j)}"string"==typeof h&&(g[j]=h,"null"!=h?(i=null==c.options[j]?"function":typeof c.options[j],b[j]=c._convertTo(h,i,c.options[j])):b[j]=null)}else h=b[j],g[j]=h;if(void 0==c.options.textmode&&delete b.textmode,e=c.options=a.extend(!0,{},e,c.options,b),"Tip"!==b.uitype){var k=e.el.attr("id");"undefined"!=typeof uiConfig&&k&&uiConfig[k]&&(g=b=e=c.options=a.extend(!0,{},c.options,uiConfig[k]))}if(c._init(g,b),e.textmode)return void c.setTextMode();if(!e.onlyDesign||e.designMode){c.__loadTemplate(e.template);for(var l in e.tpls)c.tpls["super."+l]=c.tpls[l],"string"==typeof e.tpls[l]?c.tpls[l]=c.tpls[e.tpls[l]]||e.tpls[l]:c.tpls[l]=e.tpls[l];for(l in c.tpls)if(1==c.autoTpls[l]){var m=a(e.el),n=m.get(0).tagName;/[DIV|SPAN|A]/.test(n)&&""===a.trim(m.html())?c._buildTemplate(m,l,e):c._bindTplEvent()}if(c._create(),m){var o=m.data("cuiCreated");o&&(a.each(o,function(){c[this.method]&&c[this.method].apply(c,this.arg)}),m.removeData("cuiCreated"))}}},__load:function(c,d,e){"undefined"==typeof e&&(e=!1),"function"!=typeof d&&(d=function(){}),a.ajax({url:c+(b.version?"?v="+b.version:""),async:e,dataType:"text",success:d,error:function(){}})},__loadTemplate:function(d){d=d||"template.html";var f,g=this,h=g.options.uitype,i="",j=e[h],k=a("body"),l=k.attr("cuitmplmark")||"",m=new RegExp(d);if(h=h.charAt(0).toUpperCase()+h.substring(1),j||(m.test(l)||(b.UI.templatePath||b.UI.scanTemplateUrl(d),f=c(d),i=f.path+"template/"+d,k.attr("cuitmplmark",l+"["+f.mark+"#"+d+"]"),g.__load(i,function(a){a=a.match(/<cmptpl[^>]*>(\s|\r|\t|.)*?<\/cmptpl>/g);for(var b=0,c=a.length;b<c;b++){var d=a[b].match(/uiType="([\w-]*)"/)[1],f=a[b].match(/var="([\w-]*)"/)[1],g="false"!=a[b].match(/parse="([\w-]*)"/)[1],h=a[b].replace(/<cmptpl[^>]*>/,"").replace(/<\/cmptpl>/,""),i=e[d]||{tpls:{},autoTpls:{}};i.tpls[f]=h,g&&(i.autoTpls[f]=!0),e[d]=i}})),j=e[h]||{tpls:{},autoTpls:{}}),g.tpls=a.extend(!0,{},j.tpls),g.autoTpls=a.extend(!0,{},j.autoTpls),g._superUITypes)for(var n=g._superUITypes.length-1;n>=0;n--){h=g._superUITypes[n];var o=e[h];if(o){var p=e[h].tpls;for(var q in p)g.tpls[q]||(g.tpls[q]=p[q]);var r=e[h].autoTpls;for(q in r)g.autoTpls[q]||(g.autoTpls[q]=r[q])}}k=null},_buildTemplate:function(b,c,d,e){var f=this,g=a(b);if(d=d||f.options,"object"!=typeof f.tpls[c]){for(var h=a.trim(f._buildTemplateStr(c,d))||"",i=h.match(/\#ref\=[\w\.]*\#/g)||[],j="",k=0;k<i.length;k++)j=a.trim(i[k].replace(/#/g,"").replace("ref=","")),h=h.replace(i[k],f._buildTemplateStr(j,d)||"");return h=f._bindTplEvent(h),e?g.append(h):g.html(h),h}f.tpls[c].el=g,f.__createTargetCmp(f.tpls[c])},_buildTemplateStr:function(a,c){var d=this,e=new b.JCT(d.tpls[a]);return e.Build(),e.GetView(c)},__createTargetCmp:function(a){new b.UI[a.uitype](a)},_bindTplEvent:function(c){var d=this,e=d.options;if(e.designMode)return c;if("string"==typeof c){for(var f=e.el.selector,g=c.match(/events=\"[\w-\s\;\=\,\.]*\"/g)||[],h=[],i=null,j=null,k=null,l=0;l<g.length;l++){h=[],i=g[l].replace(/\"/g,"").replace(/events\=/,"").split(";");for(var m=0,n=i.length;m<n;m++)j=i[m].split("="),a.trim(j[0])&&h.push("on",j[0],'="',b.Browser.isIE?"return ":"","comtop.proxyHandler(event, '",f,"', this, '",j[1],"');\" ");var k=new RegExp(g[l],"g");h.push(g[l].replace("events","etsBak")),c=c.replace(k,h.join(""))}return c}return c=c||a(e.el),a("[etsBak]",c).each(function(){for(var b,c=a(this),e=c.attr("etsBak").split(";"),f=0;f<e.length;f++)b=e[f].split("="),c.bind(b[0]+".comtopBase",{self:d,func:b[1]},comtop.proxyHandler);c=null}),c},_unbindTplEvent:function(b){var c=this,d=c.options;b=b||d.el,a("[etsBak]",b).each(function(){for(var b=a(this),c=b.attr("etsBak").split(";"),d=0;d<c.length;d++)b.removeAttr("on"+c[d].split("=")[0]);b.unbind(".comtopBase")})},_triggerHandler:function(b,c){a(this).triggerHandler(b,c)},_init:function(a){},_create:function(){},bind:function(b,c,d){return a(this).bind(b,c,d),this},unbind:function(b,c){return a(this).unbind(b,c),this},setValue:function(){},getValue:function(){},show:function(){return this.options.el.show(),this},hide:function(){return this.options.el.hide(),this},setReadonly:function(){},setTextMode:function(){var a=this,b=a.options,c=b.el[0].nodeName,d=a.getLabelValue();"string"==typeof d&&(d=d.replace(/\r?\n/gi,"<br />")),"SPAN"==c||"DIV"==c?b.el.html(d):"INPUT"!=c&&"BUTTON"!=c&&"TEXTAREA"!=c||(b.el=b.el.replaceWith("<span>"+d+"</span>"))},getLabelValue:function(){return this.options.value},disable:function(b){return b="undefined"!=typeof b&&b,a("input, select, textarea, button",this.options.el).attr("disabled",b),this},destroy:function(){var a=this,b=a.options;a._unbindTplEvent(b.el),b.el.removeData(),a.tpls&&b.el.empty()},_convertTo:function(b,c,d){function e(a){for(var b=a.split("."),c=window,e=0;e<b.length;e++)c=c[b[e]];return"object"!=typeof c&&"function"!=typeof c||c.nodeName?d:c}if(""===a.trim(b))return"string"===c?"":d;var f=/^(?:\{.*\}|\[.*\])$/;switch(c){case"string":b=""+b;break;case"boolean":b=!("true"!==b);break;case"number":b=+b;break;case"object":b=f.test(b)?a.parseJSON(b.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'")):e(b);break;case"function":b=e(b);break;default:b=d}return b}}),b.proxyHandler=function(c,d,e,f){var g=null,h=null,i=null,j=null,k=0,l=0;if(d){for(c||(c=a.Event()),c=a.event.fix(c),k=0;k<b.UI.componentList.length;k++)if(j=b.UI.componentList[k],j.options.el.selector===d){g=j;break}if(null==g)return!1}else g=c.data.self,f=c.data.func,e=this,c.data=null;for(f=f.split(","),k=0;k<f.length;k++)if(a.isFunction(g[f[k]]))g[f[k]](c,e,c.target||c.srcElement);else{for(h=window,i=f[k].split("."),l=0;l<i.length;l++)h=h[i[l]];h(c,e,c.target||c.srcElement)}if("click"===c.type&&"a"===c.target.nodeName.toLocaleLowerCase()&&b.Browser.isIE)return!1},b.UI.scanTemplateUrl=function(c){var d,e,f,g=0,h=0,i=(new RegExp(c),[]),j=[];for(d=a("script[cuiTemplate]"),i.push({path:b.cuiFilePath,attrTmpl:""}),h=d.length;g<h;g++)e=d.eq(g).attr("src"),e&&(f=e.substr(0,e.lastIndexOf("/")),f=e.substr(0,f.lastIndexOf("/")+1),j.push({path:f,attrTmpl:d.eq(g).attr("cuiTemplate")}));b.UI.templatePath={scriptTP:j,scriptOP:i}},window.__hasCUILoad=!0}}(window.comtop.cQuery,window.comtop),function(a,b){b.Tools.getCUIURL=function(){},b.String.htmlEncode=function(a,b){if(!b)return a;var c,d=a||"",e=document.createElement("div");return void 0!=e.textContent?e.textContent=d:e.innerText=d,c=e.innerHTML,e=null,c},b.String.getBytesLength=function(a){var b=0;a=a.replace(/\r/g,"");for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);10==d?b+=2:d>=1&&d<=126||65376<=d&&d<=65439?b++:b+=2}return b},b.String.interceptString=function(a,b){for(var c="",d=0,e=0,f=a.length;e<f;e++){var g=a.charCodeAt(e);if(10==g?d+=2:d++,!(d<=b))break;c+=a.charAt(e)}return c},b.String.intercept=function(a,b){for(var c="",d=0,e=0,f=a.length;e<f;e++){var g=a.charCodeAt(e);if(10==g?d+=2:g>=0&&g<=126||65376<=g&&g<=65439?d++:d+=2,!(d<=b))break;c+=a.charAt(e)}return c},b.Date.format=function(a,c,d,e){var f={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"H+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds(),"w+":b.Date.getOnWeek(a,d,e).week};/(y+)/.test(c)&&(c=c.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var g in f)new RegExp("("+g+")").test(c)&&(c=c.replace(RegExp.$1,1==RegExp.$1.length?f[g]:("00"+f[g]).substr((""+f[g]).length)));return c},b.Date.simpleformat=function(b,c){function d(a){return a.charAt(1)?a:0+a}if(!b)return"";var e=a.type(b);if("string"===e||"number"===e){var f=new Date;if(f.setTime(b),isNaN(f.getDate()))return b;b=f}for(var g=["y+","yyyy","M","MM","d","dd","h","hh","m","mm","s","ss"],h=b.getFullYear().toString(),i=(b.getMonth()+1).toString(),j=b.getDate().toString(),k=b.getHours().toString(),l=b.getMinutes().toString(),m=b.getSeconds().toString(),n=[h.slice(2),h,i,d(i),j,d(j),k,d(k),l,d(l),m,d(m)],o=g.length;o--;)c=c.replace(new RegExp(g[o]),n[o]);return c},b.Date.getOnWeek=function(a,b,c){if(!a)return null;var d,e=b?4:1,f=new Date(a.getTime());return f.setDate(f.getDate()+e-(c?f.getDay():f.getDay()||7)),d=f.getTime(),f.setMonth(0),f.setDate(1),{year:f.getFullYear(),week:Math.floor(Math.round((d-f)/864e5)/7)+1}},b.Date.getWeekRange=function(a,c,d,e){e=!d&&e;var f,g,h,i=new Date(a,0,1),j=b.Date.getOnWeek(i,d,e).week;return h=1!=j?e?7-i.getDay():8-(i.getDay()||7):0,f=7*(c-1)+h,g=f+6,[new Date(864e5*f+i.getTime()),new Date(864e5*g+i.getTime())]},b.Date.parse=function(c,d,e,f){function g(a,b){return b=b.replace(/yyyy/,j[1]).replace(/yy/,j[2]).replace(/MM/,k[1]).replace(/M/,k[2]).replace(/dd/,l[1]).replace(/d/,l[2]).replace(/hh/,m[1]).replace(/h/,m[2]).replace(/mm/,n[1]).replace(/m/,n[2]).replace(/ss/,o[1]).replace(/s/,o[2]).replace(/qq/,p[1]).replace(/q/,p[2]).replace(/ww/,q[1]).replace(/w/,q[2]),i=new RegExp("^"+b+"$"),i.test(a)}function h(a){var b,c,d=[],e=0;for(j[0]=a.indexOf("yyyy"),j[0]<0&&(j[0]=a.indexOf("yy")),j[0]>=0&&(d[e]=j[0],e++),k[0]=a.indexOf("MM"),k[0]<0&&(k[0]=a.indexOf("M")),k[0]>=0&&(d[e]=k[0],e++),l[0]=a.indexOf("dd"),l[0]<0&&(l[0]=a.indexOf("d")),l[0]>=0&&(d[e]=l[0],e++),m[0]=a.indexOf("hh"),m[0]<0&&(m[0]=a.indexOf("h")),m[0]>=0&&(d[e]=m[0],e++),n[0]=a.indexOf("mm"),n[0]<0&&(n[0]=a.indexOf("m")),n[0]>=0&&(d[e]=n[0],e++),o[0]=a.indexOf("ss"),o[0]<0&&(o[0]=a.indexOf("s")),o[0]>=0&&(d[e]=o[0],e++),p[0]=a.indexOf("qq"),p[0]<0&&(p[0]=a.indexOf("q")),p[0]>=0&&(d[e]=p[0],e++),q[0]=a.indexOf("ww"),q[0]<0&&(q[0]=a.indexOf("w")),q[0]>=0&&(d[e]=q[0],e++),c=[j[0],k[0],l[0],m[0],n[0],o[0],p[0],q[0]],e=0;e<d.length-1;e++)for(b=0;b<d.length-1-e;b++)if(d[b]>d[b+1]){var f=d[b];d[b]=d[b+1],d[b+1]=f}for(e=0;e<d.length;e++)for(b=0;b<c.length;b++)d[e]==c[b]&&(c[b]=e);return c}if(c=a.trim(c),""===c)return null;var i,j,k,l,m,n,o,p,q;if(j=[-1,"([0-9]{4})","([0-9]{2})"],k=[-1,"(0[1-9]|1[0-2])","([1-9]|1[0-2])"],l=[-1,"(0[1-9]|[1-2][0-9]|30|31)","([1-9]|[1-2][0-9]|30|31)"],m=[-1,"([0-1][0-9]|20|21|22|23)","([0-9]|1[0-9]|20|21|22|23)"],n=[-1,"([0-5][0-9])","([0-9]|[1-5][0-9])"],o=[-1,"([0-5][0-9])","([0-9]|[1-5][0-9])"],p=[-1,"([0-0][1-4])","([1-4])"],q=[-1,"([0-5][0-9])","([0-9]|[1-4][0-9]|5[0-3])"],g(c,d)){var r=new Date,s=i.exec(c),t=h(d),u=[r.getFullYear(),1,1,0,0,0,1,1];s.shift();for(var v=0;v<8;v++)u[v]=t[v]>=0?+s[t[v]]:u[v];if(t[6]>=0&&t[1]<0)u[1]=3*(u[6]-1),u[2]=1,u[3]=0,u[4]=0,u[5]=0;else if(t[7]>=0&&t[1]){var w=b.Date.getWeekRange(u[0],u[7],e,f);u[1]=w[0].getMonth(),u[2]=w[0].getDate()}else u[1]=u[1]-1;return new Date(u[0],u[1],u[2],u[3],u[4],u[5],0)}return null},b.Number.money=function(c,d,e){if(e=a.extend({separator:",",prefix:""},e),("string"!=typeof c&&"number"!=typeof c||"string"==typeof c&&""===c||"number"==typeof c&&isNaN(c))&&(c=0),c.toString().indexOf(e.separator)>-1)return c;var f=[],g=!1,h=null,i=null,j=function(a,b){return a||(a=""),b?(a+"").length>=b?a:(a+Array.prototype.join.call({length:b+1},"0")).slice(0,b):a};return/-/.test(c+"")&&(g=!0,c=(c+"").replace("-","")),""===c.toString().split(".")[1]&&(c+="0"),null!==d&&(d=isNaN(Number(d))?2:Number(d),c=b.Number.round(c,d)),f=c.toString().split("."),h=(f[0]||0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+e.separator),i=j(f[1],d),i=i?"."+i:"",e.prefix+(g?"-":"")+h+i},b.Number.round=function(a,b){var c,d,e,f,g,h,i,j,k;if(c=/^(\+|\-)?(\d+|\d*(\.)\d+)$/.exec(a+"")){if(b=!b||b<0?0:b,d=c[1]?c[1].replace("+",""):"",h=c[2].replace(/^0+/g,""),h=h.replace(/(\.\d*?)0+$/g,"$1"),h="."===h.charAt(0)?"0"+h:h,e=h.search(/\./),f=h.substring(e),e===-1||!f||f.length<=b)k=d+h;else if(g=h.split(""),g.length=e+b+1,f.charAt(b+1)-0<5)k=d+g.join("");else{for(i=g.length;i--;)if("."!==g[i]){if(g[i]=g[i]-0+1,10!==g[i])break;g[i]=j?0:""}else j=!0;k=d+(i<0?"1"+g.join(""):g.join(""))}return k=k.replace(/\.0*$/,"").replace(/^\-0$/,""),k?k:"0"}},b.Tools.fixedNumber=function(b){var c=typeof b,d=null;return"number"===c?d=Math.floor(b):"string"===c&&(b=a.trim(b),"auto"===b?d="auto":/\d+(\.\d*)?%/.test(b)?(d=b.replace(/\.\d*/,""),"%"!==d&&"0%"!==d||(d=0)):/\d/.test(b.charAt(0))&&(d=parseInt(b.replace(/x/,"")))),d},cui.ajax=function(a){var b=a.type||"GET",c=a.dataType||"json",d=a.success||g.noop,e=a.error,f=a.scope||window,g=window.comtop.cQuery;g.ajax({url:a.url,type:b,data:a.data,dataType:c,success:function(a){"json"==c&&a.success===!1?e&&e.call?e.call(f,a):cui.error(a.exMessage):d.call(f,a)},error:function(a,b){e&&e.call?e.call(f):"parsererror"==b?cui.error("\u670d\u52a1\u5668\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"):"timeout"==b?cui.error("\u7f51\u7edc\u8fde\u63a5\u8d85\u65f6\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"):404==a.status?cui.error("\u8fde\u63a5\u670d\u52a1\u5668\u5931\u8d25\uff0c\u53ef\u80fd\u7f51\u7edc\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"):0==a.status||cui.error("\u670d\u52a1\u5f02\u5e38")}})},b.Browser.isIE8&&a("head").append('<style type="text/css">*{font-family: "Microsoft YaHei"!important}</style>');
}(window.comtop.cQuery,window.comtop),window.comtop.icon={glass:"&#xf000;",music:"&#xf001;",search:"&#xf002;","envelope-o":"&#xf003;",heart:"&#xf004;",star:"&#xf005;","star-o":"&#xf006;",user:"&#xf007;",film:"&#xf008;","th-large":"&#xf009;",th:"&#xf00a;","th-list":"&#xf00b;",check:"&#xf00c;",remove:"&#xf00d;","search-plus":"&#xf00e;","search-minus":"&#xf010;","power-off":"&#xf011;",signal:"&#xf012;",cog:"&#xf013;","trash-o":"&#xf014;",home:"&#xf015;","file-o":"&#xf016;","clock-o":"&#xf017;",road:"&#xf018;",download:"&#xf019;","arrow-circle-o-down":"&#xf01a;","arrow-circle-o-up":"&#xf01b;",inbox:"&#xf01c;","play-circle-o":"&#xf01d;",repeat:"&#xf01e;",refresh:"&#xf021;","list-alt":"&#xf022;",lock:"&#xf023;",flag:"&#xf024;",headphones:"&#xf025;","volume-off":"&#xf026;","volume-down":"&#xf027;","volume-up":"&#xf028;",qrcode:"&#xf029;",barcode:"&#xf02a;",tag:"&#xf02b;",tags:"&#xf02c;",book:"&#xf02d;",bookmark:"&#xf02e;",print:"&#xf02f;",camera:"&#xf030;",font:"&#xf031;",bold:"&#xf032;",italic:"&#xf033;","text-height":"&#xf034;","text-width":"&#xf035;","align-left":"&#xf036;","align-center":"&#xf037;","align-right":"&#xf038;","align-justify":"&#xf039;",list:"&#xf03a;",outdent:"&#xf03b;",indent:"&#xf03c;","video-camera":"&#xf03d;","picture-o":"&#xf03e;",pencil:"&#xf040;","map-marker":"&#xf041;",adjust:"&#xf042;",tint:"&#xf043;","pencil-square-o":"&#xf044;","share-square-o":"&#xf045;","check-square-o":"&#xf046;",arrows:"&#xf047;","step-backward":"&#xf048;","fast-backward":"&#xf049;",backward:"&#xf04a;",play:"&#xf04b;",pause:"&#xf04c;",stop:"&#xf04d;",forward:"&#xf04e;","fast-forward":"&#xf050;","step-forward":"&#xf051;",eject:"&#xf052;","chevron-left":"&#xf053;","chevron-right":"&#xf054;","plus-circle":"&#xf055;","minus-circle":"&#xf056;","remove-circle":"&#xf057;","check-circle":"&#xf058;","question-circle":"&#xf059;","info-circle":"&#xf05a;",crosshairs:"&#xf05b;","remove-circle-o":"&#xf05c;","check-circle-o":"&#xf05d;",ban:"&#xf05e;","arrow-left":"&#xf060;","arrow-right":"&#xf061;","arrow-up":"&#xf062;","arrow-down":"&#xf063;",share:"&#xf064;",expand:"&#xf065;",compress:"&#xf066;",plus:"&#xf067;",minus:"&#xf068;",asterisk:"&#xf069;","exclamation-circle":"&#xf06a;",gift:"&#xf06b;",leaf:"&#xf06c;",fire:"&#xf06d;",eye:"&#xf06e;","eye-slash":"&#xf070;","exclamation-triangle":"&#xf071;",plane:"&#xf072;",calendar:"&#xf073;",random:"&#xf074;",comment:"&#xf075;",magnet:"&#xf076;","chevron-up":"&#xf077;","chevron-down":"&#xf078;",retweet:"&#xf079;","shopping-cart":"&#xf07a;",folder:"&#xf07b;","folder-open":"&#xf07c;","arrows-v":"&#xf07d;","arrows-h":"&#xf07e;","bar-chart-o":"&#xf080;","twitter-square":"&#xf081;","facebook-square":"&#xf082;","camera-retro":"&#xf083;",key:"&#xf084;",cogs:"&#xf085;",comments:"&#xf086;","thumbs-o-up":"&#xf087;","thumbs-o-down":"&#xf088;","star-half":"&#xf089;","heart-o":"&#xf08a;","sign-out":"&#xf08b;","linkedin-square":"&#xf08c;","thumb-tack":"&#xf08d;","external-link":"&#xf08e;","sign-in":"&#xf090;",trophy:"&#xf091;","github-square":"&#xf092;",upload:"&#xf093;","lemon-o":"&#xf094;",phone:"&#xf095;","square-o":"&#xf096;","bookmark-o":"&#xf097;","phone-square":"&#xf098;",twitter:"&#xf099;",facebook:"&#xf09a;",github:"&#xf09b;",unlock:"&#xf09c;","credit-card":"&#xf09d;",rss:"&#xf09e;","hdd-o":"&#xf0a0;",bullhorn:"&#xf0a1;",bell:"&#xf0f3;",certificate:"&#xf0a3;","hand-o-right":"&#xf0a4;","hand-o-left":"&#xf0a5;","hand-o-up":"&#xf0a6;","hand-o-down":"&#xf0a7;","arrow-circle-left":"&#xf0a8;","arrow-circle-right":"&#xf0a9;","arrow-circle-up":"&#xf0aa;","arrow-circle-down":"&#xf0ab;",globe:"&#xf0ac;",wrench:"&#xf0ad;",tasks:"&#xf0ae;",filter:"&#xf0b0;",briefcase:"&#xf0b1;","arrows-alt":"&#xf0b2;",users:"&#xf0c0;",link:"&#xf0c1;",cloud:"&#xf0c2;",flask:"&#xf0c3;",scissors:"&#xf0c4;","files-o":"&#xf0c5;",paperclip:"&#xf0c6;","floppy-o":"&#xf0c7;",square:"&#xf0c8;",bars:"&#xf0c9;","list-ul":"&#xf0ca;","list-ol":"&#xf0cb;",strikethrough:"&#xf0cc;",underline:"&#xf0cd;",table:"&#xf0ce;",magic:"&#xf0d0;",truck:"&#xf0d1;",pinterest:"&#xf0d2;","pinterest-square":"&#xf0d3;","google-plus-square":"&#xf0d4;","google-plus":"&#xf0d5;",money:"&#xf0d6;","caret-down":"&#xf0d7;","caret-up":"&#xf0d8;","caret-left":"&#xf0d9;","caret-right":"&#xf0da;",columns:"&#xf0db;",sort:"&#xf0dc;","sort-asc":"&#xf0dd;","sort-desc":"&#xf0de;",envelope:"&#xf0e0;",linkedin:"&#xf0e1;",undo:"&#xf0e2;",gavel:"&#xf0e3;",tachometer:"&#xf0e4;","comment-o":"&#xf0e5;","comments-o":"&#xf0e6;",bolt:"&#xf0e7;",sitemap:"&#xf0e8;",umbrella:"&#xf0e9;",clipboard:"&#xf0ea;","lightbulb-o":"&#xf0eb;",exchange:"&#xf0ec;","cloud-download":"&#xf0ed;","cloud-upload":"&#xf0ee;","user-md":"&#xf0f0;",stethoscope:"&#xf0f1;",suitcase:"&#xf0f2;","bell-o":"&#xf0a2;",coffee:"&#xf0f4;",cutlery:"&#xf0f5;","file-text-o":"&#xf0f6;","building-o":"&#xf0f7;","hospital-o":"&#xf0f8;",ambulance:"&#xf0f9;",medkit:"&#xf0fa;","fighter-jet":"&#xf0fb;",beer:"&#xf0fc;","h-square":"&#xf0fd;","plus-square":"&#xf0fe;","angle-double-left":"&#xf100;","angle-double-right":"&#xf101;","angle-double-up":"&#xf102;","angle-double-down":"&#xf103;","angle-left":"&#xf104;","angle-right":"&#xf105;","angle-up":"&#xf106;","angle-down":"&#xf107;",desktop:"&#xf108;",laptop:"&#xf109;",tablet:"&#xf10a;",mobile:"&#xf10b;","circle-o":"&#xf10c;","quote-left":"&#xf10d;","quote-right":"&#xf10e;",spinner:"&#xf110;",circle:"&#xf111;",reply:"&#xf112;","github-alt":"&#xf113;","folder-o":"&#xf114;","folder-open-o":"&#xf115;","smile-o":"&#xf118;","frown-o":"&#xf119;","meh-o":"&#xf11a;",gamepad:"&#xf11b;","keyboard-o":"&#xf11c;","flag-o":"&#xf11d;","flag-checkered":"&#xf11e;",terminal:"&#xf120;",code:"&#xf121;","reply-all":"&#xf122;","mail-reply-all":"&#xf122;","star-half-o":"&#xf123;","location-arrow":"&#xf124;",crop:"&#xf125;","code-fork":"&#xf126;","chain-broken":"&#xf127;",question:"&#xf128;",info:"&#xf129;",exclamation:"&#xf12a;",superscript:"&#xf12b;",subscript:"&#xf12c;",eraser:"&#xf12d;","puzzle-piece":"&#xf12e;",microphone:"&#xf130;","microphone-slash":"&#xf131;",shield:"&#xf132;","calendar-o":"&#xf133;","fire-extinguisher":"&#xf134;",rocket:"&#xf135;",maxcdn:"&#xf136;","chevron-circle-left":"&#xf137;","chevron-circle-right":"&#xf138;","chevron-circle-up":"&#xf139;","chevron-circle-down":"&#xf13a;",html5:"&#xf13b;",css3:"&#xf13c;",anchor:"&#xf13d;","unlock-alt":"&#xf13e;",bullseye:"&#xf140;","ellipsis-h":"&#xf141;","ellipsis-v":"&#xf142;","rss-square":"&#xf143;","play-circle":"&#xf144;",ticket:"&#xf145;","minus-square":"&#xf146;","minus-square-o":"&#xf147;","level-up":"&#xf148;","level-down":"&#xf149;","check-square":"&#xf14a;","pencil-square":"&#xf14b;","external-link-square":"&#xf14c;","share-square":"&#xf14d;",compass:"&#xf14e;","caret-square-o-down":"&#xf150;","caret-square-o-up":"&#xf151;","caret-square-o-right":"&#xf152;",eur:"&#xf153;",gbp:"&#xf154;",usd:"&#xf155;",inr:"&#xf156;",jpy:"&#xf157;",rub:"&#xf158;",krw:"&#xf159;",btc:"&#xf15a;",file:"&#xf15b;","file-text":"&#xf15c;","sort-alpha-asc":"&#xf15d;","sort-alpha-desc":"&#xf15e;","sort-amount-asc":"&#xf160;","sort-amount-desc":"&#xf161;","sort-numeric-asc":"&#xf162;","sort-numeric-desc":"&#xf163;","thumbs-up":"&#xf164;","thumbs-down":"&#xf165;","youtube-square":"&#xf166;",youtube:"&#xf167;",xing:"&#xf168;","xing-square":"&#xf169;","youtube-play":"&#xf16a;",dropbox:"&#xf16b;","stack-overflow":"&#xf16c;",instagram:"&#xf16d;",flickr:"&#xf16e;",adn:"&#xf170;",bitbucket:"&#xf171;","bitbucket-square":"&#xf172;",tumblr:"&#xf173;","tumblr-square":"&#xf174;","long-arrow-down":"&#xf175;","long-arrow-up":"&#xf176;","long-arrow-left":"&#xf177;","long-arrow-right":"&#xf178;",apple:"&#xf179;",windows:"&#xf17a;",android:"&#xf17b;",linux:"&#xf17c;",dribbble:"&#xf17d;",skype:"&#xf17e;",foursquare:"&#xf180;",trello:"&#xf181;",female:"&#xf182;",male:"&#xf183;",gittip:"&#xf184;","sun-o":"&#xf185;","moon-o":"&#xf186;",archive:"&#xf187;",bug:"&#xf188;",vk:"&#xf189;",weibo:"&#xf18a;",renren:"&#xf18b;",pagelines:"&#xf18c;","stack-exchange":"&#xf18d;","arrow-circle-o-right":"&#xf18e;","arrow-circle-o-left":"&#xf190;","caret-square-o-left":"&#xf191;","dot-circle-o":"&#xf192;",wheelchair:"&#xf193;","vimeo-square":"&#xf194;","try":"&#xf195;","plus-square-o":"&#xf196;"},function(a,b){"use strict";b.UI.Databind=b.UI.Base.extend({options:{uitype:"Databind",scope:"uitype",data:{}},data:{},initData:{},bindMapping:{},_init:function(){this.data=this.options.el.get(0);try{delete this.data.eventID}catch(b){}this.initData=a.extend(!0,{},this.data),this.bindMapping={}},setValue:function(a,b){for(var c in a)c.toLowerCase().indexOf("jquery")>=0||this.set(c,a[c],b)},getValue:function(){var b=a.extend({},this.data);for(var c in b)c.toLowerCase().indexOf("jquery")>=0&&delete b[c];return b},_change:function(a){var b=a.data.propName,c=a.data.el,d=cui(c).getValue(),e=this.data[b];d!=e&&(this.data[b]=d,this._triggerHandler("change",[b,e,d]))},addBind:function(c,d){this.bindMapping[d]=c;var e=cui(c);if(!b.UI.scan.textmode&&!e.options.textmode){var f=e.getValue();"undefined"==typeof this.data[d]&&("string"==typeof f&&""!==f?this.data[d]=f:"array"===a.type(f)&&0!==f.lenght&&(this.data[d]=f))}return e.bind("change",{propName:d,el:c},a.proxy(this._change,this)),"undefined"!=typeof this.data[d]&&(e.options.textmode?(e.options.value=this.data[d],e.setTextMode()):e.setValue(this.data[d],!0)),this},reset:function(){for(var a in this.initData)this.set(a,this.initData[a],!0)},setEmpty:function(){var a,b,c="";for(b in this.bindMapping)cui(this.bindMapping[b]).onValid();for(b in this.data)if(!(b.toLowerCase().indexOf("jquery")>=0)){switch(a=Object.prototype.toString.call(this.data[b]).match(/\[object\s([A-Za-z]{1,})\]/)[1].toLocaleLowerCase(),a=null===this.data[b]?"null":a){case"number":c="";break;case"string":c="";break;case"array":c=[];break;case"object":c={};break;case"null":c=null;break;case"undefined":c=void 0}this.set(b,c,!0)}},set:function(a,b,c){var d=this.data[a];if(b!=d||c){this.data[a]=b;var e=this.bindMapping[a],f=cui(e);e&&(f.options.textmode?(f.options.value=b,f.setTextMode()):f.setValue(b,!!c)),this._triggerHandler("change",[a,d,b])}},get:function(a){return this.data[a]},destroy:function(){this._super();for(var a in this.bindMapping)a&&cui(this.bindMapping[a]).unbind("change",null,this._change)}})}(window.comtop.cQuery,window.comtop),function(a,b){b.UI.Validate=b.UI.Base.extend({options:{uitype:"Validate",onValid:null,onInValid:null},invalidClass:"validate_invalid",messageClass:"validate_validation_message",invalidFieldClass:"validate_invalid_field",_create:function(){a.extend(this,this.options)},destroy:function(){var b=this,c=a.data(this.options.el,"validateEl")||[];a.each(c,function(a,c){var d=cui("#"+c.id),e=d.options.el;d.unbind("change",b._validateEvent),e.removeData("validateRule")}),a.removeData(this.options.el,"validateEl")},add:function(b,d,e){var f="string"==a.type(b)?cui("#"+b):b;if(f.options){var g=f.options.el,h=g.data("validateRule")||[],i=null;i=e||c[d]?{type:d,params:e||{}}:{type:"required",params:{m:d}},h.push(i),g.data("validateRule",h);var j=a.data(this.options.el,"validateEl")||[];this._contains(g[0],j)||(f.bind("change",this,this._validateEvent),j.push(g[0])),a.data(this.options.el,"validateEl",j)}},setTips:function(b,c){if(b&&c){var d="string"===a.type(b)?cui("#"+b):b;if(d.options){var e=d.options.el,f=e.data("validateRule")||[],g=[],h=this;if("string"===a.type(c))return a.each(f,function(a){var b=f[a];"required"===b.type&&(b.params.m=c)}),void(d.options.el.attr("tip")&&this.validOneElement(d));a.isArray(c)?g=c:g.push(c),a.each(g,function(b){var c=g[b];a.each(f,function(a){var b=f[a];if(c.type===b.type){var d=h._getPropertyNames(c)[1]||"m";b.params[d]&&(b.params[d]=c[d])}})}),d.options.el.attr("tip")&&this.validOneElement(d)}}},_getPropertyNames:function(a){var b=[];for(key in a)b.push(key);return b},disValid:function(b,c){var d="string"==a.type(b)?cui("#"+b):b;if(d.options){var e=d.options.el;c?e.data("disValid","true"):e.removeData("disValid")}},_contains:function(b,c){var d=!1;return a.each(c,function(a,c){if(b===c)return void(d=!0)}),d},remove:function(b,c){var d="string"==a.type(b)?cui("#"+b):b;if(d.options){var e=d.options.el,f=[];if(c){f=e.data("validateRule")||[];var g=-1;a.each(f,function(a,b){b.type==c&&(g=a)}),g>=0&&f.splice(g,1)}if(f.length<1){e.removeData("validateRule"),d.unbind("change",this,this._validateEvent);var h=a.data(this.options.el,"validateEl")||[],i=-1;a.each(h,function(a,b){b.id==e[0].id&&(i=a)}),i>=0&&h.splice(i,1),h.length<1?a.removeData(this.options.el,"validateEl"):a.data(this.options.el,"validateEl",h)}else e.data("validateRule",f)}},_validateEvent:function(a,b){var c=a.data;c._validate(this,!!b)},validAllElement:function(){return this._validElement(a.data(this.options.el,"validateEl"))},validOneElement:function(b){var c="string"==a.type(b)?cui("#"+b):b;return!!c.options&&this._validate(c)},validElement:function(c,d,e){var f,g,h=[];switch(c=c||"ALL",c=c.toLocaleUpperCase(c)){case"AREA":var i=a(d),j=[],k=[],l=b.UI.componentList;for(f=0,g=l.length;f<g;f++)i.find(l[f].options.el).length&&"undefined"!=typeof l[f].options.textmode&&k.push(l[f].options.el[0]),l[f].options.el&&"undefined"!=typeof l[f].options.textmode&&j.push(l[f].options.el[0]);if(e="undefined"==typeof e)h=k;else{var m=!1;for(f=0,g=j.length;f<g;f++){for(var n=0,o=k.length;n<o;n++)if(a(k[n]).attr("id")==a(j[f]).attr("id")){m=!0;break}m||h.push(j[f]),m=!1}}break;case"CUSTOM":if(e="undefined"==typeof e)for(f=0,g=d.length;f<g;f++)h.push(a("#"+d[f])[0]);else{var l=b.UI.componentList,k=[];for(f=0,g=l.length;f<g;f++)l[f].options.el&&"undefined"!=typeof l[f].options.textmode&&k.push(l[f].options.el[0]);var m=!1;for(f=0,g=k.length;f<g;f++){for(var n=0,o=d.length;n<o;n++)if(a(k[f]).attr("id")==d[n]){m=!0;break}m||h.push(k[f]),m=!1}}break;case"ALL":default:h=a.data(this.options.el,"validateEl")}return this._validElement(h)},_validElement:function(b){b=b||[];for(var c=[],d=[],e=!0,f=this.notValidReadOnly,g=0;g<b.length;g++){var h=b[g],i=cui(h);if("undefined"!=typeof i.options&&!(f&&i.options.readonly===!0||i.options.textmode===!0)){var j=this._validate(i);j=a.extend(j,{id:h.id}),j.valid?c.push(j):(e=!1,d.push(j))}}return[d,c,e]},_validate:function(a,b){var c=a.options.el;if(b)return a.onValid(a),!1;if(!c[0].disabled){var d=null,e=a.options.el.data("disValid");d=e&&"true"==e?{valid:!0,message:""}:this._doValidate(a);var f=d.valid;return f?a.onValid&&!this.options.onValid?a.onValid(a):a.onValid||this.options.onValid?this.options.onValid.apply(this,[c]):this.onValid(c):a.onInValid&&!this.options.onInValid?a.onInValid(a,d.message):a.onInValid||this.options.onInValid?this.options.onInValid.apply(this,[c,d.message]):this.onInValid(c,d.message),d}},_doValidate:function(a){for(var b=a.options.el,c=!1,d=b.data("validateRule")||[],e=0;e<d.length;e++){var f=d[e],g=this._validateElement(a,f);if(c=!g.valid)return{valid:!1,message:g.message}}return{valid:!0,message:""}},_validateElement:function(a,b){var d=b.type,e=b.params,f=a.getValue(),g=!0,h="";try{c[d](f,e)}catch(i){h=i.message,g=!1}finally{return{valid:g,message:h}}},onInValid:function(a,b){this._insertMessage(a,this._createMessageSpan(b)),this._addFieldClass(a)},onValid:function(a){this._removeMessageAndFieldClass(a)},_createMessageSpan:function(b){return a("<span></span>").html(b)},_insertMessage:function(b,c){this._removeMessage(b),a(c).addClass(this.messageClass+(" "+this.invalidClass)),a(c).insertAfter(b)},_addFieldClass:function(b){this._removeFieldClass(b),a(b).addClass(this.invalidFieldClass)},_removeMessage:function(b){(nextEl=a(b).next("."+this.messageClass))&&a(nextEl).remove()},_removeFieldClass:function(b){a(b).removeClass(this.invalidFieldClass)},_removeMessageAndFieldClass:function(a){this._removeMessage(a),this._removeFieldClass(a)}});var c=null;b.UI.Validate.rule=c={required:function(b,d){var e=a.extend({m:"\u4e0d\u80fd\u4e3a\u7a7a!"},d||{});if(null!==b&&void 0!==b||c.fail(e.m),"string"==typeof b&&""===a.trim(b)&&c.fail(e.m),e.emptyVal&&a.each(e.emptyVal,function(a,d){b==d&&c.fail(e.m)}),"array"===a.type(b))if(0===b.length)c.fail(e.m);else for(var f=0;f<b.length;f++)if(""===a.trim(b[f])||null===b[f]||void 0===b[f]){c.fail(e.m);break}return!0},numeric:function(a,b){var d=a;if(""===a)return!0;var a=Number(a),b=b||{},e={notANumberMessage:b.notnm||"\u5fc5\u987b\u4e3a\u6570\u5b57!",notAnIntegerMessage:b.notim||"\u5fc5\u987b\u4e3a\u6574\u6570!",wrongNumberMessage:b.wrongm||"\u5fc5\u987b\u4e3a "+b.is+"!",tooLowMessage:b.minm||"\u5fc5\u987b\u5927\u4e8e "+b.min+"!",tooHighMessage:b.maxm||"\u5fc5\u987b\u5c0f\u4e8e "+b.max+"!",is:b.is||0==b.is?b.is:null,minimum:b.min||0==b.min?b.min:null,maximum:b.max||0==b.max?b.max:null,onlyInteger:b.oi||!1};switch(isFinite(a)||c.fail(e.notANumberMessage),e.onlyInteger&&!/^\d+$/.test(String(d))&&c.fail(e.notAnIntegerMessage),!0){case null!==e.is:a!=Number(e.is)&&c.fail(e.wrongNumberMessage);break;case null!==e.minimum&&null!==e.maximum:c.numeric(a,{minm:e.tooLowMessage,min:e.minimum}),c.numeric(a,{maxm:e.tooHighMessage,max:e.maximum});break;case null!==e.minimum:a<Number(e.minimum)&&c.fail(e.tooLowMessage);break;case null!==e.maximum:a>Number(e.maximum)&&c.fail(e.tooHighMessage)}return!0},format:function(b,d){var b=String(b);if(""==b)return!0;var e=a.extend({m:"\u4e0d\u7b26\u5408\u89c4\u5b9a\u683c\u5f0f!",pattern:/./,negate:!1},d||{});return e.pattern="string"==a.type(e.pattern)?new RegExp(e.pattern):e.pattern,e.negate||e.pattern.test(b)||c.fail(e.m),!0},email:function(b,d){if(""==b)return!0;var e=a.extend({m:"\u90ae\u7bb1\u683c\u5f0f\u8f93\u5165\u4e0d\u5408\u6cd5!"},d||{});return c.format(b,{m:e.m,pattern:/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i}),!0},dateFormat:function(b,d){var e=a.extend({m:"\u65e5\u671f\u683c\u5f0f\u5fc5\u987b\u4e3ayyyy-MM-dd\u5f62\u5f0f\uff01"},d||{});return c.format(b,{m:e.m,pattern:/^((((((0[48])|([13579][26])|([2468][048]))00)|([0-9][0-9]((0[48])|([13579][26])|([2468][048]))))-02-29)|(((000[1-9])|(00[1-9][0-9])|(0[1-9][0-9][0-9])|([1-9][0-9][0-9][0-9]))-((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30))|(((0[1-9])|(1[0-2]))-((0[1-9])|(1[0-9])|(2[0-8]))))))$/i}),!0},length:function(a,b){var a=String(a),b=b||{},d={wrongLengthMessage:b.wrongm||"\u957f\u5ea6\u5fc5\u987b\u4e3a "+b.is+" \u5b57\u8282!",tooShortMessage:b.minm||"\u957f\u5ea6\u5fc5\u987b\u5927\u4e8e "+b.min+" \u5b57\u8282!",tooLongMessage:b.maxm||"\u957f\u5ea6\u5fc5\u987b\u5c0f\u4e8e "+b.max+" \u5b57\u8282!",is:b.is||0==b.is?b.is:null,minimum:b.min||0==b.min?b.min:null,maximum:b.max||0==b.max?b.max:null};switch(!0){case null!==d.is:a.replace(/[^\x00-\xff]/g,"xx").length!=Number(d.is)&&c.fail(d.wrongLengthMessage);break;case null!==d.minimum&&null!==d.maximum:c.length(a,{minm:d.tooShortMessage,min:d.minimum}),c.length(a,{maxm:d.tooLongMessage,max:d.maximum});break;case null!==d.minimum:a.replace(/[^\x00-\xff]/g,"xx").length<Number(d.minimum)&&c.fail(d.tooShortMessage);break;case null!==d.maximum:a.replace(/[^\x00-\xff]/g,"xx").length>Number(d.maximum)&&c.fail(d.tooLongMessage);break;default:throw new c.error("Validate::Length - \u957f\u5ea6\u9a8c\u8bc1\u5fc5\u987b\u63d0\u4f9b\u957f\u5ea6\u503c!")}return!0},inclusion:function(b,d){var e=a.extend({m:"",within:[],allowNull:!1,partialMatch:!1,caseSensitive:!0,negate:!1},d||{});if(e.m=e.m||b+"\u6ca1\u6709\u5305\u542b\u5728\u6570\u7ec4"+e.within.join(",")+"\u4e2d",e.allowNull&&!b)return!0;if(e.allowNull||b||c.fail(e.m),!e.caseSensitive){var f=[];a.each(e.within,function(a,b){"string"==typeof b&&(b=b.toLowerCase()),f.push(b)}),e.within=f,"string"==typeof b&&(b=b.toLowerCase())}var g=!1;return a.each(e.within,function(a,c){c==b&&(g=!0),e.partialMatch&&b.indexOf(c)!=-1&&(g=!0)}),(!e.negate&&!g||e.negate&&g)&&c.fail(e.m),!0},exclusion:function(b,d){var e=a.extend({m:"",within:[],allowNull:!1,partialMatch:!1,caseSensitive:!0},d||{});return e.m=e.m||b+"\u4e0d\u5e94\u8be5\u5728\u6570\u7ec4"+e.within.join(",")+"\u4e2d\uff01",e.negate=!0,c.inclusion(b,e),!0},confirmation:function(b,d){if(!d.match)throw new Error("Validate::Confirmation - \u4e0e\u4e4b\u5339\u914d\u7684\u5143\u7d20\u5f15\u7528\u6216\u5143\u7d20id\u5fc5\u987b\u88ab\u63d0\u4f9b!");var e=a.extend({m:"\u4e24\u8005\u4e0d\u4e00\u81f4!",match:null},d||{});if(e.match="string"==a.type(e.match)?cui("#"+e.match):e.match,!e.match||0==e.match.length)throw new Error("Validate::Confirmation - \u4e0e\u4e4b\u5339\u914d\u7684\u5143\u7d20\u5f15\u7528\u6216\u5143\u7d20\u4e0d\u5b58\u5728!");return b!=e.match.getValue()&&c.fail(e.m),!0},acceptance:function(b,d){var e=a.extend({m:"\u5fc5\u987b\u9009\u62e9!"},d||{});return b||c.fail(e.m),!0},custom:function(b,d){var e=a.extend({against:function(){return!0},args:{},m:"\u4e0d\u5408\u6cd5!"},d||{}),f=e.against;return"string"==a.type(f)&&(f=window[f]),f(b,e.args,e)||c.fail(e.m),!0},error:function(a){this.message=a,this.name="ValidationError"},fail:function(a){throw new c.error(a)}}}(window.comtop.cQuery,window.comtop),function(a,b){function c(b,c,d){var e=cui(b).tipPosition,f=e?a(e,b):a(b),g=f.attr("tipid");return!!d[g]&&(c.content&&d[g].$tipEl.attr("tip",c.content),delete c.content,a.extend(d[g].options,c),d[g])}b.UI.Tip=b.UI.Base.extend({options:{uitype:"Tip",pointee:!0,position:"auto",live:!1,trigger:"hover",x:!1,maxWidth:150,fade:!1,opacity:1,tipEl:null,content_cls:".ctip-msg",close_cls:".ctip-x",tipType:"normal"},_init:function(){this.options.uid="tip_"+b.guid();var c=this.options;this.$el=a(c.el),this.$tipEl=c.tipEl?a(c.tipEl):this.$el,this.outTime=null,this._fixTitle()},_create:function(){"onload"===this.options.trigger?this.show():this._bindElEvent()},_createDOM:function(){var b=this,c=b.options,d=[],e=a(this.$el).parents(".cui-dialog-container").css("z-index")||"";d.push('<div class="ctip" ',e?'style="z-index:'+e:"",'" id="',c.uid,'">'),c.pointee&&d.push('<div class="ctip-arrow"><span class="tip-arrow-border">&#9670</span><span class="tip-arrow-bg">&#9670</span></div>'),d.push('<div class="ctip-content ',c.x===!0?"ctip-closed":"",'">'),c.x&&d.push('<a class="ctip-x cui-icon" href="#">&#xf00d;</a>'),d.push('<div class="ctip-msg"></div></div></div>'),a("body").append(d.join(""))},_bindElEvent:function(){var a=this,b=a.options,c="true"===b.live||b.live===!0?"live":"bind",d="hover"===b.trigger?"mouseenter":"click"===b.trigger?"click":"focus",e="hover"===b.trigger?"mouseleave":"click"===b.trigger?"":"blur";a.$el[c](d,function(){if(a.outTime&&clearTimeout(a.outTime),a.show(a.$el.attr("tipType")),"hover"!==b.trigger)return!1})[c](e,function(){if(b.x||(a.outTime=setTimeout(function(){a.hide()},100)),"hover"!==b.trigger)return!1})},_lazyCreate:function(){var b=this,c=b.options;this.created||(this._createDOM(),b.$tip=a("#"+c.uid),b._bindEvent(),b.created=!0)},_setMaxWidth:function(){var a=this.$tip,c=this.options;if(b.Browser.isIE6){var d=a.find(".ctip-msg").width()>c.maxWidth?c.maxWidth:"auto";b.Browser.isQM&&"auto"!=d&&(d+=16),a.children(".ctip-content").css("width",d)}else a.children(".ctip-content").css("maxWidth",c.maxWidth)},_bindEvent:function(){var a=this,b=this.options;b.x===!0?this.$tip.find(b.close_cls).bind("click",function(){return a.hide(),!1}):b.onlyEl||a.$tip.hover(function(){a.outTime&&clearTimeout(a.outTime)},function(){a.outTime=setTimeout(function(){a.hide()},200)})},_fixTitle:function(){this.$el.removeAttr("title")},_setPosition:function(){var c=this.$tip,d=this.$el,e=this.options,f=a.extend({},d.offset(),{width:d[0].offsetWidth,height:d[0].offsetHeight}),g=c[0].offsetWidth,h=c[0].offsetHeight,i=e.position;b.Browser.isIE&&g>e.maxWidth&&(c.width(e.maxWidth),g=c[0].offsetWidth,h=c[0].offsetHeight),"auto"===i&&(i=this._calAutoPosition(f));var j={};switch(i){case"t":j={left:f.left+f.width/2-g/2,top:f.top-h-5};break;case"b":j={left:f.left+f.width/2-g/2,top:f.top+f.height+5};break;case"l":j={left:f.left-g-5,top:f.top+f.height/2-h/2};break;case"r":j={left:f.left+f.width+5,top:f.top+f.height/2-h/2};break;case"lt":j={left:f.left,top:f.top-h-5};break;case"lb":j={left:f.left,top:f.top+f.height+5};break;case"rt":j={left:f.left+f.width-g,top:f.top-h-5};break;case"rb":j={left:f.left+f.width-g,top:f.top+f.height+5}}c.css(j).addClass("ctip-"+i)},_calAutoPosition:function(b){var c=a(window),d={width:c.width(),height:c.height()},e=b.top>a(document).scrollTop()+d.height/2?"t":"b",f="",g=this.options.maxWidth/2,h=b.left+b.width/2-a(document).scrollLeft(),i=d.width-h;return h<g?f="l":i<g&&(f="r"),f+e},getContent:function(){var a=this.options;return a.content?a.content:this.$tipEl.attr("tip")},setContent:function(a){var a=a||this.getContent();this.created||this._lazyCreate(),this.$tip.find(this.options.content_cls).html(a),this.$tipEl.attr("tip",a)},setType:function(a){var b=this,c=b.options;b.$tip.removeClass("ctip-"+c.tipType),b.$tip.addClass("ctip-"+a),c.tipType=a},show:function(b){var c=this;c._lazyCreate(),""!==a.trim(c.getContent())&&(c.setContent(),c.$tip[0].className="ctip",c.$tip.css({top:0,left:0,display:"block"}),c._setMaxWidth(),c._setPosition(),c.setType(b||c.options.tipType))},hide:function(){this.$tip&&this.$tip.hide()}}),cui.tipList={},cui.tip=function(d,e){var f=null;return e=e||{},(f=c(d,e,cui.tipList))?f:(e.el=a(d),f=new b.UI.Tip(e),cui.tipList[f.options.uid]=f,e.el.attr("tipID",f.options.uid),f)}}(window.comtop.cQuery,window.comtop),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;h<i;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(a.isPlainObject(f)?c[e]=a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):c[e]=f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){if(b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled"))return("string"==typeof g?f[g]:g).apply(f,arguments)}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(window.comtop.cQuery),function(a){a.cookie=function(b,c,d){if("undefined"==typeof c){var e=null;if(document.cookie&&""!=document.cookie)for(var f=document.cookie.split(";"),g=0;g<f.length;g++){var h=a.trim(f[g]);if(h.substring(0,b.length+1)==b+"="){e=decodeURIComponent(h.substring(b.length+1));break}}return e}d=d||{},null===c&&(c="",d=$.extend({},d),d.expires=-1);var i="";if(d.expires&&("number"==typeof d.expires||d.expires.toUTCString)){var j;"number"==typeof d.expires?(j=new Date,j.setTime(j.getTime()+24*d.expires*60*60*1e3)):j=d.expires,
i="; expires="+j.toUTCString()}var k=d.path?"; path="+d.path:"",l=d.domain?"; domain="+d.domain:"",m=d.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(c),i,k,l,m].join("")}}(window.comtop.cQuery);var _canLog=!0,getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;!function($){function getDtNodeFromElement(a){return alert("getDtNodeFromElement is deprecated"),$.ui.dynatree.getNode(a)}function noop(){}function _initDragAndDrop(a){var b=a.options.dnd||null;b&&(b.onDragStart||b.onDrop)&&_registerDnd(),b&&b.onDragStart&&a.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:!1,scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:!0,helper:function(a){var b=$.ui.dynatree.getNode(a.target);return b?b.tree._onDragEvent("helper",b,null,a,null,null):"<div></div>"},start:function(a,b){var c=b.helper.data("dtSourceNode");return!!c},_last:null}),b&&b.onDrop&&a.$tree.droppable({addClasses:!1,tolerance:"intersect",greedy:!1,_last:null})}var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}},DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(a,b,c){this.parent=a,this.tree=b,"string"==typeof c&&(c={title:c}),void 0===c.key&&(c.key="_"+b._nodeCount++),this.data=$.extend({},$.ui.dynatree.nodedatadefaults,c),this.li=null,this.span=null,this.ul=null,this.childList=null,this._isLoading=!1,this.hasSubSel=!1,this.bExpanded=!1,this.bSelected=!1},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(a,b){var c=$.extend({},this.data);if(c.activate=this.tree.activeNode===this,c.focus=this.tree.focusNode===this,c.expand=this.bExpanded,c.select=this.bSelected,b&&b(c),a&&this.childList){c.children=[];for(var d=0,e=this.childList.length;d<e;d++)c.children.push(this.childList[d].toDict(!0,b))}else delete c.children;return c},disable:function(){this.data.disable=!0;var a=$(this.li);this.expand(!1),a.children().removeClass("dynatree-active").addClass("dynatree-node-disable"),a.find(".dynatree-checkbox").removeClass("dynatree-checkbox").addClass("dynatree-checkbox-disable"),a.find(".dynatree-radio").removeClass("dynatree-radio").addClass("dynatree-radio-disable")},enable:function(){this.data.disable=!1;var a=$(this.li);a.children().removeClass("dynatree-node-disable"),a.find(".dynatree-checkbox-disable").removeClass("dynatree-checkbox-disable").addClass("dynatree-checkbox"),a.find(".dynatree-radio-disable").removeClass("dynatree-radio-disable").addClass("dynatree-radio")},fromDict:function(a){var b=a.children;return void 0===b?(this.data=$.extend(this.data,a),void this.render()):(a=$.extend({},a),a.children=void 0,this.data=$.extend(this.data,a),this.removeChildren(),void this.addChild(b))},_getInnerHtml:function(){var a,b=this.tree,c=b.options,d=b.cache,e=this.getLevel(),f=this.data,g="";e<c.minExpandLevel?e>1&&(g+=d.tagConnector):g+=this.hasChildren()!==!1?d.tagExpander:d.tagConnector,c.checkbox&&f.hideCheckbox!==!0&&!f.isStatusNode&&(g+=d.tagCheckbox),f.icon?(a="/"===f.icon.charAt(0)?f.icon:c.imagePath+f.icon,g+="<img src='"+a+"' alt='' />"):f.icon===!1||(g+=d.tagNodeIcon);var h="";if(c.onCustomRender&&(h=c.onCustomRender.call(b,this)||""),!h){var i=f.tooltip?' title="'+f.tooltip.replace(/\"/g,"&quot;")+'"':"",j=f.href||"javascript:;";h=c.noLink||f.noLink?'<span style="display:inline-block;" class="'+c.classNames.title+'"'+i+">"+f.title+"</span>":'<a hidefocus="true" onclick="return false;"  href="'+j+'" class="'+c.classNames.title+'"'+i+">"+f.title+"</a>"}return g+=h},_fixOrder:function(){var a=this.childList;if(a&&this.ul)for(var b=this.ul.firstChild,c=0,d=a.length-1;c<d;c++){var e=a[c],f=b.dtnode;e!==f?(this.tree.logDebug("_fixOrder: mismatch at index "+c+": "+e+" != "+f),this.ul.insertBefore(e.li,f.li)):b=b.nextSibling}},render:function(a,b){var c=this.tree,d=this.parent,e=this.data,f=c.options,g=f.classNames,h=this.isLastSibling(),i=!1;if(d||this.ul){if(d){this.li||(i=!0,this.li=document.createElement("li"),this.li.dtnode=this,e.key&&f.generateIds&&(this.li.id=f.idPrefix+e.key),this.span=document.createElement("span"),this.span.className=g.title,this.li.appendChild(this.span),d.ul||(d.ul=document.createElement("ul"),d.ul.style.display="none",d.li.appendChild(d.ul)),d.ul.appendChild(this.li)),this.span.innerHTML=this._getInnerHtml();var j=[];j.push(g.node),e.isFolder&&j.push(g.folder),this.bExpanded&&j.push(g.expanded),this.hasChildren()!==!1&&j.push(g.hasChildren),e.isLazy&&null===this.childList&&j.push(g.lazy),h&&j.push(g.lastsib),this.bSelected&&j.push(g.selected),this.hasSubSel&&j.push(g.partsel),c.activeNode===this&&j.push(g.active),e.addClass&&j.push(e.addClass),e._firstNode&&(j.push("dynatree-first-node"),$(this.span).find(".dynatree-expander").addClass("dynatree-expander-first")),e.partSelect&&j.push(g.partsel),j.push(g.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(e.isLazy&&null===this.childList?"d":"")+(h?"l":"")),j.push(g.combinedIconPrefix+(this.bExpanded?"e":"c")+(e.isFolder?"f":"")),this.span.className=j.join(" "),this.li.className=h?g.lastsib:"",e.disable&&this.disable(),e._customStyle&&$(this.span).find("a").attr("style",e._customStyle),"string"==typeof e.customerClass&&$(this.span).find("a").addClass(e.customerClass),i&&f.onCreate&&f.onCreate.call(c,this,this.span),f.onRender&&f.onRender.call(c,this,this.span)}}else this.li=this.span=null,this.ul=document.createElement("ul"),f.minExpandLevel>1?this.ul.className=g.container+" "+g.noConnector:this.ul.className=g.container;if(this.li&&$(this.li).data("nodeData",this.data),(this.bExpanded||b===!0)&&$.isArray(this.childList)){for(var k=0,l=this.childList.length;k<l;k++)this.childList[k].render(!1,b);this._fixOrder()}if(this.ul){var m="none"===this.ul.style.display,n=!!this.bExpanded;if(a&&f.fx&&m===n){var o=f.fx.duration||200;$(this.ul).animate(f.fx,o)}else this.ul.style.display=this.bExpanded||!d?"":"none"}},getKeyPath:function(a){var b=[];return this.visitParents(function(a){a.parent&&b.unshift(a.data.key)},!a),"/"+b.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){if(void 0!==this.hasChildren())return this.childList},hasChildren:function(){if(this.data.isLazy){if(null===this.childList||void 0===this.childList)return;if(0===this.childList.length)return!1;if(1===this.childList.length&&this.childList[0].isStatusNode())return;return!0}return!!this.childList},isFirstSibling:function(){var a=this.parent;return!a||a.childList[0]===this},isLastSibling:function(){var a=this.parent;return!a||a.childList[a.childList.length-1]===this},isLoading:function(){return!!this._isLoading},getPrevSibling:function(){if(!this.parent)return null;for(var a=this.parent.childList,b=1,c=a.length;b<c;b++)if(a[b]===this)return a[b-1];return null},getNextSibling:function(){if(!this.parent)return null;for(var a=this.parent.childList,b=0,c=a.length-1;b<c;b++)if(a[b]===this)return a[b+1];return null},isStatusNode:function(){return this.data.isStatusNode===!0},isChildOf:function(a){return this.parent&&this.parent===a},isDescendantOf:function(a){if(!a)return!1;for(var b=this.parent;b;){if(b===a)return!0;b=b.parent}return!1},countChildren:function(){var a=this.childList;if(!a)return 0;for(var b=a.length,c=0,d=b;c<d;c++){var e=a[c];b+=e.countChildren()}return b},sortChildren:function(a,b){var c=this.childList;if(c){if(a=a||function(a,b){var c=a.data.title.toLowerCase(),d=b.data.title.toLowerCase();return c===d?0:c>d?1:-1},c.sort(a),b)for(var d=0,e=c.length;d<e;d++)c[d].childList&&c[d].sortChildren(a,"$norender$");"$norender$"!==b&&this.render()}},_setStatusNode:function(a){var b=this.childList?this.childList[0]:null;if(a)b?(a.isStatusNode=!0,a.key="_statusNode",b.data=a,b.render()):(a.isStatusNode=!0,a.key="_statusNode",b=this.addChild(a));else if(b&&b.isStatusNode()){try{this.ul&&(this.ul.removeChild(b.li),b.li=null)}catch(c){}1===this.childList.length?this.childList=[]:this.childList.shift()}},setLazyNodeStatus:function(a,b){var c=b&&b.tooltip?b.tooltip:null,d=b&&b.info?" ("+b.info+")":"";switch(a){case DTNodeStatus_Ok:this._setStatusNode(null),$(this.span).removeClass(this.tree.options.classNames.nodeLoading),this._isLoading=!1,this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&this.childList.length>0?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this._isLoading=!0,$(this.span).addClass(this.tree.options.classNames.nodeLoading),this.parent||this._setStatusNode({title:this.tree.options.strings.loading+d,tooltip:c,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this._isLoading=!1,this._setStatusNode({title:this.tree.options.strings.loadError+d,tooltip:c,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+a+"'."}},_parentList:function(a,b){for(var c=[],d=b?this:this.parent;d;)(a||d.parent)&&c.unshift(d),d=d.parent;return c},getLevel:function(){for(var a=0,b=this.parent;b;)a++,b=b.parent;return a},_getTypeForOuterNodeEvent:function(a){var b=this.tree.options.classNames,c=a.target;if(c.className.indexOf(b.node)<0)return null;for(var d=a.pageX-c.offsetLeft,e=a.pageY-c.offsetTop,f=0,g=c.childNodes.length;f<g;f++){var h=c.childNodes[f],i=h.offsetLeft-c.offsetLeft,j=h.offsetTop-c.offsetTop,k=h.clientWidth,l=h.clientHeight;if(d>=i&&d<=i+k&&e>=j&&e<=j+l){if(h.className==b.title)return"title";if(h.className==b.expander)return"expander";if(h.className==b.checkbox)return"checkbox";if(h.className==b.nodeIcon)return"icon"}}return"prefix"},getEventTargetType:function(a){var b=a&&a.target?a.target.className:"",c=this.tree.options.classNames;return b===c.title?"title":b.indexOf(c.expander)!==-1?"expander":b===c.checkbox?"checkbox":b===c.nodeIcon?"icon":b===c.empty||b===c.vline||b===c.connector?"prefix":b.indexOf(c.node)>=0?this._getTypeForOuterNodeEvent(a):null},isVisible:function(){for(var a=this._parentList(!0,!1),b=0,c=a.length;b<c;b++)if(!a[b].bExpanded)return!1;return!0},makeVisible:function(){for(var a=this._parentList(!0,!1),b=0,c=a.length;b<c;b++)a[b]._expand(!0)},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(a){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(a,b,c){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",a,b,this);var d=this.tree.options;if(!(this.data.isStatusNode||b&&d.onQueryActivate&&d.onQueryActivate.call(this.tree,a,this)===!1))if(a){if(this.tree.activeNode){if(this.tree.activeNode===this&&!c)return;this.tree.activeNode.deactivate()}d.activeVisible&&this.makeVisible(),this.tree.activeNode=this,d.persist&&$.cookie(d.cookieId+"-active",this.data.key,d.cookie),this.tree.persistence.activeKey=this.data.key,$(this.span).addClass(d.classNames.active),b&&d.onActivate&&d.onActivate.call(this.tree,this)}else if(this.tree.activeNode===this){if(d.onQueryActivate&&d.onQueryActivate.call(this.tree,!1,this)===!1)return;$(this.span).removeClass(d.classNames.active),d.persist&&$.cookie(d.cookieId+"-active","",d.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,b&&d.onDeactivate&&d.onDeactivate.call(this.tree,this)}},activate:function(a){this._activate(!0,!0,a)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var a=!0,b=!1;if(this.data.isFolder)switch(this.tree.options.clickFolderMode){case 2:a=!1,b=!0;break;case 3:a=b=!0}null===this.parent&&(b=!1),b&&this.toggleExpand(),a&&this.activate(this.tree.options.reactive)},_setSubSel:function(a){a?(this.hasSubSel=!0,$(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,$(this.span).removeClass(this.tree.options.classNames.partsel))},_updatePartSelectionState:function(){var a,b=this.bSelected;if(!this.hasChildren())return a=this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode,this._setSubSel(!1),a;var c,d,e=this.childList,f=!0,g=!0;for(c=0,d=e.length;c<d;c++){var h=e[c],i=h._updatePartSelectionState();i!==!1&&(g=!1),i!==!0&&(f=!1)}return a=!!f||!g&&void 0,this._setSubSel(void 0===a),this.bSelected=a===!0,4==this.tree.options.selectMode&&(this.bSelected=b),a},_fixSelectionState:function(a){var b,c,d;if(this.bSelected)for(this.visit(function(a){a.parent._setSubSel(!0),a.data.unselectable||a._select(!0,!1,!1)}),b=this.parent;b;){b._setSubSel(!0);var e=!0;for(c=0,d=b.childList.length;c<d;c++){var f=b.childList[c];if(!f.bSelected&&!f.data.isStatusNode&&!f.data.unselectable){e=!1;break}}e&&!a&&b._select(!0,!1,!1),b=b.parent}else for(this._setSubSel(!1),this.visit(function(a){a._setSubSel(!1),a._select(!1,!1,!1)}),b=this.parent;b;){b._select(!1,!1,!1);var g=!1;for(c=0,d=b.childList.length;c<d;c++)if(b.childList[c].bSelected||b.childList[c].hasSubSel){g=!0;break}b._setSubSel(g),b=b.parent}},_select:function(a,b,c){var d=this.tree.options;this.data.isStatusNode||this.bSelected!==a&&(b&&d.onQuerySelect&&d.onQuerySelect.call(this.tree,a,this)===!1||(1==d.selectMode&&a&&this.tree.visit(function(a){if(a.bSelected)return a._select(!1,!1,!1),!1}),this.bSelected=a,c&&3===d.selectMode&&this._fixSelectionState(),c&&4===d.selectMode&&this._fixSelectionState(!0),a?(d.persist&&this.tree.persistence.addSelect(this.data.key),$(this.span).addClass(d.classNames.selected),b&&d.onSelect&&d.onSelect.call(this.tree,!0,this)):(d.persist&&this.tree.persistence.clearSelect(this.data.key),$(this.span).removeClass(d.classNames.selected),b&&d.onSelect&&d.onSelect.call(this.tree,!1,this))))},select:function(a){return this.data.unselectable?this.bSelected:this._select(a!==!1,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return!!this.data.isLazy},_loadContent:function(){try{var a=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this),this.setLazyNodeStatus(DTNodeStatus_Loading),!0===a.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",this))}catch(b){this.tree.logWarning("_loadContent: failed - %o",b),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+b})}},_expand:function(a,b){if(this.bExpanded===a)return void this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",a,this);this.tree.logDebug("dtnode._expand(%o) - %o",a,this);var c=this.tree.options;if(!a&&this.getLevel()<c.minExpandLevel)return void this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",a,this);if(!c.onQueryExpand||c.onQueryExpand.call(this.tree,a,this)!==!1){this.bExpanded=a,c.persist&&(a?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));var d=!(this.data.isLazy&&null===this.childList||this._isLoading||b);if(this.render(d),this.bExpanded&&this.parent&&c.autoCollapse)for(var e=this._parentList(!1,!0),f=0,g=e.length;f<g;f++)e[f].collapseSiblings();return c.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate(),a&&this.data.isLazy&&null===this.childList&&!this._isLoading?void this._loadContent():void(c.onExpand&&c.onExpand.call(this.tree,a,this))}},isExpanded:function(){return this.bExpanded},expand:function(a){a=a!==!1,(this.childList||this.data.isLazy||!a)&&(null!==this.parent||a)&&this._expand(a)},scheduleAction:function(a,b){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var c=this;switch(a){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){c.tree.logDebug("setTimeout: trigger expand"),c.expand(!0)},b);break;case"activate":this.tree.timer=setTimeout(function(){c.tree.logDebug("setTimeout: trigger activate"),c.activate()},b);break;default:throw"Invalid mode "+a}this.tree.logDebug("setTimeout(%s, %s): %s",a,b,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(null!==this.parent)for(var a=this.parent.childList,b=0,c=a.length;b<c;b++)a[b]!==this&&a[b].bExpanded&&a[b]._expand(!1)},_onClick:function(a){var b=this.getEventTargetType(a);if("expander"===b)this.toggleExpand();else if("checkbox"===b)this.toggleSelect();else{this._userActivate();var c=this.span.getElementsByTagName("a");if(!c[0])return!0}},_onDblClick:function(a){},_onKeydown:function(a){var b,c=!0;switch(a.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:this.bExpanded||!this.childList&&!this.data.isLazy?this.childList&&this.childList[0].focus():(this.toggleExpand(),this.focus());break;case 38:for(b=this.getPrevSibling();b&&b.bExpanded&&b.childList;)b=b.childList[b.childList.length-1];!b&&this.parent&&this.parent.parent&&(b=this.parent),b&&b.focus();break;case 40:if(this.bExpanded&&this.childList)b=this.childList[0];else for(var d=this._parentList(!1,!0),e=d.length-1;e>=0&&!(b=d[e].getNextSibling());e--);b&&b.focus();break;default:c=!1}c&&a.preventDefault()},_onKeypress:function(a){},_onFocus:function(a){var b=this.tree.options;"blur"==a.type||"focusout"==a.type?(b.onBlur&&b.onBlur.call(this.tree,this),this.tree.tnFocused&&$(this.tree.tnFocused.span).removeClass(b.classNames.focused),this.tree.tnFocused=null,b.persist&&$.cookie(b.cookieId+"-focus","",b.cookie)):"focus"!=a.type&&"focusin"!=a.type||(this.tree.tnFocused&&this.tree.tnFocused!==this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),$(this.tree.tnFocused.span).removeClass(b.classNames.focused)),this.tree.tnFocused=this,b.onFocus&&b.onFocus.call(this.tree,this),$(this.tree.tnFocused.span).addClass(b.classNames.focused),b.persist&&$.cookie(b.cookieId+"-focus",this.data.key,b.cookie))},visit:function(a,b){var c=!0;if(b===!0&&(c=a(this),c===!1||"skip"==c))return c;if(this.childList)for(var d=0,e=this.childList.length;d<e&&(c=this.childList[d].visit(a,!0),c!==!1);d++);return c},visitParents:function(a,b){if(b&&a(this)===!1)return!1;for(var c=this.parent;c;){if(a(c)===!1)return!1;c=c.parent}return!0},remove:function(){if(this===this.tree.root)throw"Cannot remove system root";this.parent.removeChild(this),this.parent.render()},removeChild:function(a){var b=this.childList;if(1==b.length){if(a!==b[0])throw"removeChild: invalid child";return this.removeChildren(),void $(this.ul).addClass("tree-hide-ul")}a===this.tree.activeNode&&a.deactivate(),this.tree.options.persist&&(a.bSelected&&this.tree.persistence.clearSelect(a.data.key),a.bExpanded&&this.tree.persistence.clearExpand(a.data.key)),a.removeChildren(!0),this.ul&&a.li&&this.ul.removeChild(a.li);for(var c=0,d=b.length;c<d;c++)if(b[c]===a){this.childList.splice(c,1);break}},removeChildren:function(a,b){this.tree.logDebug("%s.removeChildren(%o)",this,a);var c=this.tree,d=this.childList;if(d){for(var e=0,f=d.length;e<f;e++){var g=d[e];g!==c.activeNode||b||g.deactivate(),this.tree.options.persist&&!b&&(g.bSelected&&this.tree.persistence.clearSelect(g.data.key),g.bExpanded&&this.tree.persistence.clearExpand(g.data.key)),g.removeChildren(!0,b),this.ul&&$("li",$(this.ul)).remove()}this.childList=null}a||(this._isLoading=!1,this.render())},setTitle:function(a){this.fromDict({title:a})},reload:function(a){throw"Use reloadChildren() instead"},reloadChildren:function(a){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.reloadChildren() requires lazy nodes.";if(a){var b=this,c="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(c,function(d,e,f){if(b.tree.$tree.unbind(c),b.tree.logDebug("loaded %o, %o, %o",d,e,f),e!==b)throw"got invalid load event";a.call(b.tree,e,f)})}this.removeChildren(),this._loadContent()},_loadKeyPath:function(a,b){var c=this.tree;if(c.logDebug("%s._loadKeyPath(%s)",this,a),""===a)throw"Key path must not be empty";var d=a.split(c.options.keyPathSeparator);if(""===d[0])throw"Key path must be relative (don't start with '/')";var e=d.shift();if(this.childList)for(var f=0,g=this.childList.length;f<g;f++){var h=this.childList[f];if(h.data.key===e){if(0===d.length)b.call(c,h,"ok");else if(!h.data.isLazy||null!==h.childList&&void 0!==h.childList)b.call(c,h,"loaded"),h._loadKeyPath(d.join(c.options.keyPathSeparator),b);else{c.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,a,h);var i=this;h.reloadChildren(function(e,f){f?(c.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",e,a,e),b.call(c,h,"loaded"),e._loadKeyPath(d.join(c.options.keyPathSeparator),b)):(c.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",i,a),b.call(c,h,"error"))})}return}}b.call(c,void 0,"notfound",e,0===d.length),c.logWarning("Node not found: "+e)},resetLazy:function(){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.resetLazy() requires lazy nodes.";this.expand(!1),this.removeChildren()},_addChildNode:function(a,b){var c=this.tree,d=c.options,e=c.persistence;if(a.parent=this,null===this.childList?this.childList=[]:b||this.childList.length>0&&$(this.childList[this.childList.length-1].span).removeClass(d.classNames.lastsib),b){var f=$.inArray(b,this.childList);if(f<0)throw"<beforeNode> must be a child of <this>";this.childList.splice(f,0,a)}else this.childList.push(a);var g=c.isInitializing();d.persist&&e.cookiesFound&&g?(e.activeKey===a.data.key&&(c.activeNode=a),e.focusedKey===a.data.key&&(c.focusNode=a),a.bExpanded=$.inArray(a.data.key,e.expandedKeyList)>=0,a.bSelected=$.inArray(a.data.key,e.selectedKeyList)>=0):(a.data.activate&&(c.activeNode=a,d.persist&&(e.activeKey=a.data.key)),a.data.focus&&(c.focusNode=a,d.persist&&(e.focusedKey=a.data.key)),a.bExpanded=a.data.expand===!0,a.bExpanded&&d.persist&&e.addExpand(a.data.key),a.bSelected=a.data.select===!0,a.bSelected&&d.persist&&e.addSelect(a.data.key));var h=a.getLevel();if((d.minExpandLevel>=h||d.defaultExpandLevel>=h)&&(this.bExpanded=!0),a.bSelected&&3==d.selectMode)for(var i=this;i;)i.hasSubSel||i._setSubSel(!0),i=i.parent;return c.bEnableUpdate&&this.render(),a},addChild:function(a,b){if($(this.ul).removeClass("tree-hide-ul"),"string"==typeof a)throw"Invalid data type for "+a;if(a&&0!==a.length){if(a instanceof DynaTreeNode)return this._addChildNode(a,b);a.length||(a=[a]);for(var c=this.tree.enableUpdate(!1),d=null,e=0,f=a.length;e<f;e++){var g=a[e],h=this._addChildNode(new DynaTreeNode(this,this.tree,g),b);d||(d=h),g.children&&h.addChild(g.children,null)}return this.tree.enableUpdate(c),d}},append:function(a){return this.tree.logWarning("node.append() is deprecated (use node.addChild() instead)."),this.addChild(a,null)},appendAjax:function(a){var b=this;if(this.removeChildren(!1,!0),this.setLazyNodeStatus(DTNodeStatus_Loading),a.debugLazyDelay){var c=a.debugLazyDelay;return a.debugLazyDelay=0,this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+c),void setTimeout(function(){b.appendAjax(a)},c)}var d=a.success,e=a.error,f="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,g=$.extend({},this.tree.options.ajaxDefaults,a,{success:function(a,c,e){var h=b.tree.phase;b.tree.phase="init",g.postProcess?a=g.postProcess.call(this,a,this.dataType):a&&a.hasOwnProperty("d")&&(a="string"==typeof a.d?$.parseJSON(a.d):a.d),$.isArray(a)&&0===a.length||b.addChild(a,null),b.tree.phase="postInit",d&&d.call(g,b,a,c),b.tree.logDebug("trigger "+f),b.tree.$tree.trigger(f,[b,!0]),b.tree.phase=h,b.setLazyNodeStatus(DTNodeStatus_Ok),$.isArray(a)&&0===a.length&&(b.childList=[],b.render())},error:function(a,c,d){b.tree.logWarning("appendAjax failed:",c,":\n",a,"\n",d),e&&e.call(g,b,a,c,d),b.tree.$tree.trigger(f,[b,!1]),b.setLazyNodeStatus(DTNodeStatus_Error,{info:c,tooltip:""+d})}});$.ajax(g)},move:function(a,b){var c;if(this!==a){if(!this.parent)throw"Cannot move system root";void 0!==b&&"over"!=b||(b="child");var d=this.parent,e="child"===b?a:a.parent;if(e.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(1==this.parent.childList.length)this.parent.childList=this.parent.data.isLazy?[]:null,this.parent.bExpanded=!1;else{if(c=$.inArray(this,this.parent.childList),c<0)throw"Internal error";this.parent.childList.splice(c,1)}if(this.parent.ul&&this.parent.ul.removeChild(this.li),this.parent=e,e.hasChildren())switch(b){case"child":e.childList.push(this);break;case"before":if(c=$.inArray(a,e.childList),c<0)throw"Internal error";e.childList.splice(c,0,this);break;case"after":if(c=$.inArray(a,e.childList),c<0)throw"Internal error";e.childList.splice(c+1,0,this);break;default:throw"Invalid mode "+b}else e.childList=[this];if(e.ul||(e.ul=document.createElement("ul"),e.ul.style.display="none",e.li.appendChild(e.ul)),this.li&&e.ul.appendChild(this.li),this.tree!==a.tree)throw this.visit(function(b){b.tree=a.tree},null,!0),"Not yet implemented.";var f=function(a){for(var b=0,c=a.length;b<c;b++)0==b?a[b].data._firstNode=!0:a[b].data._firstNode=!1};this.data._firstNode=!1,d.isDescendantOf(e)||(null===d.parent&&f(d.childList),d.render()),e.isDescendantOf(d)||(null===d.parent&&f(d.childList),e.render())}},lastentry:void 0};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(a,b){var c=new DynaTreeStatus(a,b);return c.read(),c.toDict()},getDynaTreePersistData=DynaTreeStatus._getTreePersistData,DynaTreeStatus.prototype={initialize:function(a,b){void 0===a&&(a=$.ui.dynatree.prototype.options.cookieId),b=$.extend({},$.ui.dynatree.prototype.options.cookie,b),this.cookieId=a,this.cookieOpts=b,this.cookiesFound=void 0,this.activeKey=null,this.focusedKey=null,this.expandedKeyList=null,this.selectedKeyList=null},_log:function(a){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)},read:function(){this.cookiesFound=!1;var a=$.cookie(this.cookieId+"-active");this.activeKey=null===a?"":a,null!==a&&(this.cookiesFound=!0),a=$.cookie(this.cookieId+"-focus"),this.focusedKey=null===a?"":a,null!==a&&(this.cookiesFound=!0),a=$.cookie(this.cookieId+"-expand"),this.expandedKeyList=null===a?[]:a.split(","),null!==a&&(this.cookiesFound=!0),a=$.cookie(this.cookieId+"-select"),this.selectedKeyList=null===a?[]:a.split(","),null!==a&&(this.cookiesFound=!0)},write:function(){$.cookie(this.cookieId+"-active",null===this.activeKey?"":this.activeKey,this.cookieOpts),$.cookie(this.cookieId+"-focus",null===this.focusedKey?"":this.focusedKey,this.cookieOpts),$.cookie(this.cookieId+"-expand",null===this.expandedKeyList?"":this.expandedKeyList.join(","),this.cookieOpts),$.cookie(this.cookieId+"-select",null===this.selectedKeyList?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(a){$.inArray(a,this.expandedKeyList)<0&&(this.expandedKeyList.push(a),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(a){var b=$.inArray(a,this.expandedKeyList);b>=0&&(this.expandedKeyList.splice(b,1),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(a){$.inArray(a,this.selectedKeyList)<0&&(this.selectedKeyList.push(a),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(a){var b=$.inArray(a,this.selectedKeyList);b>=0&&(this.selectedKeyList.splice(b,1),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return this.cookiesFound===!0},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:void 0};var DynaTree=Class.create();DynaTree.version="$Version:$",DynaTree.prototype={initialize:function(a){this.phase="init",this.$widget=a,this.options=a.options,this.$tree=a.element,this.timer=null,this.divTree=this.$tree.get(0),_initDragAndDrop(this)},_load:function(a){var b=(this.$widget,this.options);this.bEnableUpdate=!0,this._nodeCount=1,this.activeNode=null,this.focusNode=null,void 0!==b.rootVisible&&this.logWarning("Option 'rootVisible' is no longer supported."),b.minExpandLevel<1&&(this.logWarning("Option 'minExpandLevel' must be >= 1."),b.minExpandLevel=1),b.classNames!==$.ui.dynatree.prototype.options.classNames&&(b.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,b.classNames)),b.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults&&(b.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,b.ajaxDefaults)),b.dnd!==$.ui.dynatree.prototype.options.dnd&&(b.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,b.dnd)),this.persistence=new DynaTreeStatus(b.cookieId,b.cookie),b.persist&&($.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read()),this.logDebug("DynaTree.persistence: %o",this.persistence.toDict()),this.cache={tagEmpty:"<span class='"+b.classNames.empty+"'></span>",tagVline:"<span class='"+b.classNames.vline+"'></span>",tagExpander:"<span class='"+b.classNames.expander+"'></span>",tagConnector:"<span class='"+b.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+b.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+b.classNames.checkbox+"'></span>",lastentry:void 0},(b.children||b.initAjax&&b.initAjax.url||b.initId)&&$(this.divTree).empty();var c=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{}),this.tnRoot.bExpanded=!0,this.tnRoot.render(),this.divTree.appendChild(this.tnRoot.ul);var d=this.tnRoot,e=b.persist&&this.persistence.isReloading(),f=!1,g=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure..."),b.children?d.addChild(b.children):b.initAjax&&b.initAjax.url?(f=!0,d.data.isLazy=!0,this._reloadAjax(a)):b.initId?this._createFromTag(d,$("#"+b.initId)):(this._createFromTag(d,c),c.remove()),this._checkConsistency(),f||3!=b.selectMode&&4!=b.selectMode||d._updatePartSelectionState(),this.logDebug("Dynatree._load(): render nodes..."),this.enableUpdate(g),this.logDebug("Dynatree._load(): bind events..."),this.$widget.bind(),this.logDebug("Dynatree._load(): postInit..."),this.phase="postInit",b.persist&&this.persistence.write(),this.focusNode&&this.focusNode.isVisible()&&(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus()),f||(b.onPostInit&&b.onPostInit.call(this,e,!1),a&&a.call(this,"ok")),this.phase="idle"},_reloadAjax:function(a){var b=this.options;if(!b.initAjax||!b.initAjax.url)throw"tree.reload() requires 'initAjax' mode.";var c=this.persistence,d=$.extend({},b.initAjax);d.addActiveKey&&(d.data.activeKey=c.activeKey),d.addFocusedKey&&(d.data.focusedKey=c.focusedKey),d.addExpandedKeyList&&(d.data.expandedKeyList=c.expandedKeyList.join(",")),d.addSelectedKeyList&&(d.data.selectedKeyList=c.selectedKeyList.join(",")),d.success&&this.logWarning("initAjax: success callback is ignored; use onPostInit instead."),d.error&&this.logWarning("initAjax: error callback is ignored; use onPostInit instead.");var e=c.isReloading();d.success=function(c,d,f){3==b.selectMode&&c.tree.tnRoot._updatePartSelectionState(),b.onPostInit&&b.onPostInit.call(c.tree,e,!1),a&&a.call(c.tree,"ok")},d.error=function(c,d,f,g){b.onPostInit&&b.onPostInit.call(c.tree,e,!0,d,f,g),a&&a.call(c.tree,"error",d,f,g)},this.logDebug("Dynatree._init(): send Ajax request..."),this.tnRoot.appendAjax(d)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(!0)},serializeArray:function(a){for(var b=this.getSelectedNodes(a),c=this.$tree.attr("name")||this.$tree.attr("id"),d=[],e=0,f=b.length;e<f;e++)d.push({name:c,value:b[e].data.key});return d},getPersistData:function(){return this.persistence.toDict()},logDebug:function(a){this.options.debugLevel>=2&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(a){this.options.debugLevel>=1&&(Array.prototype.unshift.apply(arguments,["info"]),
_log.apply(this,arguments))},logWarning:function(a){Array.prototype.unshift.apply(arguments,["warn"]),_log.apply(this,arguments)},isInitializing:function(){return"init"==this.phase||"postInit"==this.phase},isReloading:function(){return("init"==this.phase||"postInit"==this.phase)&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return"userEvent"==this.phase},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},reload:function(a){this._load(a)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(a){var b=document.getElementById(this.options.idPrefix+a);if(b)return b.dtnode?b.dtnode:null;var c=null;return this.visit(function(b){if(b.data.key==a)return c=b,!1},!0),c},getActiveNode:function(){return this.activeNode},reactivate:function(a){var b=this.activeNode;b&&(this.activeNode=null,b.activate(),a&&b.focus())},getSelectedNodes:function(a){var b=[];return this.tnRoot.visit(function(c){if(c.bSelected&&(b.push(c),a===!0))return"skip"}),b},activateKey:function(a){var b=null===a?null:this.getNodeByKey(a);return b?(b.focus(),b.activate(),b):(this.activeNode&&this.activeNode.deactivate(),this.activeNode=null,null)},loadKeyPath:function(a,b){var c=a.split(this.options.keyPathSeparator);return""===c[0]&&c.shift(),c[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),c.shift()),a=c.join(this.options.keyPathSeparator),this.tnRoot._loadKeyPath(a,b)},selectKey:function(a,b){var c=this.getNodeByKey(a);return c?(c.select(b),c):null},enableUpdate:function(a){return this.bEnableUpdate==a?a:(this.bEnableUpdate=a,a&&this.redraw(),!a)},count:function(){return this.tnRoot.countChildren()},visit:function(a,b){return this.tnRoot.visit(a,b)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this),$liSpan=$li.find(">span:first"),$liA=$li.find(">a:first"),title,href=null,target=null,tooltip;if($liSpan.length)title=$liSpan.html();else if($liA.length)title=$liA.html(),href=$liA.attr("href"),target=$liA.attr("target"),tooltip=$liA.attr("title");else{title=$li.html();var iPos=title.search(/<ul/i);title=iPos>=0?$.trim(title.substring(0,iPos)):$.trim(title)}var data={title:title,tooltip:tooltip,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if(href&&(data.href=href,data.target=target),$li.attr("title")&&(data.tooltip=$li.attr("title")),$li.attr("id")&&(data.key=$li.attr("id")),$li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){"{"!=dataAttr.charAt(0)&&(dataAttr="{"+dataAttr+"}");try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw"Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'"}}}var childNode=parentTreeNode.addChild(data),$ul=$li.find(">ul:first");$ul.length&&self._createFromTag(childNode,$ul)})},_checkConsistency:function(){},_setDndStatus:function(a,b,c,d,e){var f=a?$(a.span):null,g=$(b.span);if(this.$dndMarker||(this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().css({"z-index":1e3}).prependTo($(this.divTree).parent())),"after"===d||"before"===d||"over"===d){var h="0 0";switch(d){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-before"),h="0 -8";break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-after"),h="0 8";break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),g.addClass("dynatree-drop-target"),h="8 0"}this.$dndMarker.show().position({my:"left top",at:"left top",of:g,offset:h})}else g.removeClass("dynatree-drop-target"),this.$dndMarker.hide();"after"===d?g.addClass("dynatree-drop-after"):g.removeClass("dynatree-drop-after"),"before"===d?g.addClass("dynatree-drop-before"):g.removeClass("dynatree-drop-before"),e===!0?(f&&f.addClass("dynatree-drop-accept"),g.addClass("dynatree-drop-accept"),c.addClass("dynatree-drop-accept")):(f&&f.removeClass("dynatree-drop-accept"),g.removeClass("dynatree-drop-accept"),c.removeClass("dynatree-drop-accept")),e===!1?(f&&f.addClass("dynatree-drop-reject"),g.addClass("dynatree-drop-reject"),c.addClass("dynatree-drop-reject")):(f&&f.removeClass("dynatree-drop-reject"),g.removeClass("dynatree-drop-reject"),c.removeClass("dynatree-drop-reject"))},_onDragEvent:function(a,b,c,d,e,f){var g,h,i=(this.options,this.options.dnd),j=null,k=$(b.span);switch(a){case"helper":var l=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(d.target).closest("a").clone());$("ul.dynatree-container",b.tree.divTree).append(l),l.data("dtSourceNode",b),j=l;break;case"start":b.isStatusNode()?j=!1:i.onDragStart&&(j=i.onDragStart(b)),j===!1?(this.logDebug("tree.onDragStart() cancelled"),e.helper.trigger("mouseup"),e.helper.hide()):k.addClass("dynatree-drag-source");break;case"enter":j=i.onDragEnter?i.onDragEnter(b,c):null,j=!!j&&{over:j===!0||"over"===j||$.inArray("over",j)>=0,before:j===!0||"before"===j||$.inArray("before",j)>=0,after:j===!0||"after"===j||$.inArray("after",j)>=0},e.helper.data("enterResponse",j);break;case"over":if(h=e.helper.data("enterResponse"),g=null,h===!1);else if("string"==typeof h)g=h;else{var m=k.offset(),n={x:d.pageX-m.left,y:d.pageY-m.top},o={x:n.x/k.width(),y:n.y/k.height()};h.after&&o.y>.75?g="after":!h.over&&h.after&&o.y>.5?g="after":h.before&&o.y<=.25?g="before":!h.over&&h.before&&o.y<=.5?g="before":h.over&&(g="over"),i.preventVoidMoves&&(b===c?g=null:"before"===g&&c&&b===c.getNextSibling()?g=null:"after"===g&&c&&b===c.getPrevSibling()?g=null:"over"===g&&c&&c.parent===b&&c.isLastSibling()&&(g=null)),e.helper.data("hitMode",g)}"over"===g&&i.autoExpandMS&&b.hasChildren()!==!1&&!b.bExpanded&&b.scheduleAction("expand",i.autoExpandMS),g&&i.onDragOver&&(j=i.onDragOver(b,c,g),"over"!==j&&"before"!==j&&"after"!==j||(g=j)),this._setDndStatus(c,b,e.helper,g,j!==!1&&null!==g);break;case"drop":var p=e.helper.hasClass("dynatree-drop-reject");g=e.helper.data("hitMode"),g&&i.onDrop&&!p&&i.onDrop(b,c,g,e,f);break;case"leave":b.scheduleAction("cancel"),e.helper.data("enterResponse",null),e.helper.data("hitMode",null),this._setDndStatus(c,b,e.helper,"out",void 0),i.onDragLeave&&i.onDragLeave(b,c);break;case"stop":k.removeClass("dynatree-drag-source"),i.onDragStop&&i.onDragStop(b);break;default:throw"Unsupported drag event: "+a}return j},cancelDrag:function(){var a=$.ui.ddmanager.current;a&&a.cancel()},lastentry:void 0},$.widget("ui.dynatree",{_init:function(){return parseFloat($.ui.version)<1.8?(this.options.debugLevel>=0&&_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create()):void(this.options.debugLevel>=2&&_log("debug","ui.dynatree._init() was called; no current default functionality."))},_create:function(){var a=this.options;a.debugLevel>=1&&logMsg("Dynatree._create(): version='%s', debugLevel=%o.",$.ui.dynatree.version,this.options.debugLevel),this.options.event+=".dynatree";this.element.get(0);this.tree=new DynaTree(this),this.tree._load(),this.tree.logDebug("Dynatree._init(): done.")},bind:function(){function a(a){a=$.event.fix(a||window.event);var b=$.ui.dynatree.getNode(a.target);return!!b&&b._onFocus(a)}this.unbind();var b="click.dynatree dblclick.dynatree";this.options.keyboard&&(b+=" keypress.dynatree keydown.dynatree"),this.element.bind(b,function(a){var b=$.ui.dynatree.getNode(a.target);if(!b)return!0;if(!b.data.disable){var c=b.tree,d=c.options;c.logDebug("event(%s): dtnode: %s",a.type,b);var e=c.phase;c.phase="userEvent";try{switch(a.type){case"click":"function"!=typeof d.onDblClick||b.data.isFolder!==!0&&"true"!==b.data.isFolder?b._onClick(a):b._timer_?(clearTimeout(b._timer_),b._timer_=null):b._timer_=setTimeout(function(){b._onClick(a),b._timer_=null},200),"function"==typeof d.onClick&&d.onClick.call(c,b,a);break;case"dblclick":"function"==typeof d.onDblClick&&d.onDblClick.call(c,b,a),b._onDblClick(a);break;case"keydown":return(!d.onKeydown||d.onKeydown.call(c,b,a)!==!1)&&b._onKeydown(a);case"keypress":return(!d.onKeypress||d.onKeypress.call(c,b,a)!==!1)&&b._onKeypress(a)}}catch(f){c.logWarning("bind(%o): dtnode: %o, error: %o",a,b,f)}finally{c.phase=e}}});var c=this.tree.divTree;c.addEventListener?(c.addEventListener("focus",a,!0),c.addEventListener("blur",a,!0)):c.onfocusin=c.onfocusout=a},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind(),$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind(),$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:void 0}),parseFloat($.ui.version)<1.8&&($.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"),$.ui.dynatree.version="$Version:$",$.ui.dynatree.getNode=function(a){if(a instanceof DynaTreeNode)return a;for(void 0!==a.selector&&(a=a[0]);a;){if(a.dtnode)return a.dtnode;a=a.parentNode}return null},$.ui.dynatree.getPersistData=DynaTreeStatus._getTreePersistData,$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:"",children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,reactive:!0,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1e3,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,timeout:0,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:0,lastentry:void 0},parseFloat($.ui.version)<1.8&&($.ui.dynatree.defaults=$.ui.dynatree.prototype.options),$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,href:null,icon:!1,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,children:null,lastentry:void 0};var didRegisterDnd=!1,_registerDnd=function(){didRegisterDnd||($.ui.plugin.add("draggable","connectToDynatree",{start:function(a,b){var c=$(this).data("draggable"),d=b.helper.data("dtSourceNode")||null;if(d)return c.offset.click.top=-2,c.offset.click.left=16,d.tree._onDragEvent("start",d,null,a,b,c)},drag:function(a,b){var c=$(this).data("draggable"),d=b.helper.data("dtSourceNode")||null,e=b.helper.data("dtTargetNode")||null,f=$.ui.dynatree.getNode(a.target);if(a.target&&!f){var g=$(a.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0;if(g)return}b.helper.data("dtTargetNode",f),e&&e!==f&&e.tree._onDragEvent("leave",e,d,a,b,c),f&&f.tree.options.dnd.onDrop&&(f===e?f.tree._onDragEvent("over",f,d,a,b,c):f.tree._onDragEvent("enter",f,d,a,b,c))},stop:function(a,b){var c=$(this).data("draggable"),d=b.helper.data("dtSourceNode")||null,e=b.helper.data("dtTargetNode")||null,f=(c._mouseDownEvent,a.type),g="mouseup"==f&&1==a.which;g||logMsg("Drag was cancelled"),e&&(g&&e.tree._onDragEvent("drop",e,d,a,b,c),e.tree._onDragEvent("leave",e,d,a,b,c)),d&&d.tree._onDragEvent("stop",d,null,a,b,c)}}),didRegisterDnd=!0)}}(window.comtop.cQuery),function(a,b){function c(){return g.init(),g}var d=b.comtop,e=d.Browser.isIE6,f=d.Browser.isQM,g={init:function(){var b;this.overlayBuild||(b=a(document.createElement("div")),b.addClass("cui_overlay"),a("body").append(b),this.overlayBuild=!0,this._dom=b)},show:function(b){var c=this._dom.data("opa")||0;b=c+parseInt(100*b),(e||f)&&a("html,body").addClass("cui_overlay_ie6"),this._dom.data("opa",b).css("opacity",b/100).show()},hide:function(b){var c=this._dom.data("opa");b=c-parseInt(100*b),this._dom.data("opa",b),this._dom.css("opacity",b/100),b<=0&&(this._dom.hide(),(e||f)&&a("html,body").removeClass("cui_overlay_ie6"))}};b.comtop&&b.comtop.UI&&(comtop.UI.Overlay=c),b._overlay=c}(window.comtop?window.comtop.cQuery:window.jQuery,window),function(a,b){"use strict";var c="";b.UI.Button=b.UI.Base.extend({options:{uitype:"Button",label:"",hide:!1,disable:!1,icon:"",on_click:null,menu:null,button_type:"",mark:""},_init:function(a){var c=this.options;this.beOptions=a,this.$el=c.el,c.label=c.label||this.$el.html()||"\u6309&nbsp;\u94ae",c.menuId="button_"+b.guid()},_create:function(){var b=this,c=b.options;this._createDom(),c.hide&&this.hide(),c.disable&&this.disable(!0),c.icon&&this._setIcon(c.icon),c.menu&&(a.isFunction(c.menu)&&(c.menu=c.menu()),c.menu=cui("#"+c.menuId).menu(c.menu),c.el.children("a").unbind("click")),c.el.children("a").on("click.button",function(a){b._clickHandler(a,this,a.target),a.preventDefault()}).on("mouseleave.button",function(a){c.menu&&(window._cui_button_timer=setTimeout(function(){c.menu.hide()},100))})},_createDom:function(){var a=this.options,c=this.$el,d=[];d.push('<a class="cui-button '),b.Browser.isQM&&d.push("QM-cui-button "),a.button_type&&d.push(a.button_type),d.push('" hidefocus="true" href="#">'),a.icon&&d.push('<span class="button-icon cui-icon">&nbsp;</span>'),d.push('<span class="button-label">'+a.label+"</span>"),a.menu&&d.push('<span class="button-arrow cui-icon">&#xf0dc;</span>'),d.push("</a>"),c.html(d.join(""))},_setIcon:function(a){var c=b.icon;/\./.test(a)?(/\/+/.test(a)||(a=this._getIconPath("comtop.ui")+"images/button/"+a),this.$el.find(".button-icon").addClass("button-icon-center").html('<img src="'+a+'" />')):this.$el.find(".button-icon").html(c[a]||"")},_clickHandler:function(b,c,d){var e=this.options;if(!e.disable&&!e.designMode){var f=e.menu;if(f&&f.show(this.$el.children(".cui-button")),a(this).trigger("click"),"function"!=typeof e.on_click){var g=this._convertTo(this.beOptions.on_click,"function");"function"==typeof g&&g(b,this,e.mark)}else this.options.on_click&&this.options.on_click(b,this,e.mark)}},_getIconPath:function(b){if(c)return c;for(var d,e=a("link"),f=new RegExp(b),g=0;g<e.length&&(d=e.eq(g).attr("href"),!f.test(d));g++);return d=d.substr(0,d.lastIndexOf("/")),c=d=d.substr(0,d.lastIndexOf("/")+1),d},disable:function(a){a===!0?(this.options.disable=!0,this.options.el.children(".cui-button").addClass("disable-button"),this.options.menu&&this.options.menu.hide&&this.options.menu.hide()):(this.options.disable=!1,this.options.el.children(".cui-button").removeClass("disable-button"))},hide:function(){this.options.el.hide(),this.options.menu&&this.options.menu.hide&&this.options.menu.hide()},setLabel:function(b){var c=a.type(b),d=this.options;"number"!==c&&"string"!==c||(d.label=b,d.el.children("a").children(".button-label").html(b))},getLabel:function(){return this.options.label},getMenu:function(){return this.options.menu}})}(window.comtop.cQuery,window.comtop),function(a){"use strict";var b=a.cQuery,c={bottom:"&#xf0d7;",top:"&#xf0d8;",left:"&#xf0d9;",right:"&#xf0da;"},d={top:"&#xf0d7;",bottom:"&#xf0d8;",right:"&#xf0d9;",left:"&#xf0da;"};a.UI.Borderlayout=a.UI.Base.extend({options:{uitype:"Borderlayout",id:"",is_root:!0,gap:"0px 0px 0px 0px",fixed:{top:!0,middle:!1,left:!0,center:!1,right:!0,bottom:!0},items:[],on_sizechange:null},_init:function(){},_create:function(){var b=this.options;this.id=a.guid(),this.el=b.el,"BODY"===this.el.parent().prop("tagName")&&(this.body=!0,this.el.parent().css({margin:0,overflow:"hidden"})),this._setItems(),this._createDom(),this._bindHandler()},_setItems:function(){var c=this.options.items,d=this.el,e=this.items_default={position:"left",width:-1,height:-1,gap:"0px 0px 0px 0px",resizable:!1,min_size:30,max_size:200,split_size:2,is_header:!1,header_content:"",header_height:30,collapsable:!1,url:".",show_expand_icon:!1};if(!c.length){var f={string:function(a){return a},number:a.Tools.fixedNumber,"boolean":function(a){return"true"===a}};this.setattr=!0,d.children("[position]").each(function(){var a,d={};c.push(d);for(var g in e)e.hasOwnProperty(g)&&(a=b(this).attr(g),d[g]=void 0===a?e[g]:f[typeof e[g]](a))})}},_isCols:function(a){return"left"===a||"center"===a||"right"===a},_createDom:function(){for(var a=this.options.items,d=this.el,e=this.setattr,f={},g={},h={},i=[],j=this.options.fixed,k={top:"bottom",bottom:"top",left:"right",right:"left"},l=this.box_css={},m=this.min_size={},n=this.max_size={},o=this.collapsable={},p=this.items_default,q={},r=this._isCols,s=a.length;s--;){var t=a[s],u=t.position;t=e?a[s]:b.extend(p,a[s]),r(u)?(g[u]=t.width!==-1?t.width:"auto",i.push(t.height)):h[u]=t.height!==-1?t.height:"auto";var v=t.gap.split(" "),w=v.length;switch(w){case 1:v[1]=v[2]=v[3]=v[0];break;case 2:v[2]=v[0],v[3]=v[1];break;case 3:v[3]=v[1]}l[u]={"margin-top":parseInt(v[0],10),"margin-right":parseInt(v[1],10),"margin-bottom":parseInt(v[2],10),"margin-left":parseInt(v[3],10)},j[u]&&(m[u]=t.min_size,n[u]=t.max_size);var x='<div class="bl_'+u+" bl_"+u+this.id+'">',y="",z="";if("center"!==u){var A=this._isCols(u)?"width":"height";y='<div class="'+(t.resizable?"bl_move":"bl_border")+'" style="'+A+":"+t.split_size+'px;">'+(j[u]&&t.collapsable&&t.show_expand_icon?'<a href="javascript:;" class="bl_fold bl_unfold cui-icon">'+c[u]+"</a>":"")+"</div>",l[u]["margin-"+k[u]]+=t.split_size}j[u]&&t.collapsable&&(o[u]=t.collapsable),t.id&&(q[u]=t.id),t.is_header&&(z='<div class="bl_header" style="height:'+(t.header_height-1)+"px;line-height:"+(t.header_height-1)+'px;">'+t.header_content+"</div>"),x+='<div class="bl_inner" header="'+(t.is_header?t.header_height-1:0)+'">'+z+'<div class="bl_box_'+u+" bl_box"+this.id+'">'+("."!==t.url?'<iframe url="'+t.url+'" frameborder="0" class="bl_iframe_page"></iframe>':"")+"</div></div>",f[u]=x+=y+"</div>"}var B=b("<div class='bl_middle bl_middle"+this.id+"'></div>").append(f.left).append(f.center).append(f.right);if(d.append(f.top).append(B.html()?B:"").append(f.bottom).append("<div class='bl_overlay'></div>"),d.find(".bl_box"+this.id).each(function(){var a=this.className.match(/top|left|center|bottom|right/)[0];if(q[a]){var c=b("#"+q[a],d);b(this).wrapInner(c.css({height:"100%"}))}else{var c=d.children("[position="+a+"]");0==c.length&&(c=b("<div position='"+a+"'></div>")),b(this).wrapInner(c.css({height:"100%"}))}}),d.find(".bl_iframe_page").each(function(){b(this).attr("src",b(this).attr("url")).removeAttr("url")}),j.middle){var C=Math.max.apply(null,i);h.middle=C===-1?"auto":C}else h.middle="auto";this._setLayout(g,h),this._setBoxLayout(),this.options.designMode&&(d.css("border","1px solid #aaa"),0===a.length&&d.height("100%").append("Borderlayout"))},getContent:function(a){return b.grep(this.el.find(".bl_box"+this.id),function(b){var c=b.className.match(/top|left|center|bottom|right/)[0];if(a==c)return!0})[0]},_setLayout:function(a,c){var d=this,e=this.options.gap,f=this.el;d.auto_lays={width:[],height:[]};var g=e.split(" ");this.margin_v=parseInt(g[0],10)+(void 0===g[2]?parseInt(g[0],10):parseInt(g[2],10));var h=void 0===g[1]?parseInt(g[0],10):parseInt(g[1],10);this.margin_r=h+(void 0===g[3]?h:parseInt(g[3],10)),this.scope={};var i=this.scope=this._getParentLayout();a=this._separateAutoLayout(a,i.width,"width"),c=this._separateAutoLayout(c,i.height,"height"),this.layout=b.extend(a,c),this._setPartLayout();var j=b.client.height(),k=b.client.width();b(window).on("resize",function(){j===b.client.height()&&k===b.client.width()||(j=b.client.height(),k=b.client.width(),d._resizeHandle(!0),b(d).trigger("resize"))}),f.addClass("bl_main").css("padding",e)},_setPartLayout:function(){var a=this.layout,b=this.el;for(var c in a)b.find(".bl_"+c+this.id).eq(0).css(this._isCols(c)?"width":"height",a[c])},_resizeHandle:function(a){var b=this._getParentLayout();this._resetLayout(b,this.scope,a),this.scope.width=b.width,this.scope.height=b.height},_separateAutoLayout:function(a,b,c){var d=[],e={},f=this.options.fixed;for(var g in a)if(a.hasOwnProperty(g)){if(!f[g]){this.auto_lays[c].push(g),d.push(g);continue}a[g]="number"!=typeof a[g]?"width"===c?500:300:a[g],b-=a[g],e[g]=a[g]}for(var h=d.length;h--;)e[d[h]]=b/d.length;return e},_getParentLayout:function(){var c=this.el.parent().css({positon:"relative",overflow:"hidden"}),d=a.Browser,e=this.scope,f=document.createElement("div");f.style.width="100%",f.style.height="100%",f.style.positon="absolute",f.style.left=0,f.style.top=0,c.append(f);var g=b(f).width(),h=b(f).height();return 0===h&&(this.body=!0),this.body?h=d.isQM?window.innerHeight||document.documentElement.offsetHeight-4:b(window).height():c.css("overflow",""),b(f).remove(),c.css("positon",""),{width:e.fix_width||g-this.margin_r-1,height:e.fix_height||h-this.margin_v}},_setBoxLayout:function(){var a=this.el,b=this.box_height={},c=this.box_css;for(var d in c)if(c.hasOwnProperty(d)){var e=a.find(".bl_box_"+d).eq(0),f=e.parent();b[d]=f.parent().css("overflow","hidden").height()-f.attr("header")-0-c[d]["margin-top"]-c[d]["margin-bottom"],f.parent().css("overflow",""),f.css(c[d]),e.css("height",b[d])}},_resetLayout:function(a,b,c){var d=a.width-b.width,e=a.height-b.height;d&&this._setWidthAndHeight(d,"width",c),e&&this._setWidthAndHeight(e,"height",c)},setWidth:function(b){var c=a.Browser.isQM?b+this.margin_r:b;this.el.css("width",c),this.scope.fix_width=b,this._resizeHandle(!1)},setHeight:function(b){var c=a.Browser.isQM?b+this.margin_v:b;this.el.css("height",c),this.scope.fix_height=b,this._resizeHandle(!1)},_setWidthAndHeight:function(a,b,c){for(var d=this.el,e=this.auto_lays[b],f=e.length,g=this.layout,h=a,i=0,j=f;j--;)i+=g[e[j]];for(j=f;j--;){var k=Math.round(a*g[e[j]]/i),l=d.find(".bl_"+e[j]+this.id),m=0===j?h:k;h-=k,l.css(b,g[e[j]]+=m),"height"===b&&this._setBoxHeight(l,m)}c||this._childrenHandler()},_setBoxHeight:function(a,c){var d=this.box_height;a.find(".bl_box"+this.id).each(function(a,e){var f=b(e).attr("class").match(/top|left|center|bottom|right/)[0],g=d[f]+=c;b(e).css("height",Math.max(g,0)),g?b(e).show():b(e).hide()})},_bindHandler:function(){var a=this,b=this.el;b.find(".bl_top>.bl_move, .bl_bottom>.bl_move").on("mousedown",function(b){a._drag(b,this,"height")}),b.find(".bl_left>.bl_move, .bl_center>.bl_move, .bl_right>.bl_move").on("mousedown",function(b){a._drag(b,this,"width")}),b.find(".bl_top .bl_fold, .bl_bottom .bl_fold").on("mousedown",function(b){a._fold(b,this,"height")}),b.find(".bl_middle .bl_fold").on("mousedown",function(b){a._fold(b,this,"width")})},_drag:function(a,c,d){var e=b(c);if(e.find(".bl_unfold").length){a.stopPropagation(),a.preventDefault();var f,g=a.pageX,h=a.pageY,i=this,j=this.layout,k=this.min_size,l=this.max_size,m=e.parent(),n=m.prev(),o=m.next(),p=m.parent().not(".bl_main:eq(0)");n.length?o=m:n=m;var q=n.attr("class").match(/top|left|center|bottom|middle|right/)[0],r=o.attr("class").match(/top|left|center|bottom|middle|right/)[0],s=j[q],t=j[r],u=k[q],v=k[r],w=l[q],x=l[r];this.el.children(".bl_overlay").show().css("height",this.scope.height).css("cursor","width"===d?"col-resize":"row-resize").on("mousemove",function(a){a.stopPropagation(),a.preventDefault();var b=a.pageX,c=a.pageY,e=p.length?b-g:c-h;0===e||e*f>0||(f=0,void 0!==w&&(s+e>w||s+e<u)&&(e=e>0?w-s:u-s,f=e),void 0!==x&&(t-e>x||t-e<v)&&(e=e<0?t-x:t-v,f=e),n.css(d,s+=e),o.css(d,t-=e),"height"===d&&(i._setBoxHeight(n,e),i._setBoxHeight(o,-e)),h=c,g=b,i._childrenHandler())}).on("mouseup mouseout",function(a){a.stopPropagation(),b(this).hide().off("mousemove"),j[q]=j[q]===s?j[q]:s,j[r]=j[r]===t?j[r]:t})}},_fold:function(a,c,d){a.stopPropagation(),a.button>1||(this._foldAction(b(c).parent().parent(),d),b(this).trigger("fold"))},_foldAction:function(a,b,e){var f=this.layout,g=a.attr("class").match(/top|left|center|bottom|right/)[0],h=a.data("fold"),i=a.children(".bl_move,.bl_border").eq(0).children().eq(0);if(this.collapsable[g]){if(e===!0&&void 0!==h||e===!1&&void 0===h)return;if(void 0===h)return this._setWidthAndHeight(f[g],b),a.children(".bl_inner").hide(),a.data("fold",f[g]).css(b,f[g]=0),void i.removeClass("bl_unfold").html(d[g]);this._setWidthAndHeight(-h,b),i.addClass("bl_unfold").html(c[g]),a.children(".bl_inner").show(),a.removeData("fold").css(b,f[g]=h).children(".bl_inner")}},_childrenHandler:function(){var a=this.el.find("[uitype=Borderlayout]");a&&a.each(function(){window.cui(this)._resizeHandle()});var b=this.options.on_sizechange;b&&"function"==typeof b&&b()},setContentURL:function(a,b){var c=this.el.find(".bl_"+a+this.id).eq(0).find(".bl_box"+this.id).eq(0).children().eq(0),d=c.find(".bl_iframe_page");d.length?d.eq(0).attr("src",b):c.append('<iframe class="bl_iframe_page" src="'+b+'" frameborder="0"></iframe>')},setCollapse:function(a,c){this.options.fixed[a]&&this._foldAction(b(".bl_"+a+this.id),this._isCols(a)?"width":"height",c)},getCollapseState:function(a){return{collapsed:!!this.el.find(".bl_"+a+this.id).eq(0).data("fold"),contentHeight:this.box_height[a],contentWidth:this.el.find(".bl_"+a+this.id).eq(0).width()}},setGap:function(a){var b=this.options.gap=a,c=b.split(" ");this.el.css("padding",b),this.margin_v=parseInt(c[0],10)+(void 0===c[2]?parseInt(c[0],10):parseInt(c[2],10)),this._resizeHandle()},setTittle:function(a,c){b(".bl_"+a+this.id).find(".bl_header").eq(0).html(c)},setCollapsable:function(a,c){if(this.options.fixed[a]){this.collapsable[a]=c;var d=b(".bl_"+a).children(".bl_move,.bl_border").eq(0).children(".bl_fold").eq(0);if(c)return void d.show();d.hide()}},changeSize:function(a,b){this.options.fixed[a]&&b&&(this.layout[a]=this.layout[a]+b,this._setPartLayout(),this._setBoxLayout(),this._setWidthAndHeight(-b,this._isCols(a)?"width":"height"))}})}(window.comtop),function(a,b){function c(c,d,e,f){for(var g=null,h=0,j=c.length;h<j;h++)g=a.type(c[h]),"string"===g?c[h]=i(b.Date.parse(c[h],d,e,f),d,e,f)||null:"date"===g&&(c[h]=i(c[h],d,e,f)||null);return c}function d(a,c,d){for(var e=[],f=new Date(a.getTime()),g=d?f.getDay()-1:(f.getDay()||7)-1,h=0;h<6;h++)e.push([b.Date.getOnWeek(new Date(f.getTime()),c,d).week,0]),f.setDate(f.getDate()+(7-g)),g=0;return e}function e(a){function b(a,b,c){if(!b)return!1;var d=b.getFullYear(),e=b.getMonth(),f=b.getDate();return b=new Date(d,e,f,0,0,0,0),"mindate"===c?a.getTime()<b.getTime():a.getTime()>b.getTime()}var c,e,f,g,h,i,j,l=this,m=l.options,n=[],o=0,p=0,q=[],r=a.getFullYear(),s=a.getMonth();m.mindate[1]=k.call(l,"mindate"),m.maxdate[1]=k.call(l,"maxdate"),g=new Date(r,s,1).getDay(),h=new Date(r,s,0).getDate(),i=new Date(r,s+1,0).getDate(),m.sunday_first||g--,g<0&&(g=6);var t=s-1<0,u=s+1>11;for(c=0;c<g;c++)f=new Date(t?r-1:r,t?11:s-1,h,0,0,0,0),e=b(f,m.mindate[1],"mindate")||b(f,m.maxdate[1],"maxdate")?0:1,n.push([h,e,f.getFullYear(),f.getMonth()]),h--;for(n.reverse(),c=1;c<=i;c++)f=new Date(r,s,c,0,0,0,0),e=b(f,m.mindate[1],"mindate")||b(f,m.maxdate[1],"maxdate")?0:1,n.push([c,e,r,s]);for(c=1;c<=42-i-g;c++)f=new Date(u?r+1:r,u?0:s+1,c,0,0,0,0),e=b(f,m.mindate[1],"mindate")||b(f,m.maxdate[1],"maxdate")?0:1,n.push([c,e,f.getFullYear(),f.getMonth()]);for(j=d(a,m.iso8601,m.sunday_first),c=0;c<48;c++)0!=c&&c%8!=0?(q.push(n[o]),o++):(q.push(j[p]),p++);return{year:r,month:s,date:q}}function f(a,b){var c=[];if(b>0)for(var d=0;d<b;d++)c.push(a),a++;else{for(var d=0;d<-b;d++)c.push(a),a--;c.reverse()}return c}function g(a){var b=["1","2","3","4","5","6","7","8","9","10","11","12"],c=[];a=a||[0,11];for(var d=a[0];d<=a[1];d++)c.push([d,b[d]]);return c}function h(a,c,d){for(var e,f=[],g=31;g>0&&(e=b.Date.getOnWeek(new Date(a,11,g),c,d).week,1===e);g--);for(g=1;g<=e;g++)f.push([g,1]);return f}function i(a,c,d,e){if(!a)return null;var f=[],g=d,h=e;return f.push(a),f.push(b.Date.format(a,c,g,h)),f.push(a.getFullYear(),a.getMonth(),a.getDate()),f.push(a.getHours(),a.getMinutes(),a.getSeconds()),f}function j(a){if(!a||a.length<2||!a[0]||!a[1])return a;var b;return a[0][0]>a[1][0]&&(b=a[1],a[1]=a[0],a[0]=b),a}function k(c,d){var e,f=this,g=f.options,h=g[c][0],i=g.nocurrent;if(d="undefined"==typeof d||d,!h)return null;var j=/^([\+\-]{1})([0-9]{1,})([yMd]{1})$/,k=[null,null,null];if("string"==typeof h)if(/[\+\-]{1}[0-9]{1,}[yMd]{1}/.test(h)){for(var l,m,n=h.split(","),o=[0,0,0],p=[(new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()],q=0;q<n.length;q++)l=n[q].match(j),m="yMd".indexOf(l[3]),k[m]+=("+"===l[1]?1:-1)*+l[2]+p[m];for(q=0;q<k.length;q++)o[q]=null===k[q]?0:1;switch(o.join("-")){case"1-0-0":h="mindate"===c?new Date(k[0],0,1):new Date(k[0],11,31);break;case"1-1-0":h="mindate"===c?new Date(k[0],k[1],1):new Date(k[0],k[1],new Date(k[0],k[1]+1,0).getDate());break;case"1-1-1":i&&(k[2]="mindate"===c?k[2]+1:k[2]-1),h=new Date(k[0],k[1],k[2]);break;case"0-1-1":i&&(k[2]="mindate"===c?k[2]+1:k[2]-1),h=new Date(p[0],k[1],k[2]);break;case"0-0-1":i&&(k[2]="mindate"===c?k[2]+1:k[2]-1),h=new Date(p[0],p[1],k[2]);break;case"0-1-0":h="mindate"===c?new Date(p[0],k[1],1):new Date(p[0],k[1],new Date(k[0],k[1]+1,0).getDate());break;case"1-0-1":i&&(k[2]="mindate"===c?k[2]+1:k[2]-1),h=new Date(k[0],p[1],k[2])}h="maxdate"===c?new Date(h.getFullYear(),h.getMonth(),h.getDate(),23,59,59):new Date(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0)}else if(e=a(h).data("uitype")){if(!(h=e.getValue("date")))return null;i&&h.setDate("mindate"===c?h.getDate()+1:h.getDate()-1)}else{if(!/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}|[0-9]{4}\-[0-9]{2}|[0-9]{4}|[0-9]{4}\-[0-9]{2}\-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}$/.test(h))return null;/^[0-9]{4}\-[0-9]{2}\-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}$/.test(h)&&(h=b.Date.parse(h,"yyyy-MM-dd hh:mm:ss"),i&&h.setDate("mindate"===c?h.getDate()+1:h.getDate()-1)),/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}$/.test(h)&&(h=b.Date.parse(h,"yyyy-MM-dd"),i&&h.setDate("mindate"===c?h.getDate()+1:h.getDate()-1),h="maxdate"===c?new Date(h.getFullYear(),h.getMonth(),h.getDate(),23,59,59):new Date(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0))}else h="date"===a.type(h)?h:null,i&&h&&h.setDate("mindate"===c?h.getDate()+1:h.getDate()-1);return d?new Date(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),0,0):new Date(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0,0,0)}function l(b,c){var d=b.children(".C_CR_YM_wrap");if("hide"===c)d.hide();else{switch(c){case"disYear":d.find("span.C_CR_YMer_tx_y").parents("td").eq(0).hide().next().hide();break;case"disMonth":d.find(".C_CR_YMer").each(function(b,c){a(c).children("tbody").children("tr").children("td").slice(2).hide()});break;case"dis":d.find("span.C_CR_YMer_tx_wrap").parents("table").find("td").hide();break;case"unDis":default:d.find("span.C_CR_YMer_tx_wrap").parents("table").find("td").show()}d.show()}}function m(b,c,d){var e=a("table.C_CR_YMer:eq("+d+")",b).attr("val",c.year+"|"+(c.month-1)).find("input.C_CR_tx");e.eq(0).val(c.year),e.eq(1).val(c.month)}function n(a){var b=this,c=b.options;(c.activePop||a)&&(c.activePop&&c.activePop.hide(),a&&(a.show(),c.activePop=a))}function o(){var a=this,b=a.options,c=b.pEl.children(".C_CR_OPBar_wrap").children("a").show(),d=c.filter('[val^="ok"]'),e=c.filter('[val^="clear"]'),f=c.filter('[val^="cur"]'),g={
date:"\u4eca&nbsp;\u5929",month:"\u672c&nbsp;\u6708",year:"\u672c&nbsp;\u5e74",quarter:"\u672c\u5b63\u5ea6",week:"\u672c&nbsp;\u5468"};f.html(g[b.curModel[0]]),b.okbtn||d.hide(),b.clearbtn||e.hide()}function p(){var b=this,c=b.options,d=c.pEl.children(".C_CR_Timer_box"),e=[/s/.test(c.format),/m/.test(c.format),/h/.test(c.format)];e[0]||c.pEl.find("td.C_CR_Timer_com_s").hide().prev().hide(),e[1]||c.pEl.find("td.C_CR_Timer_com_m").hide().prev().hide(),e[2]||c.pEl.find("td.C_CR_Timer_com_h").hide().prev().hide(),b.$tmp.$timeHour=a("div.C_CR_Timer_pop_h",d),b.$tmp.$timeMin=a("div.C_CR_Timer_pop_m",d),b.$tmp.$timeSecond=a("div.C_CR_Timer_pop_s",d)}function q(){var a=this,b=a.options,c=b.pEl.children(".C_CR_Timer_box");"date"===b.curModel[0]&&/[h|s|m]/.test(b.format)?c.show():c.hide()}function r(b,c){var d,e=this,f=e.options,g=a(".C_CR_Tag_wrap a",f.pEl);g.each(function(e,f){var g=a(f);g.hide();for(var h=0,i=b.length;h<i;h++)d=g.attr("val"),d===b[h]&&g.show(),d===c&&g.addClass("C_CR_Tag_cur")})}function s(b,c,d){var e,f=this,g=f.options,h=g.curModel[0];switch(c){case"CUR":e="C_CR_main_cur";break;case"SEL":e="C_CR_main_cur_d";break;case"clear":return void a("td.C_CR_main_cur_d",g.pEl).removeClass("C_CR_main_cur_d")}if(b)b.parent("td").addClass(e);else for(var i=0;i<d.length;i++)2==a("#C_CR_"+h+"_"+d[i].join("_")+"_"+g.uuid,".C_CR_Date").length?a("#C_CR_"+h+"_"+d[i].join("_")+"_"+g.uuid,".C_CR_Date").eq(i).parent("td").addClass(e):a("#C_CR_"+h+"_"+d[i].join("_")+"_"+g.uuid).parent("td").addClass(e)}function t(b){var c=this,d=c.options,e=a(".C_CR_Tip",d.pEl);e.text(b).fadeIn("fast"),setTimeout(function(){e.fadeOut("fast")},1e3)}function u(a){var c=a.panel,d=226*c;a.pEl.css("width",d+3*(a.panel-1));var e=a.pEl.outerWidth(),f=a.pEl.outerHeight();(b.Browser.isIE6||b.Browser.isQM)&&a.pEl.find("iframe").css({width:e,height:f})}function v(b){var c=a(window),d=b.el.children(".C_CR_calInput_bd"),e=d.offset(),f=d.outerHeight(),g=d.outerWidth(),h=c.width(),i=c.height(),j=c.scrollLeft(),k=c.scrollTop(),l=b.pEl.outerWidth(),m=b.pEl.outerHeight(),n=a(document).height(),o={};h-(e.left-j)>l?o.left=e.left:e.left-j+g>l?o.left=e.left+g-l:o.left=0,n-e.top-f>m&&i-(e.top-k)-f>m?o.top=e.top+f:e.top-k>m?o.top=e.top-m:(o.top=k+(i-m)/2,h-(e.left-j+g)>l?o.left=e.left+g:e.left-j+g>l?o.left=e.left-g:o.left=0),o.left=o.left<0?0:o.left,o.top=o.top<0?0:o.top,b.pEl.css(o),b.isBuild||(b.isBuild=!0)}function w(){var a=document.createElement("input"),b="onpaste";return a.setAttribute(b,""),"function"==typeof a[b]?"paste":"input"}var x=null;b.UI.Calender=b.UI.Base.extend({options:{uitype:"Calender",name:"",model:"date",isrange:!1,trigger:"click",value:[],defdate:"",format:"",entering:!1,emptytext:"",readonly:!1,disable:!1,icon:!0,textmode:!1,panel:1,panel_increase:!0,zindex:11e3,width:"200px",okbtn:!1,clearbtn:!0,mindate:null,maxdate:null,nocurrent:!1,iso8601:!1,on_before_show:null,on_change:null,separator:!1,sunday_first:!1},tipPosition:".C_CR_calInput_bd",_init:function(c){var d=this,e=d.options;if(/GMT/.test(c.value)&&(c.value=new Date(c.value)),c.value){var f=a.type(c.value);switch(f){case"string":e.value=/^(?:\{.*\}|\[.*\])$/.test(c.value)?a.parseJSON(c.value.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'")):[c.value];break;case"array":e.value=c.value;break;default:e.value=[c.value]}}"string"===a.type(e.value)&&(e.value=[e.value]),c.width&&("string"==typeof c.width&&/^(\d)+(px|pt|em|PX|PT|EM|%)$/.test(c.width)?e.width=c.width:e.width=c.width+"px"),e.value=null===e.value?[]:e.value,e.mindate=[c.mindate,null],e.maxdate=[c.maxdate,null],e.uuid=b.guid(),e.template="calender.html",e.curModel=[],e.formatList={date:"yyyy-MM-dd",year:"yyyy",quarter:"yyyy-q",month:"yyyy-MM",week:"yyyy-w"},e.inputFocusClass="C_CR_calInput_focus",e.inputDisClass="C_CR_calInput_rd",e.inputErrClass="C_CR_calInput_err",e.selDate=[],e.cache={yearPop:{},selDate:[]},e.isBuild=!1,e.inputEl=null,e.tipTxt=null,e.pEl=null,e.datePanel=[],e.yearPanel=[],e.monthPanel=[],e.quarterPanel=[],e.timePanel=[],e.weekPanel=[],e.yearPop={forDate:[],forYear:[],forQuarter:[],forMonth:[],forWeek:[]},e.selIndex=0,e.activePop=null,e.isChangeTag=!1,e.tags=[],e.maskCL="",e.dblclickTime=null,e.defaultDate,d.$tmp={},""!==e.defdate&&d._analyzeDefDate();var g=e.model.split(";");1===g.length?e.tags="all"===g[0]?["date","year","quarter","month","week"]:g:(e.tags=g,e.model="all");var h=e.tags[0];e.curModel=[h,"for"+h.charAt(0).toUpperCase()+h.substring(1),h+"Frame",h+"Panel"],"all"===e.model&&e.format?(e.format=a.parseJSON(e.format.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'")),e.formatList=a.extend(e.formatList,e.format),e.format=e.formatList[e.curModel[0]]):e.format?e.formatList[e.curModel[0]]=e.format:e.format=e.formatList[e.curModel[0]],e.okbtn=!/[y|M|q|w|d]/.test(e.format)||e.okbtn},_create:function(){var b=this,c=b.options;c.inputEl=c.el.find(":text").bind("click",function(){c.readonly||c.designMode||(a(this).parents(".C_CR_calInput_bd").addClass(c.inputFocusClass),b.show(),b._setEmptyText(!1),b.onValid())}).bind("mouseup.calender",function(a){a.stopPropagation()}),b._getDefault(),b.setValue(a.extend(!0,[],c.selDate),!0);for(var d=0;d<c.cache.selDate.length;d++)if(null===c.cache.selDate[d]){c.selIndex=d;break}(c.disable||c.readonly)&&c.el.children(".C_CR_calInput_bd").addClass(c.inputDisClass),(!c.entering||c.disable||c.readonly)&&(c.disable&&c.inputEl.attr("disabled",!0),!c.readonly&&c.entering||c.inputEl.attr("readonly",!0)),c.entering&&(b._enter(),c.inputEl.on("keyup.calender",function(a){b.hide(),13===a.which&&c.inputEl.blur()}))},_enter:function(){var a=this,b=a.options,c=b.format,d=b.format,e=function(a,b){for(var c=[/y+/,/M+/,/d+/,/h+/,/m+/,/s+/,/w+/,/q+/],d=0;d<c.length;d++)a=a.replace(c[d],b[d]);return a};c=e(c,["9999","1x","3z","2r","59","59","5k","q"]),d=e(d,["yyyy","MM","dd","hh","mm","ss","ww","q"]),b.inputEl.data("fmOpts",{format:b.format,fullFormat:d,isRange:b.isrange,okBtn:b.okbtn,separator:b.separator}).unmaskCL().maskCL(b.isrange?c+"~"+c:c),b.maskCL=b.isrange?c+"~"+c:c},_analyzeDefDate:function(){var a,b,c,d,e,f,g=new Date,h=this,i=h.options;a=i.defdate.match(/y:(\d*)/),b=i.defdate.match(/M:(\d*)/),c=i.defdate.match(/d:(\d*)/),d=i.defdate.match(/h:(\d*)/),e=i.defdate.match(/m:(\d*)/),f=i.defdate.match(/s:(\d*)/),i.defaultDate=new Date(a?a[1]-0:g.getFullYear(),b?b[1]-0-1:g.getMonth(),c?c[1]-0:1,d?d[1]-0:g.getHours(),e?e[1]-0:g.getMinutes(),f?f[1]-0:g.getSeconds())},_getDefault:function(){var b=this,d=b.options,e=[];0!==d.value.length?e=d.value:d.isrange?(e=a.trim(d.inputEl.eq(0).val()).split("~"),e=e.join("")?e:[null,null]):a.each(d.inputEl,function(b,c){e.push(a.trim(a(this).val()))}),d.selDate=j(c(e,d.format,d.iso8601,d.sunday_first))},_buildData:function(c,d){var j,k,l,m,n,o,p=this,q=p.options;if(q.isBuild&&(void 0===d?(q[q.curModel[3]]=[],q.yearPop[q.curModel[1]]=[]):(o=!p._isReady("yearPop",d),q[q.curModel[3]][d]=[],o&&(q.yearPop[q.curModel[1]][d]=[]))),!q.isBuild&&"all"===q.model||"date"===q.curModel[0])if(void 0===d)for(m=0;m<q.panel;m++)j=c[m]?new Date(c[m][0],c[m][1],1):new Date(j.getFullYear(),q.panel_increase?j.getMonth()+1:j.getMonth(),1),q.yearPop.forDate.push(f(j.getFullYear()-4,12)),q.datePanel.push(e.call(p,j));else j=new Date(c[0][0],c[0][1],1),o&&(q.yearPop.forDate[d]=f(j.getFullYear()-4,12)),q.datePanel[d]=e.call(p,j);if(!q.isBuild&&"all"===q.model||"year"===q.curModel[0])if(void 0===d)for(m=0;m<q.panel;m++)n=c[m]?c[m][0]:q.yearPanel[m-1].data[11]+14,q.yearPop.forYear.push(f(n-4,12)),q.yearPanel.push({year:n,month:null,data:f(n-7,18)});else n=c[0][0],o&&(q.yearPop.forYear[d]=f(n-4,12)),q.yearPanel[d]={year:n,month:null,data:f(n-7,18)};if(!q.isBuild&&"all"===q.model||"month"===q.curModel[0])if(void 0===d)for(m=0;m<q.panel;m++)n=c[m]?c[m][0]:q.monthPanel[m-1].year+1,q.yearPop.forMonth.push(f(n-4,12)),q.monthPanel.push({year:n,month:null,data:g()});else n=c[0][0],o&&(q.yearPop.forMonth[d]=f(n-4,12)),q.monthPanel[d]={year:n,month:null,data:g()};if(!q.isBuild&&"all"===q.model||"quarter"===q.curModel[0])if(void 0===d)for(m=0;m<q.panel;m++)n=c[m]?c[m][0]:q.quarterPanel[m-1].year+1,q.yearPop.forQuarter.push(f(n-4,12)),q.quarterPanel.push({year:n,month:null,quarter:[1,2,3,4]});else n=c[0][0],o&&(q.yearPop.forQuarter[d]=f(n-4,12)),q.quarterPanel[d]={year:n,month:null,quarter:[1,2,3,4]};if(!q.isBuild&&"all"===q.model||"date"===q.curModel[0]){var r;for(q.timePanel=[],r=q.isrange?2:1,k=0;k<r;k++)l=q.cache.selDate[k]?q.cache.selDate[k]:i(q.defaultDate||new Date,q.format,q.iso8601,q.sunday_first),q.timePanel.push([l[5],l[6],l[7]])}if(!q.isBuild&&"all"===q.model||"week"===q.curModel[0]){var s;if(void 0===d)for(m=0;m<q.panel;m++)c[m]&&(s=b.Date.getOnWeek(new Date(c[m][0],c[m][1]>0?c[m][1]:1,c[m][2]||1),q.iso8601,q.sunday_first)),n=c[m]?s.year:q.weekPanel[m-1].year+1,q.yearPop.forWeek.push(f(n-4,12)),q.weekPanel.push({year:n,month:null,data:h(n,q.iso8601,q.sunday_first)});else n=c[0][0],o&&(q.yearPop.forWeek[d]=f(n-4,12)),q.weekPanel[d]={year:n,month:null,data:h(n,q.iso8601,q.sunday_first)}}q.cache.yearPop=a.extend(!0,{},q.yearPop)},_buildUpdateDate:function(){var a,b,c,d=this,e=d.options,f=e.defaultDate||new Date,g=[],h=[];for("date"===e.model&&(a=k.call(d,"mindate"),b=k.call(d,"maxdate"),a=void 0!==e.mindate[0]?null===a?0:a:0,f=0===a?f:a-f>0?a:f,b=void 0!==e.maxdate[0]?null===b?0:b:0,f=0===b?f:b-f<0?b:f,f=f||new Date),f=i(f,e.format,e.iso8601,e.sunday_first),c=0;c<e.cache.selDate.length;c++)0===c?(h.push(e.cache.selDate[c]?e.cache.selDate[c]:f),g.push([h[c][2],h[c][3],h[c][4]])):e.cache.selDate[c]&&(h.push(e.cache.selDate[c]),g.push([h[c][2],h[c][3],h[c][4]]));return g},_draw:function(){var b=this,c=b.options;b._buildData(b._buildUpdateDate()),b._buildTemplate("body","calFrame",a.extend(!0,{},c),!0),c.pEl=a("#C_CR_"+c.uuid),c.pEl.on("click","a",function(a){a.preventDefault()})},_drawYearPop:function(a,b){var c,d=this,e=d.options,f=e.pEl.children(".C_CR_YM_wrap").find("div.C_CR_YMer_pop_y");if(c=e.yearPop[a]||[],"undefined"!=typeof b)d._buildTemplate(f.eq(b),"yearPopFrame",c[b]);else for(var g=0;g<c.length;g++)d._buildTemplate(f.eq(g),"yearPopFrame",c[g])},_tagEventHandle:function(b,c,d){b.stopPropagation();var e=this,f=e.options,g=d.nodeName;if(n.call(e),"A"===g){var h=a(d),i=h.attr("val");h.parents("ul").find("a").removeClass("C_CR_Tag_cur"),h.addClass("C_CR_Tag_cur"),f.curModel=[i,"for"+i.charAt(0).toUpperCase()+i.substring(1),i+"Frame",i+"Panel"],f.cache.selDate=[],f.isChangeTag=!0,e._selectTag(f.curModel)}},_binderHandler:function(a,b,c){a.stopPropagation();var d=this,e=d.options,f=c.nodeName;e.readonly||e.disable||"true"!==e.el.attr("isShow")&&(e.el.attr("isShow","true"),"INPUT"!==f&&e.inputEl.click())},_mainEventHandle:function(b,c,d){b.stopPropagation();var e=this,f=e.options,g=a(d),h=g[0].nodeName;if(n.call(e),"A"===h){for(var i=g.attr("val").split("|"),j=0;j<i.length;j++)i[j]=+i[j];e.options.dblclickTime||e._cachingDate(i,g),f.okbtn&&(e.options.dblclickTime?(clearTimeout(e.options.dblclickTime),e.options.dblclickTime=null,e._export()):e.options.dblclickTime=setTimeout(function(){e.options.dblclickTime=null},300))}},_ymEventHandle:function(b,c,d){b.stopPropagation();var e,f,g=this,h=g.options,i=a(d),j=i[0].nodeName;if("A"===j)switch(e=i.attr("val"),f=+i.parents(".C_CR_YMer_item:eq(0)").attr("popIndex"),e){case"prevMonth":n.call(g),"date"===h.curModel[0]?g._selectMonthYear("month",null,null,-1):"year"===h.curModel[0]?g._selectMonthYear("year",null,null,-18):g._selectMonthYear("year",null,null,-1);break;case"nextMonth":n.call(g),"date"===h.curModel[0]?g._selectMonthYear("month",null,null,1):"year"===h.curModel[0]?g._selectMonthYear("year",null,null,18):g._selectMonthYear("year",null,null,1);break;case"prevPop":g._changeYear(-12,f);break;case"nextPop":g._changeYear(12,f);break;case"closePop":n.call(g);break;default:g._closeYMerPop(!0),e=Number(e),"y"===i.attr("panel")?g._selectMonthYear("year",e,f):g._selectMonthYear("month",e,f)}else"INPUT"===j||"SPAN"===j?(i=i.children("input").size()?i.children("input"):i,g._closeYMerPop(!1,i),i.blur()):n.call(g)},_timerEventHandle:function(b,c,d){b.stopPropagation();var e,f,g=this,h=a(d),i=h[0].nodeName;if("SPAN"===i){switch(e=h.attr("val")){case"up":g._selectTime(h,1);break;case"down":g._selectTime(h,-1)}n.call(g)}else if("INPUT"===i){switch(h.eq(0).select(),h.attr("val")){case"h":f=g.$tmp.$timeHour;break;case"m":f=g.$tmp.$timeMin;break;case"s":f=g.$tmp.$timeSecond}g.$tmp.curTimeTxt=h,n.call(g,f)}else if("A"===i){if("C_CR_Timer_up"===h.attr("class")||"C_CR_Timer_down"===h.attr("class")){switch(h=h.children("span"),e=h.attr("val")){case"up":g._selectTime(h,1);break;case"down":g._selectTime(h,-1)}return void n.call(g)}e=h.attr("val"),g.$tmp.curTimeTxt&&g.$tmp.curTimeTxt.val(e<10?"0"+e:e),n.call(g)}},_btnEventHandle:function(c,d,e){c.stopPropagation();var f,g=this,h=g.options,j=a(e),k=j.attr("val");switch(n.call(g),k){case"close":g.hide();break;case"cur":var l=new Date,m=i(l,h.format,h.iso8601,h.sunday_first);"quarter"===h.curModel[0]?g._cachingDate([m[2],Math.floor(m[3]/3)+1,1],null,"btn"):"week"===h.curModel[0]?g._cachingDate([m[2],b.Date.getOnWeek(new Date(m[0]),h.iso8601,h.sunday_first).week],null,"btn"):g._cachingDate([m[2],m[3],m[4]],null,"btn");break;case"clear":s.call(g,null,"clear",null),h.selIndex=0,g.setValue(h.isrange?["",""]:[""]),h.entering&&"function"==typeof h.inputEl.data("fmOpts").clearBuffer&&h.inputEl.data("fmOpts").clearBuffer(0,h.inputEl.data("fmOpts").buffer.length),g._update(g._buildUpdateDate());break;case"ok":f=i(new Date,h.format,h.iso8601,h.sunday_first),h.cache.selDate=h.cache.selDate[0]?h.cache.selDate:h.isrange?[f,f]:[f],g._export()}},_bindTimerEvent:function(){var b=this,c=b.options;c.pEl.children(".C_CR_Timer_box").find("input").on("input propertychange",function(b){var c=a(this),d=a.trim(c.val());switch(/^[0-9]*$/.test(d)||c.val(d.substr(0,d.length-1)),c.attr("name")){case"timer_h":d-0>=24&&c.val(d.substr(0,d.length-1));break;default:d-0>=60&&c.val(d.substr(0,d.length-1))}})},_selectTag:function(b){var c=this,d=c.options,e=d.pEl.children(".C_CR_main_wrap"),f=e.children(".C_CR_main_loading"),g=e.children(".C_CR_main_panel[val="+b[0]+"]"),h=g.siblings(),i="true"===g.attr("isBuild");d.cache.selDate=a.extend(!0,[],d.selDate),d.format=d.formatList[b[0]],h.hide(),f.show(),"all"!==b[0]&&"date"!==b[0]?l(d.pEl,"disMonth"):l(d.pEl,"undo"),i?i&&!c._isReady("mainPanel")?c._update(c._buildUpdateDate()):s.call(c,null,"clear",null):(c._buildTemplate(g,b[2],d),g.attr("isBuild","true")),f.hide(),g.show(),o.call(c),d.isBuild||("all"===d.model||"date"===b[0]&&/[h|m|s]/.test(d.format))&&(c._buildTemplate(d.pEl.children(".C_CR_Timer_box"),"timeFrame",d),p.call(c),c._bindTimerEvent()),q.call(c),"all"===d.model&&(u(d),v(d)),c._setYM(b[0]),c._scanFocus(),d.isBuild&&n.call(c),d.entering&&d.isChangeTag&&(c._clear(),c._enter(),d.isChangeTag=!1)},_selectMonthYear:function(b,c,d,e){function f(a){g=h.eq(a).attr("val").split("|"),g[l]="undefined"!=typeof e?Number(g[l])+e:c,k.push([Number(g[0]),Number(g[1])])}var g,h,i=this,j=i.options,k=[],l="month"===b?1:0;if(h=a("table.C_CR_YMer",j.pEl),"undefined"!=typeof d&&null!=d)f(d);else for(var m=0;m<h.length;m++)f(m);i._update(k,d)},_selectTime:function(b,c){var d,e,f,g;e=b.parents(".C_CR_Timer_op").eq(0),f=e.prev().children("input"),d=+a.trim(f.val()),g=d+c,"timer_h"===f.attr("name")?g>23?g=0:g<0&&(g=23):g>59?g=0:g<0&&(g=59),g=String(g),f.val(1===g.length?0+g:g)},_cachingDate:function(a,c,d){var e=this,f=e.options,g=null,h=null,j=null;switch(f.isrange?(2===f.selIndex||0===f.selIndex)&&e._clear(f.okbtn):e._clear(f.okbtn),f.curModel[0]){case"date":g=e._getTime(f.selIndex),h=new Date(a[0],a[1],a[2],g[0],g[1],g[2]);break;case"year":h=new Date(a[0],0,1);break;case"month":h=new Date(a[0],a[1],1);break;case"quarter":h=new Date(a[0],3*(a[1]-1),1);break;case"week":h=b.Date.getWeekRange(a[0],a[1],f.iso8601,f.sunday_first)[0]}if(j=i(h,f.format,f.iso8601,f.sunday_first),f.cache.selDate[f.selIndex]=j,f.isrange){f.selIndex=0;for(var k=0;k<f.cache.selDate.length;k++){if(null===f.cache.selDate[k]){f.selIndex=k;break}f.selIndex++}}else f.selIndex++;e._focus([h],"SEL",c),f.okbtn&&(/[h|m|s]/.test(f.format)||"btn"!==d||f.isrange!==!1)&&"dblclick"!==d||e._export()},_changeYear:function(a,b){var c,d=this,e=d.options,g=e.yearPop[e.curModel[1]];a>0?c=f(g[b][g[b].length-1]+1,a):a<0&&(c=f(g[b][0]-1,a)),e.yearPop[e.curModel[1]][b]=c,d._drawYearPop(e.curModel[1],b)},_getTime:function(b){var c=this,d=c.options,e=[],f=null,g=a("table.C_CR_Timer",d.pEl).eq(b);return f=g.find(":text"),e.push(+f.eq(0).val()||0,+f.eq(1).val()||0,+f.eq(2).val()||0),e},_update:function(a,b){var c,d=this,e=d.options;c=e.pEl.children(".C_CR_main_wrap").children(".C_CR_main_panel[val="+e.curModel[0]+"]"),"undefined"!=typeof b&&null!==b?d._buildData(a,b):d._buildData(a,void 0),d._buildTemplate(c,e.curModel[2],e),("all"===e.model||"date"===e.model&&/[h|m|s]/.test(e.format))&&d._setTime(e.selDate),d._setYM(e.curModel[0]),d._scanFocus()},_setYM:function(a){var b,c=this,d=c.options;b=d[a+"Panel"];for(var e=0,f=b.length;e<f;e++)m(d.pEl,{year:b[e].year,month:null!=b[e].month?b[e].month+1:""},e)},_setTime:function(b){var c,d,e,f,g,h=this,i=h.options;c=a("table.C_CR_Timer",i.pEl);for(var j=0;j<c.length;j++)d=c.eq(j).find(":text"),b[j]&&(e=b[j][5],f=b[j][6],g=b[j][7],d.eq(0).val(e<10?"0"+e:e),d.eq(1).val(f<10?"0"+f:f),d.eq(2).val(g<10?"0"+g:g))},_closeYMerPop:function(b,c){var d=this,e=d.options,f=null,g=null,h=c?c.parents(".C_CR_YMer_item"):null;n.call(d,b?null:h.children(".C_CR_YMer_pop"),"ym"),h&&(f=h.attr("pop"),g=h.attr("popIndex")),"year"===f&&(""===g||d._isReady("yearPop",g)||(e.yearPop=a.extend(!0,{},e.cache.yearPop),setTimeout(function(){d._drawYearPop(e.curModel[1],g)},50)))},_scanFocus:function(){for(var a=this,b=a.options,c=(b.inputEl.index(a.eventEl),[]),d=0;d<b.cache.selDate.length;d++)b.cache.selDate[d]&&c.push(b.cache.selDate[d][0]);a._focus(c,"SEL"),a._focus([new Date],"CUR")},_focus:function(a,c,d){for(var e=this,f=e.options,g=[],h=0;h<a.length;h++){switch(f.curModel[0]){case"date":a[h]=[a[h].getFullYear(),a[h].getMonth(),a[h].getDate()];break;case"year":a[h]=[a[h].getFullYear()];break;case"month":a[h]=[a[h].getFullYear(),a[h].getMonth()];break;case"quarter":a[h]=[a[h].getFullYear(),Math.floor(a[h].getMonth()/3)+1];break;case"week":a[h]=[a[h].getFullYear(),b.Date.getOnWeek(a[h],f.iso8601,f.sunday_first).week]}g.push(a[h])}s.call(e,d,c,g)},_clear:function(a){var b=this,c=b.options;a||(c.inputEl.val(""),c.value=c.isrange?["",""]:[""],c.selDate=c.isrange?[null,null]:[null]),c.cache.selDate=c.isrange?[null,null]:[null],c.selIndex=0,c.entering&&c.inputEl.data("fmOpts").clearBuffer&&c.inputEl.data("fmOpts").clearBuffer(0,c.maskCL.length),s.call(b,null,"clear",null)},_export:function(){function a(){for(var a=f.cache.selDate.length,b=0;b<a;b++)f.cache.selDate[b]&&(g=e._getTime(b),c=f.cache.selDate[b],c=new Date(c[2],c[3],c[4],g[0],g[1],g[2]),c=i(c,f.format,f.iso8601,f.sunday_first),f.cache.selDate[b]=c)}var b,c,d,e=this,f=e.options,g=null,h=!0;if(f.isrange){f.cache.selDate=j(f.cache.selDate),a(),b=[f.cache.selDate[0]?f.cache.selDate[0][1]:"",f.cache.selDate[1]?f.cache.selDate[1][1]:""];for(var k=0;k<b.length;k++)b[k]||(h=!1);h=!!f.okbtn||h}else a(),b=f.cache.selDate[0]?f.cache.selDate[0][1]:"";d=e.setValue(b),h="object"==typeof d?h:d,h&&e.hide()},_isReady:function(c,d){function e(a,b){return a=a?a.getTime():a,b=b?b.getTime():b,a!=b}var f,g,h,i,j=this,l=j.options,m=l.curModel[0];if("mainPanel"===c){h=l.cache.selDate,i=l[l.curModel[3]],f=e(l.mindate[1],k.call(j,"mindate"))||e(l.maxdate[1],k.call(j,"maxdate"));for(var n=0;n<h.length;n++)if(null!==h[n]){for(var o=0;o<i.length;o++){switch(m){case"date":g=h[n][2]===i[o].year&&h[n][3]===i[o].month;break;case"year":for(var p=0;p<i[o].data.length;p++){if(h[n][2]===i[o].data[p]){g=!0;break}g=!1}break;case"week":var q=b.Date.getOnWeek(h[n][0],l.iso8601,l.sunday_first);g=q.year===i[o].year;break;default:g=h[n][2]===i[o].year}if(g)break}if(!g)break}else g=!0;g=g&&!f}else"yearPop"===c&&(h=l[l.curModel[3]][d].year,i=l.pEl.children(".C_CR_YM_wrap").find("div.C_CR_YMer_pop_y:eq("+d+")>table").attr("val")||"none",g=a.trim(i).indexOf(h+"")>=0);return g},_setEmptyText:function(a){var b=this,c=b.options;a?c.el.find(".C_CR_emptytext").html(c.emptytext):c.el.find(".C_CR_emptytext").html("")},show:function(){var b=this,d=b.options,e=!0;if(!d.designMode)return e="function"!=typeof d.on_before_show||d.on_before_show(b,b.getValue()),!e||d.disable?(d.inputEl.blur(),d.inputEl.parents(".C_CR_calInput_bd").removeClass(d.inputFocusClass),!1):(x&&x.hide(),d.isBuild?(d.selDate=c(a.extend([],d.selDate),d.format,d.iso8601,d.sunday_first),d.cache.selDate=a.extend([],d.selDate),b._update(b._buildUpdateDate()),d.pEl.show()):(b._draw(),r.call(b,d.tags,d.curModel[0]),d.pEl.show(),b._selectTag(d.curModel)),d.isBuild&&"all"!==d.model||u(d),v(d),x=b,a(document).unbind("mouseup.calender").one("mouseup.calender",function(a){a.stopPropagation(),x&&x.hide(),x=null}),b)},hide:function(){var a=this,b=a.options;return b.disable||!b.pEl?a:(b.el.attr("isShow","false"),n.call(a),b.pEl.hide(),b.inputEl.parents(".C_CR_calInput_bd").removeClass(b.inputFocusClass),""===b.inputEl.val()&&a._setEmptyText(!0),s.call(a,null,"clear",null),x=null,b.cache.selDate=b.isrange?[null,null]:[null],a)},setPanel:function(b){var d=this,e=d.options,f=[];return b&&(b="number"===a.type(b)?b+"":b,b=b||null,b="array"!==a.type(b)?[b]:b,0!==b.length&&(f=c(a.extend(!0,[],b),e.format,e.iso8601,e.sunday_first)),e.selDate=a.extend(!0,[],f),e.cache.selDate=a.extend(!0,[],f)),d},setValue:function(d,e,f){var g=this,h=g.options,i=[],j=[],l=a.extend({},h.formatList),m=!0;if(f=f||"select",h.disable)return g;if(d="number"===a.type(d)?d+"":d,d=d||null,d="array"!==a.type(d)?[d]:d,h.value=[],0!==d.length){if(i=c(a.extend(!0,[],d),h.format,h.iso8601,h.sunday_first),!e){var n=k.call(g,"maxdate",!0),o=k.call(g,"mindate",!0);a.each(i,function(a,b){if(null!=b){if(n&&b[0]-n>0)return i[a]=null,t.call(g,"\u6240\u9009\u65e5\u671f\u8d85\u51fa\u6700\u5927\u65e5\u671f\u8303\u56f4"),"entering"===f&&g._clear(!1),m=!1,!0;if(o&&o-b[0]>0)return i[a]=null,t.call(g,"\u6240\u9009\u65e5\u671f\u8d85\u51fa\u6700\u5c0f\u65e5\u671f\u8303\u56f4"),"entering"===f&&g._clear(!1),m=!1,!0}})}h.selDate=a.extend(!0,[],i),h.cache.selDate=a.extend(!0,[],i)}if(h.selIndex=0,!m)return!1;for(var p=0;p<i.length;p++)i[p]&&h.selIndex++,h.value.push(i[p]?i[p][1]:""),j.push(i[p]?b.Date.format(i[p][0],l[h.curModel[0]],h.iso8601,h.sunday_first):"");j=j.join("~"),d=/^~$/.test(j)?"":/^.*~$/.test(j)?h.separator?j:j=j.replace("~",""):j,h.inputEl.eq(0).val(d);var q=!1;if(q=h.isrange?"~"===j:""===j,g._setEmptyText(q),e?g.onValid():g._triggerHandler("change"),"function"==typeof h.on_change&&!e){if(h.designMode)return;h.on_change.apply(g,a.extend(!0,[],i))}return clearTimeout(h.el.data("timeOut")-0),g},getValue:function(a){var c=this,d=c.options,e=[];if(d.disable)return"";a=a?a:"string";for(var f=d.isrange?2:1,g=0;g<f;g++)d.value[g]?"date"===a?e[g]=b.Date.parse(d.value[g],d.format,d.iso8601,d.sunday_first):e[g]=d.value[g]:(e[g]="string"===a?"":null,d.value[g]="string"===a?"":null);return d.isrange?e:e[0]},setMaxDate:function(a){var c=this.options;if("date"===c.model)switch(typeof a){case"string":/\d{4}(\-\d{2}){2}/.test(a)&&(c.maxdate[0]=a);break;case"object":c.maxdate[0]=b.Date.format(a,"yyyy-MM-dd hh:mm:ss")}},setMinDate:function(a){var c=this.options;if("date"===c.model)switch(typeof a){case"string":/\d{4}(\-\d{2}){2}/.test(a)&&(c.mindate[0]=a);break;case"object":c.mindate[0]=b.Date.format(a,"yyyy-MM-dd hh:mm:ss")}},getDateRange:function(c){function d(a){return"date"===c?a:b.Date.format(a,"yyyy-MM-dd hh:mm:ss")}var e,f,g=this,h=g.options,i=a.extend(!0,[],h.selDate),j=[];c=c?c:"date",f="date"===c?null:"";for(var k=0;k<i.length;k++)if(e=i[k])switch(h.curModel[0]){case"month":j.push([d(new Date(e[2],e[3],1,0,0,0,0)),d(new Date(e[2],e[3],new Date(e[2],e[3]+1,0).getDate(),23,59,59,0))]);break;case"year":j.push([d(new Date(e[2],0,1,0,0,0,0)),d(new Date(e[2],11,31,23,59,59,0))]);break;case"quarter":j.push([d(new Date(e[2],e[3],1,0,0,0,0)),d(new Date(e[2],e[3]+2,new Date(e[2],e[3]+3,0).getDate(),23,59,59,0))]);break;case"week":j.push([d(new Date(e[2],e[3],e[4],0,0,0,0)),d(new Date(e[2],e[3],e[4]+6,23,59,59,0))]);break;default:j.push([d(new Date(e[0].getTime())),d(new Date(e[2],e[3],e[4],23,59,59,0))])}else j.push([f,f]);return 1===j.length?"date"===h.curModel[0]?j[0][0]:j[0]:[j[0][0],j[1][1]]},setWidth:function(a){var b=this.options.el.children("div"),c=this.options.width;null!=a&&void 0!==a&&""!==a&&"object"!=typeof a&&(c="string"==typeof a&&/^(\d)+(px|pt|em|PX|PT|EM|%)$/.test(a)?a:a+"px",b.css({width:a}))},setReadonly:function(a){a="undefined"==typeof a||a;var b=this,c=b.options,d=a?"addClass":"removeClass";a!==c.readonly&&(c.el.children(".C_CR_calInput_bd")[d](c.inputDisClass),a?c.inputEl.prop("readonly",!0):c.entering&&c.inputEl.prop("readonly",!1),c.readonly=a)},destroy:function(){var a=this,b=a.options;a._super(),b.el.unbind().remove(),b.pEl&&b.pEl.remove()},setTextMode:function(){var a=this,b=a.options,c=a.getLabelValue();b.isrange?b.el.eq(0).text(c[0]+"~"+c[1]):b.el.eq(0).text(c[0])},getLabelValue:function(){var b,c=this,d=c.options,e=[],f=/^(?:\{.*\}|\[.*\])$/;null!==d.value&&void 0!==d.value||(d.value=""),b=a.type(d.value),"string"===b?d.value=f.test(d.value)?a.parseJSON(d.value.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'")):[d.value]:"date"===b&&(d.value=[d.value]);for(var g=0;g<d.value.length;g++)b=a.type(d.value[g]),"string"===b?e.push(d.value[g]):"date"===b&&e.push(i(d.value[g],d.format)[1],d.iso8601,d.sunday_first);return e},onInValid:function(b,c){var d=this,e=d.options;e.tipTxt=null===e.tipTxt?e.el.attr("tip"):e.tipTxt,e.el.attr("tip",c),a(d.tipPosition,e.el).attr("tipType","error"),e.el.children(".C_CR_calInput_bd").addClass(e.inputErrClass)},onValid:function(b){var c=this,d=c.options;d.tipTxt=null===d.tipTxt?d.el.attr("tip"):d.tipTxt,d.el.attr("tip",d.tipTxt||""),a(c.tipPosition,d.el).attr("tipType","normal"),d.el.children(".C_CR_calInput_bd").removeClass(d.inputErrClass)}});var y,z=w()+".mask",A=navigator.userAgent,B=/iphone/i.test(A),C=/android/i.test(A);a.maskCL={definitions:{9:"[0-9]",1:"[0-1]",2:"[0-2]",3:"[0-3]",4:"[0-4]",5:"[0-5]",6:"[0-6]",7:"[0-7]",8:"[0-8]",a:"[A-Za-z]","*":"[A-Za-z0-9]",q:"[1-4]",x:"x",r:"r",z:"z",k:"k"},dataName:"rawMaskFn",placeholder:"_"},a.fn.extend({caretCL:function(a,b){var c;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof a?(b="number"==typeof b?b:a,this.each(function(){this.setSelectionRange?this.setSelectionRange(a,b):this.createTextRange&&(c=this.createTextRange(),c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select())})):(this[0].setSelectionRange?(a=this[0].selectionStart,b=this[0].selectionEnd):document.selection&&document.selection.createRange&&(c=document.selection.createRange(),a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length),{begin:a,end:b})},unmaskCL:function(){return this.trigger("unmaskCL")},maskCL:function(c,d){var e,f,g,h,i,j;return!c&&this.length>0?(e=a(this[0]),e.data(a.maskCL.dataName)()):(d=a.extend({placeholder:a.maskCL.placeholder,completed:null},d),f=a.maskCL.definitions,g=[],h=j=c.length,i=null,a.each(c.split(""),function(a,b){"?"===b?(j--,h=a):f[b]?(g.push(new RegExp(f[b])),null===i&&(i=g.length-1)):g.push(null)}),this.trigger("unmaskCL").each(function(){function e(a){for(;++a<j&&!g[a];);return a}function k(a){for(;--a>=0&&!g[a];);return a}function l(a,b){var c,f;if(!(a<0)){for(c=a,f=e(b);c<j;c++)if(g[c]){if(!(f<j&&n(g[c],u[f],c)))break;u[c]=u[f],u[f]=d.placeholder,f=e(f)}r(),t.caretCL(Math.max(i,a))}}function m(a){var b,c,f,h;for(b=a,c=d.placeholder;b<j;b++)if(g[b]){if(f=e(b),h=u[b],u[b]=c,!(f<j&&n(g[f],h,f)))break;c=h}}function n(a,b,c){var d,e,f;switch(a.toString().replace(/\//g,"")){case"x":if(d=t.val().substring(c-1,c),e=parseFloat(b),"0"===d)return e>0&&e<=9;if("1"===d)return e>=0&&e<3;break;case"z":if(f=t.val(),d=f.substring(c-1,c),e=parseFloat(b),e=parseFloat(b),"0"===d)return e>0&&e<=9;if("1"===d||"2"===d)return e>=0&&e<=9;if("3"===d)return e>=0&&e<=1;break;case"r":if(d=t.val().substring(c-1,c),e=parseFloat(b),"0"===d||"1"===d)return e>=0&&e<=9;if("2"===d)return e>=0&&e<=3;break;case"k":if(d=t.val().substring(c-1,c),e=parseFloat(b),"0"===d)return e>0&&e<=9;if("1"===d||"2"===d||"3"===d||"4"===d)return e>=0&&e<=9;if("5"===d)return e>=0&&e<=3;break;default:return a.test(b)}}function o(a){if(!t.prop("readonly")){var b,c,d,f=a.which;8===f||46===f||B&&127===f?(b=t.caretCL(),c=b.begin,d=b.end,d-c===0&&(c=46!==f?k(c):d=e(c-1),d=46===f?e(d):d),q(c,d),l(c,d-1),a.preventDefault()):27===f&&(t.val(v),t.caretCL(0,s()),a.preventDefault())}}function p(b){if(!t.prop("readonly")){var c,f,h,i=b.which,k=t.caretCL();return!(b.ctrlKey||b.altKey||b.metaKey||i<32)&&void(i&&(k.end-k.begin!==0&&(q(k.begin,k.end),l(k.begin,k.end-1)),c=e(k.begin-1),c<j&&(f=String.fromCharCode(i),n(g[c],f,c)&&(m(c),u[c]=f,r(),h=e(c),C?setTimeout(a.proxy(a.fn.caret,t,h),0):t.caretCL(h),d.completed&&h>=j&&d.completed.call(t))),b.preventDefault()))}}function q(a,b){var c;for(c=a;c<b&&c<j;c++)g[c]&&(u[c]=d.placeholder)}function r(){t.val(u.join(""))}function s(a){var b,c,e,f=t.val(),i=-1,k=t.data("fmOpts");for(b=0,c=0;b<j;b++)if(g[b]){for(;c++<f.length;)if(u[b]=d.placeholder,e=f.charAt(c-1),n(g[b],e,b)){u[b]=e,i=b;break}if(c>f.length)break}else u[b]===f.charAt(c)&&b!==h&&(c++,i=b);return a?(r(),t.val(t.val().substring(0,i+1))):i+1<h?i===(h-1)/2&&k.isRange?(r(),t.val(t.val().substring(0,k.separator?i+1:i))):(t.val(""),q(0,j)):(r(),t.val(t.val().substring(0,i+1))),h?b:firstNonmaskCLPos}var t=a(this),u=a.map(c.split(""),function(a,b){if("?"!==a)return f[a]?d.placeholder:a}),v=t.val();t.data("fmOpts").buffer=u,t.data("fmOpts").clearBuffer=q,t.data(a.maskCL.dataName,function(){return a.map(u,function(a,b){return g[b]&&a!==d.placeholder?a:null}).join("")}),t.one("unmaskCL",function(){t.unbind(".maskCL").removeData(a.maskCL.dataName)}).bind("focus.maskCL",function(){if(!t.prop("readonly")){clearTimeout(y);var d,e,f=t.data("fmOpts");v=t.val(),""!==a.trim(v)&&(f.isRange?(e=v.split("~"),e[0]&&(e[0]=b.Date.parse(e[0],f.format,f.iso8601,f.sunday_first),v=b.Date.format(e[0],f.fullFormat,f.iso8601,f.sunday_first)),e[1]?(e[1]=b.Date.parse(e[1],f.format,f.iso8601,f.sunday_first),v+="~"+b.Date.format(e[1],f.fullFormat,f.iso8601,f.sunday_first)):v+=f.separator?"~":"",t.val(v)):(e=b.Date.parse(v,f.format,f.iso8601,f.sunday_first),v=t.val(b.Date.format(e,f.fullFormat,f.iso8601,f.sunday_first)))),d=s(!0),y=setTimeout(function(){r(),d===c.length?t.caretCL(0,d):t.caretCL(d)},10)}}).bind("blur.maskCL",function(){var a,c=t.data("fmOpts"),d=cui(t.parents(".C_CR_calInput_bd").eq(0).parent());d.options.el.data("timeOut",function(){s(),"true"!==d.options.el.attr("isShow")&&(""!==t.val()&&(c.isRange?(a=t.val().split("~"),a[0]=b.Date.parse(a[0],c.fullFormat,c.iso8601,c.sunday_first),a[1]=b.Date.parse(a[1],c.fullFormat,c.iso8601,c.sunday_first),null===a[0]&&null!==a[1]&&(a[0]=a[1]),null!==a[0]&&null!==a[1]&&(a[0]-a[1]>0&&a.reverse(),t.val(b.Date.format(a[0],c.format,c.iso8601,c.sunday_first)+"~"+b.Date.format(a[1],c.format,c.iso8601,c.sunday_first)))):(a=b.Date.parse(t.val(),c.fullFormat,c.iso8601,c.sunday_first),t.val(b.Date.format(a,c.format,c.iso8601,c.sunday_first)))),d.setValue(a,!1,"entering"))}())}).bind("keydown.maskCL",o).bind("keypress.maskCL",p).bind(z,function(){setTimeout(function(){var a=s(!0);t.caretCL(a),d.completed&&a===t.val().length&&d.completed.call(t)},0)}),s(!0)}))}})}(window.comtop.cQuery,window.comtop),function(a,b){b.UI.ClickInput=b.UI.Base.extend({options:{uitype:"ClickInput",name:"",value:"",emptytext:"",width:"",maxlength:-1,readonly:!1,icon:"",iconwidth:"",enterable:!1,editable:!1,textmode:!1,on_iconclick:null,on_change:null,on_focus:null,on_blur:null,on_keyup:null,on_keydown:null},relation:"data-relation-value",tipPosition:".click_input_base",_init:function(){var a=this.options;a.id=b.guid(),""==a.name&&(a.name=b.guid()+"_"+a.uitype);
},_create:function(){var c,d=this.options,e=b.icon,f=d.icon;this.$inputWrap=a("#"+d.id+"_wrap"),this.$inputBox=a("#"+d.id+"_box"),c=this.$input=a("#"+d.id),this.$iconspan=a("#"+d.id+"_icon"),this.$iconWarp=a("#"+d.id+"_warp"),this.$empty=d.el.find(".cui_clickinput_empty").eq(0).on("click",function(){c.focus()}),/\./.test(f)?this.$iconspan.css("backgroundImage","url("+f+")"):this.$iconspan.html(e[f]||"&#xf03a;"),this.setWidth(d.width),d.readonly&&this.setReadOnly(!0),""==d.value&&""!=d.emptytext&&this.$empty.html(d.emptytext),this.setEditAble(d.editable)},setWidth:function(a){this.$inputWrap.css({width:b.Tools.fixedNumber(a)})},setValue:function(b,c){var d=this.$input,e=this.options;b=null==b||void 0==b?"":b,"string"===a.type(b)?(d.removeAttr(this.relation),d.val(b)):"array"===a.type(b)&&(b=a.extend([],b),b.length>0&&(d.val(b[0]),b.splice(0,1),d.attr(this.relation,b.join("|")))),""!==b&&null!=b||"array"===a.type(b)&&b.length>0?this.$empty.html(""):""!==e.emptytext&&this.$empty.html(e.emptytext),c?this.onValid():(this._triggerHandler("change"),this._changeHander())},getValue:function(){var b=this.$input,c=this.options,d=a.trim(b.val()),e=b.attr(this.relation),f=c.emptytext;return d===f?"":e?(d=d+"|"+e,d.split("|")):d},getLabelValue:function(){var b=this.options.value;return"string"===a.type(b)?b:"array"===a.type(b)?b.length>0?b[0]:"":void 0},setMaxLength:function(a){this.options.maxlength=a},setReadOnly:function(a){this.setReadonly(a)},setReadonly:function(a){var b=this.options,c=this.$inputWrap,d=this.$input;b.readonly=a,a?(d.attr("readonly",!0),c.addClass("input_garybg"),this._removeEmptyText(!0)):(b.editable&&d.attr("readonly",!1),c.removeClass("input_garybg"),this._removeEmptyText(!1)),this.$iconWarp.css({display:a?"none":"inline-block"}),a&&this.$inputBox.css("marginRight",0)},setEditAble:function(a){var b=this.options,c=this.$input;return!b.readonly&&(b.editable=a,void(a?c.attr("readonly",!1):c.attr("readonly",!0)))},_changeHander:function(a){var b=this.options;return!b.readonly&&(""!==this.getValue()&&this.$empty.html(""),this._triggerHandler("change"),void this._customHandler("on_change",a))},_focusHandler:function(a){var b=this.options;return!b.readonly&&(this._removeEmptyText(!0),this.$inputBox.addClass("input_focus"),this.onValid(),void this._customHandler("on_focus",a))},_blurHandler:function(b){var c=this.options,d=this.$inputBox;if(c.readonly)return!1;this._removeEmptyText(!1),d.removeClass("input_focus"),this._textCounter();var e=this.getValue();switch(a.type(e)){case"string":""!==e&&null!=e&&this._triggerHandler("change");break;case"array":0!==e.length&&this._triggerHandler("change")}this._customHandler("on_blur",b)},_keyupHandler:function(a){var b=this.options;return!b.readonly&&(this._textCounter(),void this._customHandler("on_keyup",a))},_keydownHandler:function(a){var b=this.options;return!b.readonly&&(b.enterable&&13==a.keyCode?(this._iconclickHandler(a),!1):void this._customHandler("on_keydown",a))},_iconclickHandler:function(a){var b=this.options;return!b.readonly&&void this._customHandler("on_iconclick",a)},_customHandler:function(b,c){var d=this.options,e=d[b];"string"==a.type(e)?"function"==typeof window[e]&&window[e].call(this,c,this):"function"==typeof e&&e.call(this,c,this)},_removeEmptyText:function(a){var b=(this.$input,this.options.emptytext),c=this.getValue();""!=b&&0==c.length&&(a?this.$empty.html(""):this.$empty.html(b))},_textCounter:function(){var a=this.options,c=this.getValue();if("object"==typeof c&&(c=this.$input.val()),a.maxlength>0){var d=b.String.getBytesLength(c);if(!(d>a.maxlength))return!1;this.setValue(b.String.intercept(c,a.maxlength))}return!1},onInValid:function(b,c){var d=this,e=d.options;d.$inputBox.addClass("click_input_invalid"),null==e.tipTxt&&(e.tipTxt=e.el.attr("tip")||""),e.el.attr("tip",c),a(d.tipPosition,e.el).attr("tipType","error")},onValid:function(b){var c=this,d=c.options,e=a(c.tipPosition,d.el).attr("tipID");if(c.$inputBox.removeClass("click_input_invalid"),null==d.tipTxt&&(d.tipTxt=d.el.attr("tip")||""),void 0!==e){var f=cui.tipList[e];"undefined"!=typeof f&&f.hide()}d.el.attr("tip",d.tipTxt),a(c.tipPosition,d.el).attr("tipType","normal")}})}(window.comtop.cQuery,window.comtop),function(a,b){b.UI.Customform=b.UI.Base.extend({options:{uitype:"Customform",columnCount:2,datasource:[],classname:"customform"},_create:function(){var c,d,e,f,g,h,i=this.options.datasource;for(window.validater=window.validater||cui().validate(),g=0;g<i.length;g++)c=i[g],e=c.uitype||c.uiType,d=e.charAt(0).toLowerCase()+e.substring(1),cui(c.el)[d](c);for(g=0;g<i.length;g++)c=i[g],this._bindData(a(c.el),c.databind);if(!b.UI.scan.textmode&&!comtop.UI.scan.disable)for(g=0,h=i.length;g<h;g++)c=i[g],f=a(c.el).data("uitype"),!f||f.options.textmode||f.options.disable||(this._bindValidate(f.options.el,c.validate),this._bindTip(f.options.el,c,f.tipPosition||f.options.el))},_bindData:function(a,b){if(b){var c=b.split("."),d=c[0],e=c[1],f=window[d];if(f||(f=window[d]={}),f.nodeName)return alert("\u6570\u636e"+d+"\u4e0e\u9875\u9762\u7684\u6807\u7b7eID\u540d\u76f8\u540c\uff0c\u8bf7\u66f4\u540d;"),!1;var g=cui(f).databind();g.addBind(a,e)}},_bindValidate:function(b,c){if(c)switch(a.type(c)){case"array":for(var d=0;d<c.length;d++)c[d].rule?window.validater.add(cui(b),c[d].type,c[d].rule):window.validater.add(cui(b),c[d].type);break;case"string":window.validater.add(cui(b),c)}},_bindTip:function(b,c,d){d=a(d,b),void 0!=cui(b).options.textmode&&void 0==c.tip&&(b.attr("tip",""),c.tip=""),void 0!=c.tip&&(b.attr("tip",c.tip),cui.tip(d,{trigger:c.trigger,tipEl:b}))}})}(window.comtop.cQuery,window.comtop),function(a){"use strict";a.cui||(a.cui={});var b=a.comtop,c=b&&b.cQuery?b.cQuery:a.jQuery,d=a.cui,e=a.document,f=b.Browser.isIE6,g=b.Browser.isQM,h=function(){var a=c("body"),b=a.data("cui_dialog_eventproxylay");return b||(b=c(e.createElement("div")).addClass("cui_dialog_eventproxylay").appendTo(a),a.data("cui_dialog_eventproxylay",b)),b},i=function(a){a=a||{},this.opt=c.extend(!0,{},this.options,a),this._init()};i.prototype={options:{uitype:"Dialog",id:"",title:"",modal:!0,opacity:.5,canClose:!0,outClose:!1,width:350,height:100,left:"50%",top:"50%",draggable:!0,hideContent:!1,onClose:null,beforeClose:null,src:"",html:"",buttons:[],page_scroll:!0,refresh:!1,dragClass:".dialog-titlebar"},_init:function(){this._preProcessSettings(),this._buildHTML(),this._markUp(),this._setContent(),this._setUpSize(),this._bindEvent()},_preProcessSettings:function(){var b=this.opt,d=function(){return(900*Math.random()+100).toString().replace(".","")};if("string"==typeof b.width&&(b.width=a.parseInt(b.width)),"string"==typeof b.height&&(b.height=a.parseInt(b.height)),b.id=""===b.id?"dialog_"+d():b.id,b.left=b.left.toString(),b.top=b.top.toString(),b.left=b.left.indexOf("%")!==-1?b.left:parseInt(b.left,10)+"px",b.top=b.top.indexOf("%")!==-1?b.top:parseInt(b.top,10)+"px",a.frameElement){var e=b.buttons.length?105:50;b.height>c(a).height()-e&&(b.height=c(a).height()-e)}},_buildHTML:function(){var a=this.opt,b=[];a.modal&&(f&&b.push('<iframe id="cui_overlay_iframe_',a.id,'" class="cui_overlay_iframe"></iframe>'),b.push('<div class="cui_overlay" id="cui_overlay_',a.id,'"></div>')),b.push('<div class="cui-dialog-container" id="',a.id,'" style="'),b.push("left:",a.left,"; top:",a.top,';">'),a.canClose&&b.push('<a href="#/" title="\u5173\u95ed" hidefocus="true" class="dialog-close-btn"></a>'),b.push('<div class="dialog-titlebar"><span class="dialog-title" title="'+a.title.replace(/<.*?>/g,"").replace('"',"\uff02")+'">'),b.push(a.title,"</span></div>"),b.push('<div class="dialog-content" >'),"string"==typeof a.html&&""!==a.html?(b.push('<div class="dialog-content-inner">'),b.push(a.html),b.push("</div>")):"string"==typeof a.src&&""!==a.src?b.push('<iframe class="dialog-content-iframe" frameborder="no" border="0" src="about:blank" ></iframe><div class="dialog-iframe-loading"></div>'):b.push('<div class="dialog-content-inner"></div>'),c.isArray(a.buttons)&&a.buttons.length>0&&(b.push('<div class="dialog-ft">'),b.push(this._buildButtons()),b.push("</div>")),b.push("</div>"),b.push("</div>"),c("body").append(b.join(""))},_markUp:function(){var a=this.opt;this._$dialogContainer=c("#"+a.id),this._$dialogContent=this._$dialogContainer.find(".dialog-content-inner"),this._$iframe=this._$dialogContainer.find(".dialog-content-iframe"),this._$loadingLay=this._$dialogContainer.find(".dialog-iframe-loading"),this._$buttonContainer=this._$dialogContainer.find(".dialog-ft"),this._$overlay=c("#cui_overlay_"+a.id),this._$iframecover=c("#cui_overlay_iframe_"+a.id),this._$mousemoveProxyLay=h()},_setContent:function(){var a=this.opt;"object"==typeof a.el?this._$dialogContent.prepend(c(a.el).show()):"object"==typeof a.html&&this._$dialogContent.prepend(c(a.html).show())},_setUpSize:function(){var a=this.opt;a.height&&(this._$iframe.length?this._$iframe.height(a.height):this._$dialogContent.height(a.height)),a.width&&this._$dialogContainer.width(a.width)},_bindEvent:function(){var a=this.opt,b=this;this._$dialogContainer.delegate("a.cui-btn-generate-by-dg,a.dialog-close-btn","click",function(d){var e=c(d.target),f=e.attr("proxyIndex");return f&&""!==f?(a.buttons[f].disable||(f=parseInt(f,10),a.buttons[f].handler.call(b)),!1):(b.hide(),!1)}),a.outClose&&a.canClose&&(a.modal||c(document).unbind("mouseup.dialog").bind("mouseup.dialog",function(a){var d=c(a.target).closest(".cui-dialog-container");if(!d.length&&c(".cui-dialog-container").is(":visible"))return b.hide(),!1}),this._$overlay.bind("click",function(){return b.hide(),!1})),a.draggable?this._doDrag():this._$dialogContainer.find(".dialog-titlebar").css("cursor","default")},_doDrag:function(){var b=this.opt,d=!1,e=!1,f=this,g={top:0,left:0},h=function(b){var d=c(a).height(),e=c(a).width(),g=f._dialogContainerOuterWidth,h=f._dialogContainerOuterHeight;b.left+g>=e&&(b.left=e-g),b.top+h>=d&&(b.top=d-h)},i=function(a){a.stopPropagation(),d=!1,e=!1,f._$mousemoveProxyLay.hide().off(),f._showContent(!0)},j=function(a){if(d){var c={left:a.clientX-g.left,top:a.clientY-g.top,"margin-left":"","margin-top":"",bottom:"",right:""};c.left=c.left<0?0:c.left,c.top=c.top<0?0:c.top,h(c),f._$dialogContainer.css(c),b.left=c.left,b.top=c.top,e||(f._showContent(!1),e=!0)}};c(b.dragClass,this._$dialogContainer).on("mousedown.dialogDrag",function(a){var b=this.getBoundingClientRect();return g.top=a.clientY-b.top,g.left=a.clientX-b.left,d=!0,f._$mousemoveProxyLay.show().off().on("mousemove.dialogDrag",function(a){j(a)}).on("mouseup.dialogDrag",i),!1}).on("mouseup.dialogDrag",i)},_showContent:function(a){a?this.opt.hideContent&&(this._$dialogContent.css("visibility","visible"),this._$iframe.css("visibility","visible")):this.opt.hideContent&&(this._$dialogContent.css("visibility","hidden"),this._$iframe.css("visibility","hidden"))},_buildButtons:function(){for(var a=this.opt,b={hide:!1,disable:!1,handler:function(){},name:"\u6309\u94ae"},d=[],e=0,f=a.buttons.length;e<f;e++){a.buttons[e]=c.extend({},b,a.buttons[e]);var g=a.buttons[e],h="cui-button cui-btn-generate-by-dg ";h+=g.disable?" disable-button ":"",h+=g.hide?" btn-normal-hide ":"",d.push('<a href="#/" hidefocus="true" onclick="return false;" class="',h,'" proxyIndex="',e,'">',g.name,"</a>")}return d.join("")},_calPosition:function(){var a=this.opt;return{"margin-left":-a.width/2,"margin-top":-a.height/2}},_setPosition:function(){var a,b=this.opt,c=this._$dialogContainer;"50%"===b.left&&"50%"===b.top?c.css(this._calPosition()):"100%"===b.left&&"100%"===b.top?c.css({left:"",top:"",right:0,bottom:0}):"50%"===b.left&&"50%"!==b.top&&(a=this._calPosition(),c.css({"margin-left":a["margin-left"]}))},_showOverLay:function(){0!==this._$overlay.length&&((f||g)&&(this._ieQScrollTop=c(e).scrollTop(),c(e).scrollTop(0),c("html,body").addClass("cui_overlay_dialog_ie6"),this._$iframecover.length&&this._$iframecover.show()),this._$overlay.css("opacity",this.opt.opacity).show())},_hideOverLay:function(){0!==this._$overlay.length&&((f||g)&&(c("html,body").removeClass("cui_overlay_dialog_ie6"),this._$iframecover.length&&this._$iframecover.hide(),c(e).scrollTop(this._ieQScrollTop)),this._$overlay.hide())},_initIframeSrc:function(){this._$iframe.length&&(this._srcSetted&&!this.opt.refresh||(this._loadIframe(this.opt.src),this._srcSetted=!0))},_cacheDialogSize:function(){this._dialogContainerOuterWidth=this._$dialogContainer.outerWidth(),this._dialogContainerOuterHeight=this._$dialogContainer.outerHeight()},_loadIframe:function(a){var b=this;this._$loadingLay.height(this._$iframe.height()).show(),this._$iframe.one("load",function(){this.setAttribute("src",a)}),this._$iframe.css("visibility","hidden").attr("src","about:blank"),setTimeout(function(){b._$iframe.css("visibility","visible"),b._$loadingLay.hide()},500)},show:function(a){return this.opt.page_scroll||c("html").addClass("cui-dialog-noscroll"),this._setPosition(),this._showOverLay(),a?this.reload(a):this._initIframeSrc(),this._$dialogContainer.show(),this._cacheDialogSize(),this},reload:function(a){return this._$iframe.length&&a?(this._loadIframe(a),this.opt.src=a,this):this},hide:function(){return"function"==typeof this.opt.beforeClose&&this.opt.beforeClose.call(this)===!1?this:(this._hideOverLay(),this._$dialogContainer.hide(),this.opt.page_scroll||c("html").removeClass("cui-dialog-noscroll"),"function"==typeof this.opt.onClose&&this.opt.onClose.call(this),this)},setTitle:function(a){var b=typeof a;return"number"!==b&&"string"!==b||(this.opt.title=a,c("span.dialog-title",this._$dialogContainer).html(a)),this},setButton:function(a,b){var d=arguments.length,e=this.opt,f=this,g=function(){f._$buttonContainer.length&&f._$buttonContainer.html(f._buildButtons())};if(1===d&&"array"===c.type(a))c.extend(e.buttons,a),g();else if(2===d&&"number"==typeof a){if(a>e.buttons.length)return;c.extend(e.buttons[a],b),g()}return this},setSize:function(a){return"object"!==c.type(a)?this:(a.width&&(this.opt.width=a.width),a.height&&(this.opt.height=a.height),this._setUpSize(),this._setPosition(),this._cacheDialogSize(),this)},getIframeMember:function(a){return this._$iframe.length?this._$iframe.get(0).contentWindow[a]:null},getIframe:function(){return this._$iframe.length?this._$iframe.get(0):null},move:function(a,b){var d={};return"number"==typeof a&&(d.top=a,d["margin-top"]="",this.opt.top=a),"number"==typeof b&&(d.left=b,d["margin-left"]="",this.opt.left=b),c.isEmptyObject(d)?this:(d=c.extend({bottom:"",right:""},d),this._$dialogContainer.css(d),this)},destroy:function(){this._$dialogContainer.remove(),this._hideOverLay(),this._$overlay.length&&this._$overlay.remove(),this._$iframecover.length&&this._$iframecover.remove(),this._$mousemoveProxyLay=this._$iframecover=null,this._$dialogContainer=this._$overlay=null,this._$dialogContent=this._$iframe=null,this._$loadingLay=this._$buttonContainer=null,this.opt=null}},i.prototype.constructor=i,b&&b.UI&&b.cQuery&&(b.UI.Dialog=i,b.cQuery.fn.dialog=function(a){var c=this.data("uitype");return a=a||{},a.html=this.get(0),"object"!=typeof c&&(c=new b.UI.Dialog(a),c.isCUI=!0,this.data("uitype",c)),c}),d.dialog=function(a){var c=a.id,e=d("#"+c);if(e instanceof i)return"string"==typeof a.title&&e.opt.title!==a.title&&e.setTitle(a.title),"string"==typeof a.src&&e.opt.src!==a.src&&e.reload(a.src),e;var f=new i(a);return"object"==typeof b&&c&&(f.isCUI=!0,b.cQuery("#"+c).data("uitype",f)),f},d.dialog.setOpt=function(a){"object"===c.type(a)&&c.extend(i.prototype.options,a)}}(window),function(a,b){b.UI.Input=b.UI.Base.extend({options:{uitype:"Input",width:"200px",readonly:!1,maxlength:-1,"byte":!0,value:"",emptytext:"",name:"",type:"text",mask:"",fill:"",maskoptions:{},textmode:!1,align:"left",on_change:null,on_focus:null,on_blur:null,on_keyup:null,on_keydown:null,on_keypress:null},tipPosition:".cui_inputCMP_wrap",_init:function(){var a=this.options;a.id="cui_inputCMP_"+b.guid(),"password"!==a.type&&"hidden"!==a.type&&(a.type="text"),""===a.name&&(a.name=b.guid()+"_"+a.uitype),a.value=null===a.value||void 0===a.value?"":a.value,a.value=a.value.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},_create:function(){function c(a){return document.selection?document.selection.createRange().text:a.value.substring(a.selectionStart,a.selectionEnd)}var d,e=this,f=e.options;if(d=this.$input=a("#"+f.id).css("textAlign",f.align),this.$empty=f.el.find(".cui_input_empty").eq(0).css("text-align",f.align).on("mousedown",function(){d.focus()}),""!==f.mask){var g=a.extend({},f.maskoptions,{callback:function(){e._removeEmptyText(!1)}});b.UI.InputMask.doMask(this.$input,f.mask,g)}""===f.value&&this.$empty.html(f.emptytext),f.maxlength>-1&&(f["byte"]||this.$input.attr("maxlength",f.maxlength),this.$input.on("keydown",function(a){var b=f["byte"]&&e._textCounter();b>=e.options.maxlength&&(c(this)||8==a.keyCode||127==a.keyCode||(a.preventDefault?a.preventDefault():a.returnValue=!1))}),this._textCounter()),e.$input.on("blur",function(a){e._blurHandler(a)})},setWidth:function(a){"string"==typeof a&&/\d+(\%|px|pt|em)/.test(a)?this.options.el.children("div").css({width:a}):"number"==typeof a&&this.options.el.children("div").css({width:a+"px"})},setValue:function(c,d){var e=this.$input,f=this.options;if(c=null==c||void 0==c?"":c,e.val(c),f.maxlength>0&&this._textCounter(),""!==c){if(this.$empty.html(""),""!==f.mask){var g=a.extend({},f.maskoptions,{callback:function(){this._removeEmptyText(!1)}});b.UI.InputMask.doMask(this.$input,f.mask,g)}}else""!==f.emptytext&&this.$empty.html(f.emptytext);d?this.onValid():(this._triggerHandler("change"),e.change())},getValue:function(){var a=this.$input,c=this.options,d=a.val();return""!==c.mask?b.UI.InputMask.unMaskValue(a,c.mask,c.maskoptions):d},setEmptyText:function(b){var c=this.options;this.$input;"string"==typeof b&&(""===a.trim(b)?c.emptytext="":c.emptytext=b,""===this.getValue()&&this.$empty.html(c.emptytext))},setMaxLength:function(a){this.options.maxlength=a},setReadOnly:function(a){var b=this.options,c=this.$input;b.readonly=a,c.attr("readonly",a),a?(b.el.children("div").addClass("cui_inputCMP_readonly"),this._removeEmptyText(!0)):(b.el.children("div").removeClass("cui_inputCMP_readonly"),this._removeEmptyText(!1))},setReadonly:function(a){this.setReadOnly(a)},focus:function(){var a=this.options;return a.readonly||a.el.find(":text, :password")[0].focus(),this},_changeHander:function(a){var b=this.options,c=this.$input;return!b.readonly&&(""!==this.getValue()?this.$empty.html(""):""!==b.emptytext&&this.$empty.html(b.emptytext),this._triggerHandler("change"),this._customHandler("on_change",a),void(""===this.getValue()&&""!==b.fill&&c.val(b.fill)))},_focusHandler:function(a){var b=this.options,c=this;return!b.readonly&&(c._removeEmptyText(!0),b.el.addClass("cui_inputCMP_focus"),c.onValid(),"0"===c.getValue()&&setTimeout(function(){c.$input[0].select()},20),void c._customHandler("on_focus",a))},_blurHandler:function(a){var b=this.options;if(b.readonly)return!1;this._removeEmptyText(!1),b.el.removeClass("cui_inputCMP_focus"),this._textCounter();var c=this.getValue();""!==c&&null!=c&&this._triggerHandler("change"),this._customHandler("on_blur",a)},_keyupHandler:function(a){var b=this.options;return!b.readonly&&void this._customHandler("on_keyup",a)},_keydownHandler:function(a){var b=this.options;return!b.readonly&&(13===a.which&&""===this.getValue()&&a.preventDefault(),void this._customHandler("on_keydown",a))},_keypressHandler:function(a){var b=this.options;return!b.readonly&&void this._customHandler("on_keypress",a)},_customHandler:function(b,c){var d=this.options,e=d[b];"string"===a.type(e)?"function"==typeof window[e]&&window[e].call(this,c,this):"function"==typeof e&&e.call(this,c,this)},_removeEmptyText:function(a){var b=this.options.emptytext,c=this.getValue(),d=this.options;""!==b&&0===c.length&&(a?this.$empty.html(""):this.$empty.html(d.emptytext))},_textCounter:function(a){var b=this.options,c=this.getValue();if(b.maxlength>-1){var d=this._getStringLength(c);if(!(d>b.maxlength))return!1;this.$input.val(this._interceptString(c,b.maxlength))}return!1},_getStringLength:function(a){var c=this.options;return c["byte"]?b.String.getBytesLength(a):a.length},_interceptString:function(a,c){var d=this.options;return d["byte"]?b.String.intercept(a,c):b.String.interceptString(a,c)},onInValid:function(b,c){var d=this,e=d.options;e.el.addClass("cui_inputCMP_error"),null==e.tipTxt&&(e.tipTxt=e.el.attr("tip")||""),e.el.attr("tip",c),a(d.tipPosition,e.el).attr("tipType","error")},onValid:function(b){var c=this,d=c.options,e=a(c.tipPosition,d.el).attr("tipID");if(d.el.removeClass("cui_inputCMP_error"),null==d.tipTxt&&(d.tipTxt=d.el.attr("tip")||""),void 0!==e){var f=cui.tipList[e];"undefined"!=typeof f&&f.hide()}d.el.attr("tip",d.tipTxt),a(c.tipPosition,d.el).attr("tipType","normal")}})}(window.comtop.cQuery,window.comtop),function(a,b){function c(){var c=(cui.handleMask,a("#"+g.id));if(f=new b.UI.Overlay,0===c.length){var e="z-index:"+(g.zIndex+1)+";";a("body").append('<div id="'+g.id+'" class="handlemask_wrap" style="'+e+'"></div>'),c=a("#"+g.id)}c.html(g.html),c.css({visibility:"hidden",display:"block"}),d(),c.css({visibility:"visible",display:"none"})}function d(){var b=a("#"+g.id);b.css({margin:"-"+b.height()/2+"px 0 0 -"+b.width()/2+"px"})}function e(){a("#"+g.id).remove(),g.mask&&f.hide(.5),f._dom.remove(),f=void 0}var f=null,g={};cui.handleMask=function(d){return d="object"===a.type(d)?d:{},0!==a("#"+g.id).length&&e(),g=a.extend(!0,{html:'<div class="handlemask_image_1"></div>',mask:!0,zIndex:9999999,id:"handleMask_"+b.guid()},d),c(),cui.handleMask},cui.handleMask.show=function(){0===a("div.handlemask_wrap").length&&cui.handleMask();var b=a("#"+g.id);return"true"!==b.attr("isOpen")&&(g.mask&&(f._dom.css("zIndex",g.zIndex).attr("id","ol_"+g.id),f.show(.5)),b.show().attr("isOpen","true")),cui.handleMask},cui.handleMask.hide=function(){if(0!==a("div.handlemask_wrap").length){var b=a("#"+g.id);return b.hide().attr("isOpen","false"),g.mask&&f.hide(.5),cui.handleMask}}}(window.comtop.cQuery,window.comtop),function(a,b){b.UI.ListBox=b.UI.Base.extend({options:{uitype:"ListBox",width:"200",height:"200",name:"listboxName",value:"",value_field:"id",label_field:"text",multi:!1,textmode:!1,datasource:null,on_dbclick:null,on_click:null,on_select_change:null,on_add:null,on_remove:null,icon_path:null},$el:null,listbox:null,hiddenEl:null,listTemplateName:"cListBox",valueField:null,labelField:null,priorElement:null,rowTemplateName:"cListBoxRow",_init:function(b){this.$el=a(this.options.el),this._initParams(),this.$el.addClass("cui")},_create:function(){"function"==typeof this.options.datasource&&this.options.datasource(this,{}),this.listbox=a(".listbox",this.$el),this.hiddenEl=a("[type=hidden]",this.$el),this.valueField=this.options.value_field,this.labelField=this.options.label_field,this._setConfiguration(),this._setDefaultText()},_initParams:function(){this._analysisHtmlTemplate()},_analysisHtmlTemplate:function(){var b=a("a",this.$el);if(!(null==b||"undefine"==typeof b||b.length<1)){var c=this.options.value_field,d=this.options.label_field,e=[];a.each(b,function(b,f){var g={};g[d]=a.trim(a(this).text()),g[c]=a.trim(a(this).attr("value")),e.push(g)}),this.$el.html(""),this.options.datasource=e}},_setConfiguration:function(){this.listbox.width(this.options.width),this.listbox.height(this.options.height)},_selectChangeCallback:function(){var b=this.options.on_select_change;"string"===a.type(b)?window[b](this.getSelectedRows()):a.isFunction(b)&&b(this.getSelectedRows())},setDatasource:function(a){this.options.datasource=a,this._renderElement()},setMulti:function(a){var b=this.options;b.multi!==a&&"boolean"==typeof a&&(b.multi=a,this.cancelSelected())},_renderElement:function(){var b=a(".tr",this.$el);this._buildTemplate(b,this.rowTemplateName,this.options)},_setDefaultText:function(){if(this.options.value){var b=a(".tr",this.$el),c=this.options.multi?this.options.value.split(";"):this.options.value,d=this.options.value_field,e=[],f=this.options.datasource,g=this;a.each(f,function(f,h){g.options.multi?a.each(c,function(c,f){f==h[d]&&(a("li[name="+f+"]",b).addClass("selected"),e.push(h[d]))}):c==h[d]&&(a("li[name="+c+"]",b).addClass("selected"),e.push(h[d]))}),this.hiddenEl.val(e.join(";"))}},setWidth:function(a){this.listbox.width(a)},getRecordData:function(b){var c=this,d=null,e=this.options.datasource;return a.each(e,function(a,e){if(e[c.valueField]==b)return d=e,!1}),d},getLabelValue:function(){if(""==this.options.value||!this.options.textmode)return"";var b=this.options.value.split(";"),c=this.options.value_field,d=this.options.label_field,e=[];return a.each(this.options.datasource,function(f,g){a.each(b,function(a,b){b==g[c]&&e.push(g[d])})}),e.join(";")},deleteRecordData:function(b){var c=this,d=null,e=this.options.datasource,f=[];return""!=this.hiddenEl.val()&&(f=this.hiddenEl.val().split(";")),a.each(e,function(a,g){if(g[c.valueField]==b)return d=g,e.splice(a,1),f.pop(b),!1}),this.hiddenEl.val(f.join(";")),d},getValue:function(){var b=this.options.value_field,c=[],d=this.getSelectedRows();return d=null===d?[]:this.options.multi?d:[d],a.each(d,function(a,d){c.push(d[b])}),c.join(";")},getText:function(){var b=this,c=[],d=this.getSelectedRows();return d=null===d?[]:this.options.multi?d:[d],a.each(d,function(a,d){c.push(d[b.labelField])}),c.join(";")},setValue:function(b){var c=b+"",d=c.split(";");if(this.options.multi||!(d.length>1)){var e=[];this.cancelSelected(),a(".td",this.$el).each(function(b,c){a.inArray(a(this).attr("name"),d)>=0&&(e.push(a(this).attr("name")),a(this).addClass("selected"))}),this.hiddenEl.val(e.join(";"))}},addRows:function(b){var c=[],d=this,e=!0;if(!(null==b||b.length<1)){var f=b;if(a.isPlainObject(b)&&(f=[],f.push(b)),null!=this.options.datasource){if(a.each(f,function(b,f){e=!0,a.each(d.options.datasource,function(a,b){if(b[d.valueField]===f[d.valueField])return e=!1,!1}),e&&c.push(f)}),c.length<1)return}else c=f,d.options.datasource=[];var g=a.extend({},this.options);g.datasource=c,this.options.datasource=this.options.datasource.concat(c),this._buildTemplate(a(".tr",this.$el),this.rowTemplateName,g,!0);var h=this.options.on_add;"string"===a.type(h)?window[h](c):a.isFunction(h)&&h(c)}},removeRow:function(b){var c=null,d=a("li[name="+b+"]",this.$el);d&&(c=this.deleteRecordData(b),d.remove());var e=this.options.on_remove;return"string"===a.type(e)?window[e]([c]):a.isFunction(e)&&e([c]),c},removeSelectedRows:function(){var b=[],c=this;a(".selected",this.$el).each(function(d,e){b.push(c.deleteRecordData(a(this).attr("name"))),a(this).remove()});var d=this.options.on_remove;return"string"===a.type(d)?window[d](b):a.isFunction(d)&&d(b),b},removeAllRows:function(){var b=[],c=this.options.datasource;a(".td",this.$el).remove(),null!=c&&c.length>0&&(b=c.splice(0,c.length)),this.hiddenEl.val("");var d=this.options.on_remove;return"string"===a.type(d)?window[d](b):a.isFunction(d)&&d(b),b},getRow:function(b){var c=this.getRowSize(),d=null;if(b<c){var e=a(".td",this.$el).eq(b).attr("name");d=this.getRecordData(e)}return d},getSelectedRows:function(){var b=this.options.multi?[]:null,c=this;return a(".selected",this.$el).each(function(d,e){c.options.multi?b.push(c.getRecordData(a(this).attr("name"))):b=c.getRecordData(a(this).attr("name"))}),b},selectRow:function(b){var c=[];""!=this.hiddenEl.val()&&(c=this.hiddenEl.val().split(";")),b>=0&&b<this.getRowSize()&&(a(".td",this.$el).eq(b).addClass("selected"),c.push(a(".td",this.$el).eq(b).attr("name")),this.hiddenEl.val(c.join(";"))),this._selectChangeCallback()},selectAllRows:function(){if(this.options.multi){var b=[];a(".td",this.$el).each(function(c,d){a(this).addClass("selected"),b.push(a(this).attr("name"))}),this.hiddenEl.val(b.join(";")),this._selectChangeCallback()}},cancelSelected:function(){a(".selected",this.$el).each(function(b,c){a(this).removeClass("selected")}),this.hiddenEl.val(""),this._selectChangeCallback()},getAllRows:function(){return this.options.datasource},moveRow:function(b,c){var d=this.getRowSize();if(b>=0&&b<d&&c>=0&&c<d&&b!=c){var e=a(".td",this.$el);b<c?e.eq(c).after(e.eq(b)):e.eq(c).before(e.eq(b)),this.options.datasource.splice(c,0,this.options.datasource.splice(b,1)[0])}},moveUp:function(){for(var a,b=this.getSelectedRows(),c=(this.getRowSize(),0),d=b.length;c<d&&(a=this._getRowIndexByName(b[c][this.valueField]),0!=a);c++)this.moveRow(a,a-1)},moveDown:function(){for(var a,b=this.getSelectedRows(),c=this.getRowSize(),d=b.length-1;d>=0&&(a=this._getRowIndexByName(b[d][this.valueField]),a!=c-1);d--)this.moveRow(a,a+1)},getRowSize:function(){return a(".td",this.$el).length},_getRowDataByKey:function(b){var c=this,d=this.options.datasource,e=null;return a.each(d,function(a,d){if(d&&d[c.valueField]==b)return e=d,!1}),e},_getRowIndexByName:function(b){var c=a("li",this.$el).index(a("li[name="+b+"]",this.$el));return c},_rowClick:function(b,c,d){var e="selected",f=a(c),g=[];if(""!=this.hiddenEl.val()&&(g=this.hiddenEl.val().split(";")),f.hasClass(e)){this.priorElement=null,f.removeClass(e);for(var h=f.attr("name"),i=0,j=g;i<j;i++)if(g[i]==f.attr("name")){g.splice(i,1);break}}else if(this.options.multi)if(this.options.multi&&b.shiftKey){if(null==this.priorElement)this.priorElement=f.attr("name"),g.push(this.priorElement);else{var k=this._getRowIndexByName(f.attr("name")),l=this._getRowIndexByName(this.priorElement),m=a(".td",this.$el);a(".selected",this.$el).each(function(b,c){a(this).removeClass("selected")}),this.hiddenEl.val("");for(var i=Math.min(k,l),j=Math.max(k,l);i<=j;i++)m.eq(i).addClass(e),g.push(m.eq(i).attr("name"))}f.addClass(e)}else this.priorElement=f.attr("name"),g.push(this.priorElement),f.addClass(e);else a(".selected",this.$el).each(function(b,c){a(this).removeClass("selected")}),this.hiddenEl.val(""),f.addClass(e),g=[],g.push(f.attr("name"));this.hiddenEl.val(g.join(";"));var n=this.options.on_click;if("string"===a.type(n)){var h=a(c).attr("name");window[n](this._getRowDataByKey(h))}else if(a.isFunction(n)){var h=a(c).attr("name");n(this._getRowDataByKey(h))}this._selectChangeCallback()},_rowDblClick:function(b,c,d){var e=this.options.on_dbclick;if("string"===a.type(e)){var f=a(c).attr("name");window[e](this._getRowDataByKey(f))}else if(a.isFunction(e)){var f=a(c).attr("name");e(this._getRowDataByKey(f))}},_trhoverin:function(b,c,d){var e="hover";a(c).addClass(e)},_trhoverout:function(b,c,d){var e="hover";a(c).removeClass(e)},_setCacheData:function(a,b){this.$el.data(a,b)},_getCacheData:function(a){return this.$el.data(a)},_removeCacheData:function(a){this.$el.removeData(a)}})}(window.comtop.cQuery,window.comtop),function(a,b){b.UI.InputMask={Datetimes:"9999-1m-td 2h:59:59",Times:"2h:59:59",Time:"2h:59",Datetime:"9999-1m-td 2h:59",Date:"9999-1m-td",Int:{precision:0,prefix:"",separator:","},Dec:{precision:null,prefix:"",separator:","},Num:{precision:0,prefix:"",separator:""},Money:{precision:2,prefix:"",separator:",",negative:!1},Integer:{precision:0,prefix:""},definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]",d:"d",m:"m",h:"h",t:"t",1:"[0-1]",2:"[0-2]",3:"[0-3]",4:"[0-4]",5:"[0-5]",6:"[0-6]",7:"[0-7]",8:"[0-8]"},dataName:"rawMaskFn",doMask:function(b,c,d){var e=c.toLocaleLowerCase(),f=a(b);switch(e){case"int":case"num":case"dec":case"money":var g;g=a.extend(!0,{},this[c],d),"int"!==e&&"num"!==e||(g.precision=0),f.data("inputMaskModel",g),f.numberFormat(c,g);break;case"integer":f.scrapNumFormat(this[c].precision,this[c].prefix);break;case"custom":d&&d.model&&f.mask(d.model,d);break;default:this[c]&&f.mask(this[c],d)}},unMaskValue:function(b,c,d){var e=c.toLocaleLowerCase(),f=a(b);switch(e){case"int":case"num":case"dec":case"money":var g=a.extend(!0,{},this[c],d),h=a.trim(g.prefix+g.separator),i=a.trim(f.val());if(""!==i){if(""===h)return i.replace(/(?:\.(?:0+)?|(\.[1-9]+)0+)$/,"$1");var j=new RegExp("["+h+"]","g");return f.val().replace(j,"").replace(/(?:\.(?:0+)?|(\.[1-9]+)0+)$/,"$1")}return"";case"integer":return a(b).val().replace(/,/g,"");case"custom":return a(b).mask();default:
return a(b).val()}}};var c=(b.Browser.isIE?"paste":"input")+".mask",d=void 0!=window.orientation;a.fn.extend({caret:function(b,c){if(0!=this.length){if("number"==typeof b)return c="number"==typeof c?c:b,a("#test").val(b+":"+c),this.each(function(){if(this.setSelectionRange)this.setSelectionRange(b,c);else if(this.createTextRange){var a=this.createTextRange();a.collapse(!0),a.moveEnd("character",c),a.moveStart("character",b),a.select()}});if(this[0].setSelectionRange)b=this[0].selectionStart,c=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var d=document.selection.createRange();b=0-d.duplicate().moveStart("character",-1e5),c=b+d.text.length}return{begin:b,end:c}}},unmask:function(){return this.trigger("unmask")},mask:function(e,f){if(!e&&this.length>0){var g=a(this[0]);return g.data(b.UI.InputMask.dataName)()}f=a.extend({placeholder:"_",completed:null},f);var h=b.UI.InputMask.definitions,i=[],j=e.length,k=null,l=e.length;return a.each(e.split(""),function(a,b){"?"==b?(l--,j=a):h[b]?(i.push(h[b]),null==k&&(k=i.length-1)):i.push(null)}),this.trigger("unmask").each(function(){function g(a){for(;++a<=l&&!i[a];);return a}function m(a){for(;--a>=0&&!i[a];);return a}function n(a,b,c){switch(a){case"m":var d=v.val().substring(c-1,c),e=parseFloat(b);if("0"===d)return e>0&&e<=9;if("1"===d)return e>=0&&e<3;break;case"d":var f=v.val(),d=f.substring(c-1,c),g=f.substring(0,4),h=f.substring(5,7),i=new Date(g,h,0).getDate(),j=(i+"").split("")[0],k=(i+"").split("")[1],e=parseFloat(b);return d<j?0===d?e>0&&e<=9:e>=0&&e<=9:e>=0&&e<=k;case"h":var d=v.val().substring(c-1,c),e=parseFloat(b);if("0"===d||"1"===d)return e>=0&&e<=9;if("2"===d)return e>=0&&e<=3;break;case"t":var f=v.val(),g=f.substring(0,4),h=f.substring(5,7),i=new Date(g,h,0).getDate(),j=(i+"").split("")[0],e=parseFloat(b);return e>=0&&e<=j;default:return new RegExp(a).test(b)}}function o(a,b){if(!(a<0)){for(var c=a,d=g(b);c<l;c++)if(i[c]){if(!(d<l&&n(i[c],w[d],c)))break;w[c]=w[d],w[d]=f.placeholder,d=g(d)}t();var e=k>a?k:a;v.caret(e)}}function p(a){for(var b=a,c=f.placeholder;b<l;b++)if(i[b]){var d=g(b),e=w[b];if(w[b]=c,!(d<l&&n(i[d],e,d)))break;c=e}}function q(a){var b=a.which;if(8==b||46==b||d&&127==b){var c=v.caret(),e=c.begin,f=c.end;return f-e==0&&(e=46!=b?m(e):f=g(e-1),f=46==b?g(f):f),s(e,f),o(e,f-1),!1}if(27==b)return v.val(x),v.caret(0,u()),!1}function r(a){var b=a.which,c=v.caret();if(a.ctrlKey||a.altKey||a.metaKey||b<32)return!0;if(b){c.end-c.begin!=0&&(s(c.begin,c.end),o(c.begin,c.end-1));var d=g(c.begin-1);if(d<l){var e=String.fromCharCode(b);if(n(i[d],e,d)){p(d),w[d]=e,t();var h=g(d);v.caret(h),f.completed&&h>=l&&f.completed.call(v)}}return!1}}function s(a,b){for(var c=a;c<b&&c<l;c++)i[c]&&(w[c]=f.placeholder)}function t(){return v.val(w.join("")).val()}function u(a){for(var b=v.val(),c=-1,d=0,e=0;d<l;d++)if(i[d]){for(w[d]=f.placeholder;e++<b.length;){var g=b.charAt(e-1);if(n(i[d],g,d)!==!1){w[d]=g,c=d;break}}if(e>b.length)break}else w[d]==b.charAt(e)&&d!=j&&(e++,c=d);return!a&&c+1<j?(v.val(""),s(0,l)):(a||c+1>=j)&&(t(),a||v.val(v.val().substring(0,c+1))),j?d:k}var v=a(this),w=a.map(e.split(""),function(a,b){if("?"!=a)return h[a]?f.placeholder:a}),x=v.val();v.data(b.UI.InputMask.dataName,function(){return a.map(w,function(a,b){return i[b]&&a!=f.placeholder?a:null}).join("")}),v.attr("readonly")||v.one("unmask",function(){v.unbind(".mask").removeData(b.UI.InputMask.dataName)}).bind("focus.mask",function(){x=v.val();var a=u();t();var c=function(){a==e.length?v.caret(0,a):v.caret(a)};(b.Browser.isIE?c:function(){setTimeout(c,0)})()}).bind("blur.mask",function(){u(),v.val()!=x&&v.change(),f.callback&&f.callback()}).bind("keydown.mask",q).bind("keypress.mask",r).bind(c,function(){setTimeout(function(){v.caret(u(!0))},0)}),u()})},scrapNumFormat:function(a,b){var d=this,e=d.val(),f=function(a,b,c){var d,e,f=a.toString(),g=f.indexOf(".");g<0?(d=f,e=""):(d=f.substring(0,g),e="undefined"==typeof b?f.substring(g):f.substring(g,g+b+1));for(var h=/(-?\d+)(\d{3})/;h.test(d);)d=d.replace(h,"$1,$2");return c?c+d+e:d+e},g=function(){var a=d.val();a.match(/^[\+\-]?\d*?\.?\d*?$/)?e=a:d.val(e)},h=function(){d.val(f(d.val(),a,b))},i=function(){var a=d.val();b&&(a=a.replace(b,"")),a=a.replace(/,/g,""),d.val(a),g()};d.attr("readonly")||d.one("unmask",function(){d.unbind(".mask")}).bind("keyup.mask",g).bind(c,g).bind("blur.mask",h).bind("focus.mask",i)},numberFormat:function(d,e){var f=this,g=f.val();if(!/^[-\d\.]*$/.test(g))return f.val(""),void(g="");var h=function(a,c,e,f){var g,h,i,j=a.toString(),k=/(-?\d+)(\d{3})/;if("Money"===d&&null!==c&&"null"!==c&&(j=b.Number.round(j,c-0)||j),"undefined"==typeof b.Number.round(j))return j;if(g=j.indexOf("."),g<0)h=j,i="";else switch(h=j.substring(0,g),c){case"null":case null:i=j.substring(g);break;case"0":i="";break;default:i=j.substring(g,g+c+1)}if(f||""!==f)for(;k.test(h);)h=h.replace(k,"$1"+f+"$2");if(c>0){/\./.test(i)&&(c-=i.length-1);for(var l=0;l<c;l++)i+="0";/\./.test(i)||(i="."+i)}return e?e+h+i:h+i},i={intReg:/^[\+\-]?([1-9]\d*|0)?$/,numReg:/^\d*$/,decReg:/^[\+\-]?([1-9]\d*\.?\d*?|0\.\d*?|0)?$/,moneyReg:/^[\+\-]?([1-9]\d*\.?\d*?|0\.\d*?|0)?$/};e.negative===!1&&"Money"===d&&(i.moneyReg=/^([1-9]\d*\.?\d*?|0\.\d*?|0)?$/);var j=function(){var a=f.val();i[d.toLocaleLowerCase()+"Reg"].test(a)?g=a:f.val(g)},k=function(){var b=f.val();if(""!==a.trim(b)){var c=h(b,e.precision,e.prefix,e.separator);/^[\-\+]$/.test(b)&&(c=""),f.val(c)}},l=function(){if(!f.prop("readonly")){var c=""===a.trim(f.val())?"":a.trim(f.val());if(e.prefix&&(c=c.replace(e.prefix,"")),c=c.replace(/,/g,"").replace(/(?:\.(?:0+)?|(\.[1-9]+)0+)$/,"$1"),""===a.trim(c)?f.val(""):f.val(c),b.Browser.isIE){var d=f.get(0).createTextRange();d.move("textedit"),d.select()}j()}};""!==g&&k(),f.one("unmask",function(){f.unbind(".mask")}).unbind(".mask").bind("keyup.mask",j).bind(c,j).bind("blur.mask",k).bind("focus.mask",l)}}),a.mask={},a.mask.definitions=b.UI.InputMask.definitions}(window.comtop.cQuery,window.comtop),function(a,b){b.UI.Menu=b.UI.Base.extend({options:{uitype:"Menu",trigger:"click",width:"",on_click:null,datasource:null},_init:function(){var a=this;a.objMenu=null,a.objItemMap={},a.hideTimeout=null},_create:function(){var a=this,b=this.options.el,c=a.options.trigger;b.bind(c,function(b){b.stopPropagation(),a.show()}),b.bind("mouseout",function(b){a.hideTimeout=setTimeout(function(){a.hide()},100)}),b.bind("mouseover",function(b){clearTimeout(a.hideTimeout)})},_loadTemplate:function(b,c){var d=this._buildTemplateStr("menuDom",c);d=this._bindTplEvent(d);var e=a(d);b.append(e);for(var f=e.find("li"),g=0;g<c.length;g++){var h=c[g];if(this.objItemMap[h.id]=h,h.disabled&&this._disable(a("#"+h.id)),h.items){var i=f.eq(g);i.find("a").addClass("menu_item_a_background"),this._loadTemplate(i,h.items)}}return e},_loadMenu:function(){if(null==this.objMenu){var b=this.options;a.isFunction(b.datasource)&&(b.datasource=b.datasource()),this.setDatasource(b.datasource)}},setDatasource:function(b){if(b){this.options;this.objMenu=this._loadTemplate(a("body"),b);var c=this;this.objMenu.bind("mouseover",function(a){c.hideTimeout&&clearTimeout(c.hideTimeout),"undefined"!=typeof window._cui_button_timer&&clearTimeout(window._cui_button_timer)}),this.objMenu.bind("mouseout",function(a){c.hideTimeout=setTimeout(function(){c.objMenu.hide()},100)})}},_mouseoverHandler:function(b,c,d){if(!a("#"+c.id).attr("disabled")){c.mouseTimeout&&clearTimeout(c.mouseTimeout);var e=a(c).children(".menu_box");a(c).parent().children().css("zIndex",1),a(c).css("zIndex",2),e&&(e.show(),this._setItemPosition(e,c),this._setItemsWidth(e.children(".menu"),this.options.width),this._setIframe(e))}},_mouseoutHandler:function(b,c,d){if(!a("#"+c.id).attr("disabled")){var e=a(c).children(".menu_box");c.mouseTimeout=setTimeout(function(){e.hide()},100)}},_clickHandler:function(c,d,e){if(!a("#"+d.id).attr("disabled")){if(c.stopPropagation(),b.Browser.isIE6||b.Browser.isIE&&b.Browser.isQM)for(var f=a("#"+d.id);"BODY"!=f[0].tagName;)"DIV"==f[0].tagName&&f.hide(),f=f.parent();this.hide(),this.options.on_click&&this.options.on_click(this.objItemMap[d.id])}},_setItemPosition:function(b,c){var d=b;b=b.children(".menu");var e={},f=a(c),g=f.offset(),h=f.outerHeight(),i=f.outerWidth(),j=b.outerHeight(),k=b.outerWidth(),l=a(window).height(),m=a(window).width();m-(g.left+i+k)<10&&g.left-i>0?(e.left=0-k+4,e.right="auto"):(e.left="auto",e.right=4),l-(g.top+h+j)<10&&g.top-j>0?(e.bottom=0+j-4,e.top="auto"):(e.bottom="auto",e.top=-1),d.css(e)},_setPosition:function(b){var c,d,e=a(b).offset(),f=a(b).outerHeight(),g=a(b).outerWidth(),h=a(window).height(),i=a(window).width(),j=this.objMenu.children(".menu").outerHeight(),k=this.objMenu.children(".menu").outerWidth();c=h-(e.top+f+j)<0&&e.top-j>0?e.top-j:e.top+f,d=i-(e.left+k)<0&&e.left+g-k>0?e.left+g-k:e.left,this.objMenu.css({left:d,top:c})},_setItemsWidth:function(a,b){for(var c=a.children("li"),d=0,e=0;e<c.length;e++){var f=c.eq(e).children("a").children("span").outerWidth();f>d&&(d=f)}b>d?d=b:d+=10,a.width(d)},_setIframe:function(a){b.Browser.isIE6&&a.children("iframe").css({width:a.find(".menu_item").width(),height:a.find(".menu").height()})},_setWidth:function(b){var c;c=this.options.width?parseInt(this.options.width,10):a(b).outerWidth()-2,this.options.width=c,this._setItemsWidth(this.objMenu.children(".menu"),c)},_disable:function(a){var b=a.children("a");b.attr("cui_href",b.attr("href")).attr("href","javascript:;").css("cursor","default").children("span").addClass("menu_item_disable"),a.attr("disabled",!0)},_enable:function(a){var b=a.children("a");b.attr("href",b.attr("cui_href")).removeAttr("cui_href").css("cursor","pointer").children("span").removeClass("menu_item_disable"),a.attr("disabled",!1)},show:function(a){this._loadMenu(),this.objMenu.show(),a||(a=this.options.el),this._setWidth(a),this._setPosition(a),this._setIframe(this.objMenu)},hide:function(){this.objMenu&&this.objMenu.hide()},disable:function(b,c){this._loadMenu();var d=a("#"+b);1==c?this._disable(d):this._enable(d)},setLabel:function(b,c){this._loadMenu();var d=a("#"+b);d.children("a").children("span").html(c)}})}(window.comtop.cQuery,window.comtop),function(a){"use strict";var b=a.cQuery;a.UI.MultiNav=a.UI.Base.extend({options:{uitype:"MultiNav",unfold:!1,initchecked:[],datasource:[],target:"_self",foldercheckable:!1,on_click:null},_init:function(){this.pos=-1},_create:function(){this.root=this.options.root=this.options.el.children(".multinav").eq(0),this._setDatasource(this.options.datasource)},_initcheck:function(a){for(var b=this.root,c=0,d=a.length;c<d;c++){b=b.children("li").eq(a[c]);var e=b.find("a").eq(0);if(!e.hasClass("multinav-fold")){e.addClass("multinav-checked"),this.pos=e.attr("pos");break}c===d-1&&this.options.foldercheckable&&(e.addClass("multinav-checked"),this.pos=e.attr("pos")),e.addClass("multinav-unfold").data("unfold",!0),b=b.children("ul").eq(0),b.addClass("multinav-ul-unfold")}},_bindEvents:function(){var a=this,c=null;this.root.on("mouseover",function(d){d.stopPropagation(),"click"==d.type&&a.options.on_click&&a.options.on_click.call(this,d,d.target,c);var e=b(d.target),f=e.attr("pos");if(f||(e=e.parent(),f=e.attr("pos"))){c=a._getCheckedData(f);var g=c.bind,h=d.type;if("object"==typeof g){var i=g["on_"+h];"function"==typeof i&&(d.target=e[0],i(d,e[0],c))}}}),this.root.on("mouseout dblclick click",function(a){a.stopPropagation();var d=b(a.target),e=d.attr("pos");if(e||(d=d.parent(),e=d.attr("pos"))){var f=a.type,g=c.bind;if("object"==typeof g){var h=g["on_"+f];return"function"==typeof h&&(a.target=d[0],h(a,d[0],c)),!1}}})},_setDatasource:function(a){this.setDatasource(a,void 0),this._bindEvents(),this._initcheck(this.options.initchecked);var b=this;this.root.on("mousedown",function(a){a.stopPropagation(),b._mousedown(a.target)})},setDatasource:function(a,c){function d(a){return new Function(a)}function e(a,c){for(var g=b(document.createDocumentFragment()),h=0,i=a.length;h<i;h++){var j=a[h],k=b(document.createElement("li")),l=b(document.createElement("a"));if(l.attr("hidefocus","true"),k.append(l),j.onclick&&l.click(d(j.onclick)),j.ondblclick&&l.dblclick(d(j.ondblclick)),j.onmouseover&&l.mouseover(d(j.onmouseover)),j.onmouseout&&l.mouseout(d(j.onmouseout)),j.title&&l.attr("title",j.title),l.attr("pos",c+h),j.bind&&l.attr("ev","1"),"string"==typeof j.href?(l.attr("href",j.href),l.attr("target",j.target||f.target)):l.attr("href","javascript:;"),"object"==typeof j.children){l.addClass("multinav-fold").append('<span class="multinav-fold-icon cui-icon">&#xf0da;</span><span class="multinav-unfold-icon cui-icon">&#xf0d7;</span>'+j.name);var m=b("<ul></ul>");m.append(e(j.children,c+h+"-")),k.append(m)}else l.html(j.name);g.append(k)}return g}this.pos=-1;var f=c?b.extend(this.options,c):this.options;this.options.datasource=a,f.root.html(e(a,"")),f.unfold&&this.allUnfold(),c&&c.initchecked&&this._initcheck(c.initchecked)},allUnfold:function(){this.root.find("ul").addClass("multinav-ul-unfold").show().end().find(".multinav-fold").addClass("multinav-unfold").data("unfold",!0)},allFold:function(){this.root.find("ul").removeClass("multinav-ul-unfold").hide().end().find(".multinav-fold").removeClass("multinav-unfold").data("unfold",!1)},_mousedown:function(a){var c=b(a);c="A"===c.prop("tagName")?c:c.parent();var d=c.attr("pos");if(c.hasClass("multinav-fold")){var e=c.data("unfold");e=void 0===e?this.options.unfold:e,e?c.data("unfold",!1).removeClass("multinav-unfold").next("ul").hide():c.data("unfold",!0).addClass("multinav-unfold").next("ul").show(),this.options.foldercheckable&&(this.root.find(".multinav-checked").removeClass("multinav-checked"),c.addClass("multinav-checked"),this.pos=d)}else this.root.find(".multinav-checked").removeClass("multinav-checked"),c.addClass("multinav-checked"),this.pos=d},_getCheckedData:function(a){if(a===-1)return null;var b=this.options.datasource;a=a.split("-");for(var c=a.length,d=0;d<c-1;d++)b=b[parseInt(a[d],10)].children;return b=b[parseInt(a[d],10)]},getCheckedData:function(){var a=this._getCheckedData(this.pos);return null===a||void 0!==a.children&&!this.options.foldercheckable?null:a}})}(window.comtop),function(a,b){"use strict";var c=b.comtop;b.cui||(b.cui={});var d=function(){},e=b.cui,f=c.Browser.isIE6,g=c.Browser.isQM,h=b.document;d.prototype={_template:function(){var b=this.options,c="message"===b.boxType?b.boxType+"-"+b.messageType:b.boxType,d=['<div class="msg-box cui-msg-extend-',c,'"'];return d.push(' id="'+this.buildId+'" style="'),b.width&&d.push("width:"+b.width+"px;"),b.height&&d.push("height:"+b.height+"px;"),d.push('">'),b.canClose===!0&&d.push('<a href="#/" hidefocus="true" title="\u5173\u95ed" class="msgbox-close-btn cui-icon"><span class="msgbox-close-btn-span"></span></a>'),d.push('<div class="msgbox-titlebar">'),d.push('<span class="msgbox-title" title="'+b.title.replace(/<.*?>/g,"").replace('"',"\uff02")+'">'+b.title+"</span>"),d.push("</div>"),d.push('<div class="msgbox-content">'),d.push('<div class="box-icon cui-icon '+b.iconCls+'">',b.fontIcon,"</div>"),d.push('<div class="box-msg">'),d.push(b.msg,"</div>"),a.isArray(b.buttons)&&(d.push('<div class="msgbox-ft">'),this._buildButtons(d),d.push("</div>")),d.push("</div>"),d.push("</div>"),d.join("")},_buildButtons:function(a){for(var b=this.options,c=0,d=b.buttons.length;c<d;c++){var e="",f="btn-normal ";"function"==typeof b.buttons[c].handler&&(e+=c),b.buttons[c].focus===!0&&(b._buttonFocusIndex=c),b.buttons[c]._ok_?f+=" btn-normal-ok":b.buttons[c]._cancel_&&(f+=" btn-normal-cancel"),a.push('<a proxyIndex="'+e+'" class="cui-button '+f+'" href="#/">'),a.push('<span class="button-icon">&nbsp;</span>'),a.push(b.buttons[c].name+"</a>")}},_addClass:function(){var c=this.options,d=this.$container;"rb"===c.position?(d.addClass("msg-box-rb"),!f&&g&&d.css({bottom:"",top:a(h).scrollTop()+a(b).height()-d.outerHeight()})):"center"===c.position?d.addClass("msg-box-center").css({"margin-left":-d.width()/2,"margin-top":-d.height()/2}):"custom"===c.position&&("undefined"==typeof c.customPos.left&&(c.customPos.left="50%",c.customPos["margin-left"]=-d.width()/2),"undefined"==typeof c.customPos.top&&(c.customPos.top="50%",c.customPos["margin-top"]=-d.height()/2),d.addClass("msg-box-custom").css(c.customPos))},_showOverlay:function(){(f||g)&&(this._ieQScrollTop=a(h).scrollTop(),a(h).scrollTop(0),a("html,body").addClass("cui_overlay_ie6"),this._$iframecover&&this._$iframecover.show()),this.$overlay.show()},_hideOverlay:function(){(f||g)&&(a("html,body").removeClass("cui_overlay_ie6"),this._$iframecover&&this._$iframecover.hide(),this.options.scrollBack===!0&&a(h).scrollTop(this._ieQScrollTop)),this.$overlay.hide()},_doAnimate:function(){var a=this.$container,b=a.height();a.height(0).animate({height:b,opacity:"show"},350)},_bindEvent:function(){var b=this.options,c=this;return this.$container.delegate("a.btn-normal,span.msgbox-close-btn-span","click",function(d){var e=a(d.target),f=e.attr("proxyIndex");return c.hide(),f&&""!==f&&(f=parseInt(f,10),b.buttons[f].handler.call(null)),!1}),b.dragAble&&this._doDrag(),"number"==typeof b._buttonFocusIndex&&this.$container.find(".btn-normal").eq(b._buttonFocusIndex).focus(),!1},_doDrag:function(){var c=this.options,d=!1,e=this,f={top:0,left:0},g=this.$container.outerWidth(),i=this.$container.outerHeight(),j=function(c){var d=a(b).height(),e=a(b).width();c.left+g>=e&&(c.left=e-g),c.top+i>=d&&(c.top=d-i)},k=function(){d=!1,a(h).off("mousemove.msgBoxdrag").off("mouseup.msgBoxdrag"),e._disableSelect(!1)},l=function(a){if(d){var b={left:a.clientX-f.left,top:a.clientY-f.top};b.left=b.left<0?0:b.left,b.top=b.top<0?0:b.top,j(b),e._setPosition(b)}};a(c.dragClass,this.$container).on("mousedown.msgBoxdrag",function(b){var c=this.getBoundingClientRect();f.top=b.clientY-c.top,f.left=b.clientX-c.left,d=!0,a(h).on("mousemove.msgBoxdrag",function(a){l(a)}).on("mouseup.msgBoxdrag",function(){k()}),e._disableSelect(!0)}).on("mouseup.msgBoxdrag",k)},_disableSelect:function(b){b?(a(h.body).addClass("cui-userselectnone"),a(h).on("selectstart",function(a){return!1})):(a(h.body).removeClass("cui-userselectnone"),a(h).off("selectstart"))},_setPosition:function(b){this.options;b=a.extend({top:"",left:"",right:"","margin-left":"","margin-top":"",bottom:""},b),this.$container.css(b)},_commonOptions:{msg:"",modal:!0,canClose:!0,autoClose:!1,animate:!1,position:"center",customPos:{},opacity:.5,title:"",width:330,height:0,onClose:null,dragAble:!0,scrollBack:!1,dragClass:".msgbox-titlebar"},wrapOptions:function(a,b,c){var d=c||{};return d.msg=a,d.onClose=b,d},setOptions:function(b,c){var d=a.extend({},this._commonOptions,b,c||{});return this.options=d,d},show:function(){var a=this.options;if(this._addClass(),a.modal&&this._showOverlay(),a.animate&&!g?this._doAnimate():this.$container.show(),"number"==typeof a.autoClose){var c=this;b.setTimeout(function(){c.hide()},a.autoClose)}this._bindEvent()},hide:function(){var a=this.options;a.modal&&this._hideOverlay(),this.$container.hide(),"function"==typeof a.onClose&&a.onClose.call(null)},buildHtml:function(){var b=(900*Math.random()+100).toString().replace(".",""),c=this.options,d=h.createDocumentFragment();this.buildId=b,c.modal&&(this.$overlay=a(h.createElement("div")).addClass("cui_overlay").css("opacity",c.opacity),f&&(this._$iframecover=a(h.createElement("iframe")).addClass("cui_overlay_iframe"),a(d).append(this._$iframecover)),a(d).append(this.$overlay)),a(d).append(this._template()),"message"===this.options.boxType?a(h.body).prepend(d):a(h.body).append(d),this.$container=a("#"+this.buildId)},reBuildHtml:function(){var b=this.options;this.$container.unbind().replaceWith(this._template()),this.$container=a("#"+this.buildId),"message"!==b.boxType&&(this._$iframecover&&this._$iframecover.appendTo(h.body),this.$overlay&&this.$overlay.appendTo(h.body),this.$container.appendTo(h.body))}};var i=function(a,b){var c={alert:"box-icon-alert",success:"box-icon-success",confirm:"box-icon-confirm",error:"box-icon-error",warn:"box-icon-warn"};b.iconCls=c[a]||"box-icon-alert"},j=function(a,b,c,f,g){var h=null;e[g].builded?(h=e[g].builded,c=h.wrapOptions(a,b,c),c.boxType=g,h.setOptions(f,c),h.reBuildHtml()):(h=new d,c=h.wrapOptions(a,b,c),c.boxType=g,h.setOptions(f,c),h.buildHtml(),e[g].builded=h),h.show()},k={modal:!1,canClose:!1,autoClose:1500,animate:!0,width:180,position:"rb",title:"\u63d0\u793a",dragAble:!1,buttons:null};e.alert=function(a,b,c){var d={title:"\u63d0\u793a",buttons:[{name:"\u786e\u5b9a",focus:!0,_ok_:!0}],iconCls:"box-icon-alert",fontIcon:"&#xf05a;"};j(a,b,c,d,"alert")},e.warn=function(a,b,c){var d={title:"\u8b66\u544a",buttons:[{name:"\u786e\u5b9a",focus:!0,_ok_:!0}],iconCls:"box-icon-warn",fontIcon:"&#xf06a;"};j(a,b,c,d,"warn")},e.success=function(a,b,c){var d={title:"\u63d0\u793a",buttons:[{name:"\u786e\u5b9a",focus:!0,_ok_:!0}],iconCls:"box-icon-success",fontIcon:"&#xf058;"};j(a,b,c,d,"success")},e.error=function(a,b,c){var d={title:"\u9519\u8bef",buttons:[{name:"\u786e\u5b9a",focus:!0,_ok_:!0}],iconCls:"box-icon-error",fontIcon:"&#xf057;"};j(a,b,c,d,"error")},e.message=function(a,b,c){var d=k,e={error:"&#xf057;",success:"&#xf058;",warn:"&#xf06a;",alert:"&#xf05a;"};c=c||{},i(b,c),c.messageType=b?b:"alert",c.fontIcon=e[c.messageType],j(a,c.callback||null,c,d,"message")},e.confirm=function(a,b){var c={title:"\u786e\u8ba4",iconCls:"box-icon-confirm",fontIcon:"&#xf059;"};b=b||{},b.buttons=b.buttons||[{name:"\u786e\u5b9a",handler:b.onYes,focus:!0,_ok_:!0},{name:"\u53d6\u6d88",handler:b.onNo,_cancel_:!0}],j(a,null,b,c,"confirm")},e.msgbox=e.msgbox||{},e.msgbox.setOpt=function(b,c){"object"===a.type(b)&&("message"===c?a.extend(k,b):a.extend(d.prototype._commonOptions,b))}}(window.comtop?window.comtop.cQuery:window.jQuery,window),function(a){"use strict";var b=a.cQuery,c=a.Browser,d=c.isQM;a.UI.PullDown=a.UI.Base.extend(function(){return{options:{uitype:"PullDown",empty_text:"\u8bf7\u9009\u62e9",value:"",readonly:!1,textmode:!1,width:"200",height:"200",editable:!0,on_select_data:null,mode:"Single",datasource:null,dictionary:"",name:"",select:-1,must_exist:!0,auto_complete:!1,value_field:"id",label_field:"text",filter_fields:[],on_filter_data:null,on_change:null,on_filter:null},_init:function(d,e){var f=this.options;"pulldown"===f.uitype.toLocaleLowerCase()&&this._extendMode(e),this._initWidthAndHeight((d.width||f.width).toString(),(d.height||f.height).toString()),this.$el=f.el.addClass("pulldown-main").css("width",f.width),this.ltIE8=c.isIE6||c.isIE7,c.isQM&&this.ltIE8&&this.$el.addClass("pulldown-main-qm"),this.templateBox=b(document.createElement("div")).html(this.$el.html()),this.guid=a.guid(),this.text="",this.value="",this.valueCache="",this.isHide=!0,this.top=window.location===window.parent.location,this.eqEmptyText=!1,this.rendered=!1,this.oldData=null,this.position={}},_extendMode:function(c){var d,e,f,g=this.options.mode;if(g=g.charAt(0).toUpperCase()+g.slice(1).toLocaleLowerCase()+"PullDown",d=a.UI[g],!d)throw new Error("mode\u5c5e\u6027\u9519\u8bef\u3002");e=d.prototype;for(f in e)e.hasOwnProperty(f)&&!this[f]&&(this[f]=e[f]);this.options=b.extend({},e.options,c)},_initWidthAndHeight:function(a,b){var c=this.options;"string"!=typeof a||/%/.test(a)||(c.width=a.replace(/\D+/g,"")+"px"),b&&(this.height=parseInt(b,10)-2,c.height=this.height+"px")},setTextMode:function(){this._initData()},_create:function(){this.tipPosition=".pulldown-inner",this.tipText=this.$el.attr("tip"),this._createDom(),this._bindFocusBlurEvent(),this._bindMouseEvent(),this._bindKeyEvent(),this._resetLayoutEvent(),this._initData(),this.setReadonly(this.options.readonly)},_createDom:function(){var a,d,e=this.options,f=this.$el,g="";a=['<div class="pulldown-inner pulldown-readonly">','<input class="pulldown-text pulldown-text-value" readonly="readonly" type="text" autocomplete="off" value="" />','<a href="#/" hidefocus="true" class="pulldown-btn pulldown-loading cui-icon">&#xf107;</a>',"</div>",'<div class="cui_input_empty" style="text-align: left; margin-top:-28px;">',e.empty_text,"</div>",'<input type="hidden" class="pulldown-hidden" name="',e.name,'" />'],f.html(a.join("")),d=b(document.createElement("div")).addClass("pulldown-box"),c.isIE6&&(g='<iframe scrolling="no" frameborder="no"></iframe>'),d.html(g+'<div class="pulldown-box-inner"></div>'),b("body").append(d),this.$inner=f.find(".pulldown-inner").eq(0),this.$text=f.find(".pulldown-text").eq(0),c.isQM&&this.$text.addClass("pulldown-text-qm"),this.$empty=f.find(".cui_input_empty").eq(0),this.$btn=f.find(".pulldown-btn").eq(0),this.$hide=f.find(".pulldown-hidden").eq(0),this.$box=d,this.$boxInner=d.find(".pulldown-box-inner").eq(0)},_bindFocusBlurEvent:function(){var a=this;this.$text.on("focus",function(){a.options.readonly||(a.inValid&&a.onValid(),a._showBox())}).on("blur",function(){a._hideBox()}),this.$empty.on("click",function(){a.$text.focus()})},_showBox:function(){var a=this.$el[0].getBoundingClientRect();this.position.top=a.top,this.position.left=a.left,this.isHide===!1||this.options.designMode||(this.isHide=!1,this._setBoxLayout(this._setBoxPosition(a)),this.listenPosition(),this._isEmpty(),this.$inner.addClass("pulldown-inner-focus"),this.rendered?(this.setOldData(),this.__showBoxCallBack&&this.__showBoxCallBack()):this._callDataSource())},destroy:function(){this.$box.remove(),this.$el.remove()},listenPosition:function(){var a=this,b=a.$el[0];clearInterval(this.listenBoxPostion),this.listenBoxPostion=setInterval(function(){var c=b.getBoundingClientRect(),d=a.position;c.left===d.left&&c.top===d.top||a.$text.blur()},10)},_callDataSource:function(){this.dataCalling||(this.$btn.addClass("pulldown-loading"),this.options.datasource.call(this,this),this.dataCalling=!0)},_isEmpty:function(){var a,b,c,d=this.$text;a=d.val(),b=this.isHide,c=this.options.empty_text,a?this.$empty.hide():b?this.$empty.show():this.$empty.hide()},_isEqEmptyText:function(){for(var a=this.data,b=a.length,c=this.options,d=c.empty_text,e=c.label_field,f=0;f<b;f++)if(d===a[f][e])return this.eqEmptyText=!0,!0;return!1},_setBoxPosition:function(a){var c=28,e=d?0:2,f=10,g=a.left+b(window).scrollLeft(),h=this._getRealHeight(),i=h+c+e,j=a.top+b(window).scrollTop()+c;return j>Math.max(b.page.height(),b.client.height())-h-f&&j>h+c&&(j-=i),this.$box.css(this.ltIE8&&this.top?{left:g-2,top:j-2}:{left:g,top:j}),h},_getRealHeight:function(){return Math.min(this.height,this.$boxInner.css("height","auto").outerHeight()||28)},_setBoxLayout:function(a){this.$box.css({height:a,width:this.$el.width()-(d?0:2)})},_hideBox:function(){if(this.isHide!==!0){if(this.hideAble===!1)return void this.$text.focus();this.isHide=!0,this.$box.css("top","-999999px"),clearInterval(this.listenBoxPostion),this.$inner.removeClass("pulldown-inner-focus"),this.rendered?(this.__hideBoxCallBack&&this.__hideBoxCallBack(),this._triggerChange(!1,!1)):this._isEmpty()}},setOldData:function(){var a=this.selectData,c=b.type(a);this.valueCache=this.value,"array"===c?this.oldData=b.extend(!0,[],a):"object"===c?this.oldData=b.extend(!0,{},a):this.oldData=null},_triggerChange:function(a,b){var c,d,e;if(this.valueCache!==this.value&&!a){if(e=this.options,c=e.on_select_data,!b){if(e.designMode)return;this._triggerHandler("change"),d=e.on_change,"function"==typeof d&&d.call(this,this.selectData,this.oldData)}"function"==typeof c&&c.call(this,this.selectData)}},_bindMouseEvent:function(){var a,c=this,d=this.$text,e=function(){c.hideAble=!1};this.$btn.on("mouseup",function(a){c.hideAble=!0,a.stopPropagation(),c.readonly||(c.isHide?d.focus():d.blur())}).on("mousedown",e).on("click",function(a){a.preventDefault()}),this.$box.on("mouseout",function(e){a=e.relatedTarget,c.hideAble!==!1||b(this).find(a).length||this===a||(c.hideAble=!0,d.blur())}).on("mouseup",function(a){a.stopPropagation(),a.preventDefault(),c.hideAble=!0,c.__mouseUpHandler(a)}).on("mousedown",e).on("click",function(a){a.preventDefault()})},_bindKeyEvent:function(){var a,b=this,c=this.options;this.$text.on("keydown",function(d){switch(a=d.keyCode){case 8:c.editable||d.preventDefault();break;case 38:b.__keyDownUPHandler&&b.__keyDownUPHandler();break;case 40:b.__keyDownDownHandler&&b.__keyDownDownHandler();break;case 37:b.__keyDownLeftHandler&&b.__keyDownLeftHandler();break;case 39:b.__keyDownRightHandler&&b.__keyDownRightHandler();break;case 13:b.__keyDownEnterHandler&&b.__keyDownEnterHandler();break;default:b.__keyDownHandler&&b.__keyDownHandler()}}).on("keyup",function(a){c.editable&&b.__keyUpHandler&&b.__keyUpHandler(a)})},_resetLayoutEvent:function(){var a=this,c=this.$el[0];b(window).on("resize scroll",function(){var b,d;a.isHide||(b=c.getBoundingClientRect(),d=a.position,b.left===d.left&&b.top===d.top||a.$text.blur())})},_initData:function(){var a,c,d,e,f,g,h=this.options,i=this.templateBox.find("a[value]"),j=i.length;if(j)for(f=h.value_field,g=h.label_field,a=[],d=0;d<j;d++)e=a[d]={},e[f]=i.eq(d).attr("value"),e[g]=b.trim(i.eq(d).html());a=a||h.datasource,c=b.type(a),"function"===c?""!==h.value||h.select!==-1?this._callDataSource():this.$btn.removeClass("pulldown-loading"):"array"===c?this.setDatasource(a):this.setDatasource([])},setDatasource:function(a){var c,d,e,f=this.options;return this.data=b.extend(!0,[],a),f.textmode?(this.__renderTextMode(),this.$el.addClass("pulldown-textmode")):(this.$btn.removeClass("pulldown-loading"),c=this.rendered,this.__initMode(c),c?this._emptyStat():(this.rendered=!0,e=f.value,d=f.select,e?this.setValue(e,!1,!0):d>-1&&d<a.length&&this.setValue(a[d][f.value_field],!1,!0),f.editable&&this.$text.removeAttr("readonly")),this.isHide||this._setBoxLayout(this._setBoxPosition(this.$el[0].getBoundingClientRect()))),this},setDataSource:function(a){return this.setDatasource(a)},_emptyStat:function(){this.text="",this.value="",this.valueCache="",this.selectData=null,this.$text.val(""),this.$hide.val(""),this.eqEmptyText=!1,this._isEmpty()},resetDataSource:function(a){return this.setDatasource(a),this},_setProp:function(a){var b=a.text,c=a.value,d=a.data;this.text=b,this.value=c,this.selectData=d,this.$text.val(b),this.$hide.val(c),this._isEmpty()},open:function(){return this.$text.focus(),this},setWidth:function(a){var b=this.options;return"string"==typeof a&&/%/.test(a)?b.width=a:this._initWidthAndHeight(a+""),this.$text.blur(),this.$el.css("width",b.width),this},setValue:function(a,b,c){return this.rendered?(this.setOldData(),this.__setValue("undefined"==typeof a?this.options.value:a),this._triggerChange(b,c)):(this.options.value=a,this.$hide.val(a),this._callDataSource()),this},getValue:function(){return this.rendered?this.value:this.options.value},getData:function(){var a=this.selectData,c=b.type(a);switch(c){case"array":return b.extend(!0,[],this.selectData);case"object":return b.extend(!0,{},this.selectData);default:return null}},getText:function(){return this.__getText()},setReadonly:function(a){return a===!0?(this.readonly=!0,this.$inner.addClass("pulldown-readonly"),this.$text.attr("readonly","readonly"),this.$text.blur()):a===!1&&(this.readonly=!1,this.$inner.removeClass("pulldown-readonly"),this.options.editable?this.$text.removeAttr("readonly"):this.$text.attr("readonly","readonly")),this.options.readonly=a,this},setEditAble:function(a){a=!!a,this.options.editable=a,a?this.$text.removeAttr("readonly"):this.$text.attr("readonly","readonly")},onInValid:function(a,c){this.$inner.addClass("pulldown-error"),this.$el.attr("tip",c),b(this.tipPosition,this.options.el).attr("tipType","error"),this.inValid=!0},onValid:function(){var a,c=this.$el,d=c.find(this.tipPosition).eq(0).attr("tipID");this.$inner.removeClass("pulldown-error"),void 0!==d&&(a=window.cui.tipList[d],"undefined"!=typeof a&&a.hide()),c.attr("tip",this.tipText||""),b(this.tipPosition,this.options.el).attr("tipType","normal"),this.inValid=!1}}}())}(window.comtop),function(a){"use strict";var b=a.cQuery;a.UI.SinglePullDown=a.UI.PullDown.extend({options:{name:"pullDownName",uitype:"SinglePullDown"},__initMode:function(a){this.index=-1,a?this.$hideListBox.html(""):this.$hideListBox=b(document.createElement("div")),
this.__createList()},__renderTextMode:function(){var a,b=this.options,c=this.data;this.size=c.length,a=this.__getIndex(b.value),a>-1?this.$el.html(c[a][b.label_field]):this.$el.html("")},__createList:function(){var a,b,c,d,e,f,g=this.$boxInner,h=this.data,i=this.size=h.length,j=[],k=this.options.label_field;for(a=0;a<i;a++)f=h[a][k],j.push('<a class="pulldown-list" href="#/" index="',a,'" title="',f,'">',f,"</a>");for(g.html(j.join("")),c=g.find(".pulldown-list"),d=this.list=[],e=this.indexList=[],b=0;b<i;b++)d[b]=c.eq(b),e[b]=b},__filterList:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;if(""===a)return void this.__recoverBox();if(!this.__filterCustom(a)&&!this.__filterCustomData(a)){b=this.options,c=this.data,e=this.$boxInner,f=this.size,g=b.label_field,h=b.filter_fields,j=h.length,k=this.$hideListBox,n=this.list,o=this.indexList=[];a:for(l=0;l<f;l++)if(d=c[l],d[g].indexOf(a)!==-1)e.append(n[l]),o.push(l);else{if(j)for(m=0;m<j;m++)if(i=d[h[m]],"string"==typeof i&&i.indexOf(a)!==-1){e.append(n[l]),o.push(l);continue a}k.append(n[l])}}},__filterCustomData:function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o=this.options,p=o.on_filter_data;if("function"==typeof p){if(l=p.call(this,this,a),"array"===b.type(l)){i=this.data,j=this.size,d=this.$boxInner,e=this.indexList=[],f=this.$hideListBox,g=this.list,c=o.value_field;a:for(h=0;h<j;h++){for(k=i[h],m=l.length;m--;)if(n=l[m],k[c]===n[c]){d.append(g[h]),e.push(h);continue a}f.append(g[h])}}return!0}},__filterCustom:function(a){var c,d,e,f,g,h,i=this.options,j=i.on_filter;if("function"==typeof j){if(h=j.call(this,this,a),"array"===b.type(h))for(c=this.$boxInner,d=this.indexList=[],e=this.$hideListBox,f=this.list,g=this.size;g--;)h[g]===!0?(c.append(f[g]),d.push(g)):e.append(f[g]);return!0}},__getIndex:function(a,b){var c,d=this.options,e=a,f=d.value_field,g=this.data,h=this.size;for(void 0===a&&(e=b,f=d.label_field),c=0;c<h;c++)if(g[c][f]+""==e+"")return c;return-1},__showBoxCallBack:function(){var a=this.index;a!==-1&&this.__scrollHoverPosition(a)},__hideBoxCallBack:function(){this.options.editable&&!this.selectEvent&&this.__checkSelect(this.__getIndex(void 0,this.$text.val())),this.selectEvent=!1,this.__recoverBox(),this.__clearHover()},__clearHover:function(){var a=this.hoverIndex;"undefined"!=typeof a&&(this.list[this.indexList[a]].removeClass("pulldown-hover"),delete this.hoverIndex)},__recoverBox:function(){var a,b=this.list,c=this.indexList=[],d=this.size,e=this.$boxInner;for(a=0;a<d;a++)e.find(b[a]).length||e.append(b[a]),c.push(a)},__setValue:function(a){this.__checkSelect(this.__getIndex(a))},__checkSelect:function(a){var b,c=this.options,d=c.label_field,e=c.value_field,f=this.list,g=this.index;g!==-1&&f[g].removeClass("pulldown-checked"),a!==-1?(f[a].addClass("pulldown-checked"),b=this.data[a],this._setProp({text:b[d],value:b[e],data:b})):this._setProp({value:c.must_exist?"":this.$text.val(),text:c.must_exist?"":this.$text.val(),data:null}),this.index=a},__mouseUpHandler:function(a){var c,d=b(a.target);this.selectEvent=!0,d.hasClass("pulldown-list")?(c=d.attr("index"),c&&this.__checkSelect(c-0),this.$text.blur()):this.size||this.$text.blur()},__keyDownUPHandler:function(){var a,b,c=this.indexList,d=c.length;d&&(a=this.list,b=this.hoverIndex,"undefined"==typeof b?(b=d-1,a[c[b]].addClass("pulldown-hover")):(a[c[b]||0].removeClass("pulldown-hover"),--b===-1&&(b=d-1),a[c[b]].addClass("pulldown-hover")),this.hoverIndex=b,this.__scrollHoverPosition(b))},__keyDownDownHandler:function(){var a,b,c=this.indexList,d=c.length;d&&(a=this.list,b=this.hoverIndex,"undefined"==typeof b?(b=0,a[c[0]].addClass("pulldown-hover")):(a[c[b]||0].removeClass("pulldown-hover"),d===++b&&(b=0),a[c[b]].addClass("pulldown-hover")),this.hoverIndex=b,this.__scrollHoverPosition(b))},__scrollHoverPosition:function(a){var b=28,c=this.$box,d=a*b,e=d+b-c.height();c.scrollTop()<e?c.scrollTop(e):c.scrollTop()>d&&c.scrollTop(d)},__keyDownEnterHandler:function(){var a=this.hoverIndex;this.selectEvent=!0,"undefined"!=typeof a&&this.__checkSelect(this.indexList[a]),this.$text.blur()},__keyUpHandler:function(a){var b=a.keyCode;this.options.auto_complete&&13!==b&&37!==b&&38!==b&&39!==b&&40!==b&&(this.__clearHover(),this.__filterList(this.$text.val()))},__getText:function(){return this.text}})}(window.comtop),function(a){"use strict";var b=a.cQuery,c=a.UI.SinglePullDown.prototype;a.UI.MultiPullDown=a.UI.PullDown.extend({options:{uitype:"MultiPullDown",name:"MultiPullDownName"},__initMode:function(a){this.index=[],this.checkAll=!1,this.__createList(a)},__renderTextMode:function(){var a,b,c,d=this.options,e=d.value.split(/;|\uff1b/),f=e.length,g=d.label_field,h=d.value_field,i=this.data,j=[],k=i.length;if(f){for(b=0;b<k;b++)for(a=i[b],c=0;c<f;c++)a[h]===e[c]&&j.push(a[g]);this.$el.text(j.join(";"))}},__createList:function(a){var b,c,d,e,f,g,h=this.data,i=this.$box,j=this.size=h.length,k=[],l=this.options.label_field;for(b=0;b<j;b++)g=h[b][l],k.push('<a class="pulldown-list" href="#/" index="',b,'" title="',g,'">',g,"</a>");for(a?this.__setAllCheck(!1):(i.addClass("multi-pulldown-box").append('<div class="pulldown-list-all"><a href="#/" class="pulldown-list">\u5168\u9009</a></div>'),this.allCheckDom=i.find(".pulldown-list-all").eq(0).find(".pulldown-list").eq(0),this.__bindAllAcitveEvent()),j?i.find(".pulldown-list-all").eq(0).show():i.find(".pulldown-list-all").eq(0).hide(),d=this.$boxInner.html(k.join("")).find(".pulldown-list"),e=this.list=[],f=this.indexList=[],c=0;c<j;c++)e[c]=d.eq(c),f[c]=c},__bindAllAcitveEvent:function(){var a,b,c=this;this.allCheckDom.on("click",function(d){if(d.stopPropagation(),d.preventDefault(),c.checkAll)c.index=[];else{for(a=[],b=c.size;b--;)a[b]=!0;c.index=a}c.__setInputProp()})},__setAllCheck:function(a){var b="\u5168\u9009",c="\u53d6\u6d88";this.checkAll=a,a?this.allCheckDom.addClass("pulldown-checked").html(c):this.allCheckDom.removeClass("pulldown-checked").html(b)},__showBoxCallBack:function(){var a=this.index,b=a.length,c=0;if(b){for(;c<b;c++)if(a[c]===!0){this.__scrollHoverPosition(c);break}}else this.__scrollHoverPosition(0)},__hideBoxCallBack:function(){this.__clearHover(),this.options.editable&&this.__setIndex(void 0,this.$text.val())},__setIndex:function(a,b){var c,d,e,f,g,h,i=this.options,j=i.value_field,k=void 0===a?b:a;if("string"==typeof k){for(c=this.index=[],d=this.data,e=this.size,void 0===a&&(j=i.label_field),k=k.split(/;|\uff1b/),h=k.length,f=0;f<e;f++)for(g=0;g<h;g++)d[f][j]===k[g]&&(c[f]=!0);this.__setInputProp()}},__setInputProp:function(){var a,b,c=this.options,d=c.label_field,e=c.value_field,f=this.size,g=this.data,h=this.index,i=this.list,j=0,k=[],l=[],m=[];for(b=0;b<f;b++)a=g[b],h[b]?(j++,i[b].addClass("pulldown-checked"),k.push(a[d]),l.push(a[e]),m.push(a)):i[b].removeClass("pulldown-checked");this.__setAllCheck(j===f&&0!==f),this._setProp({text:k.join(";"),value:l.join(";"),data:m})},__clearHover:c.__clearHover,__setValue:function(a){this.__setIndex(a)},__checkSelect:function(a){var b=this.index;a<0||a>=this.size||(b[a]=!b[a],this.__setInputProp())},__mouseUpHandler:function(a){var c,d=b(a.target);d.hasClass("pulldown-list")&&(c=d.attr("index"),c&&this.__checkSelect(c-0)),this.$text.focus()},__keyDownUPHandler:c.__keyDownUPHandler,__keyDownDownHandler:c.__keyDownDownHandler,__scrollHoverPosition:function(a){var b=23,c=this.$box,d=a*b,e=d+2*b-c.height();c.scrollTop()<e?c.scrollTop(e):c.scrollTop()>d&&c.scrollTop(d)},__keyDownEnterHandler:function(){var a=this.hoverIndex;"undefined"!=typeof a&&this.__checkSelect(this.indexList[a])},__getText:function(){return""===this.text?[]:this.text.split(";")}})}(window.comtop),function(a,b){b.UI.BasePagination=b.UI.Base.extend({_init:function(b){this.options.pagesize_list="string"==typeof b.pagesize_list?this._convertTo(b.pagesize_list,"object",[25,50,100]):this.options.pagesize_list,this.$container=a(this.options.el),this.setInitData(this.options)},_create:function(){return this.totalItems<=0?void this.$container.empty():(this.setInitData(this.options),this._calTotalPage(),this._draw(),void this._bindEvent(this.$container))},_draw:function(){},_bindEvent:function(){},_calTotalPage:function(){this.totalPage=Math.ceil(this.totalItems/this.itemsPerPage),this.currentPage>=this.totalPage&&(this.currentPage=this.totalPage)},reDraw:function(){return this._create(),this},setCount:function(a){return this.options.count=this.totalItems=a,this},setPagesize:function(a){return this.setPageSize(a)},setPageSize:function(b){function c(a,b){return a-b}if("number"!=typeof b||b<=0)return this;for(var d=!1,e=0;e<this.options.pagesize_list.length;e++)if(this.options.pagesize_list[e]===b){d=!0;break}if(this.itemsPerPage=this.options.pagesize=b,!d){var f=a.extend([],this.options.pagesize_list);f.push(b),f.sort(c),f.splice(3,1),this.options.pagesize_list=f}return this.reDraw(),this},_setPageSize4Text:function(a){this.itemsPerPage=this.options.pagesize=a,this._click(this.currentPage,this.itemsPerPage)},setInitData:function(b){return this.options=a.extend(!0,this.options,b),b.pagesize_list&&(this.options.pagesize_list=b.pagesize_list),b=this.options,this.totalItems=null!=b.count?b.count:null,this.itemsPerPage=null!=b.pagesize?b.pagesize:null,this.currentPage=null!=b.pageno?b.pageno:null,this.currentPage=b.pageno=b.pageno<1?1:b.pageno,this.itemsPerPage=b.pagesize=b.pagesize<1?b.pagesize_list[1]:b.pagesize,this},go:function(a){return"number"!=typeof a?this:(a>this.totalPage&&(a=this.totalPage),this.options.pageno=this.currentPage=a,this._click(a,this.itemsPerPage),this)},next:function(){return this.currentPage===this.totalPage?this:(this.currentPage++,this.options.pageno=this.currentPage,this._click(this.currentPage,this.itemsPerPage),this)},prev:function(){return 1===this.currentPage?this:(this.currentPage--,this.options.pageno=this.currentPage,this._click(this.currentPage,this.itemsPerPage),this)},getCurrentPage:function(){return this.currentPage},setPageSizeList:function(b,c){if("array"!==a.type(b))return this;("number"!=typeof c||c<=0)&&(c=this.options.pagesize),this.options.pagesize_list=a.extend(!0,this.options.pagesize_list,b),this.options.pagesize_list.splice(3);for(var d=!1,e=0;e<this.options.pagesize_list.length;e++)if(this.options.pagesize_list[e]===c){d=!0;break}return this.itemsPerPage=this.options.pagesize=d?c:this.options.pagesize_list[1],this.reDraw(),this},_click:function(a,b){this.options.on_page_change&&this.options.on_page_change.call(this,a,b)},_setItemsPerPage:function(a){this.itemsPerPage=a}}),b.UI.Pagination=b.UI.BasePagination.extend({options:{uitype:"Pagination",cls:"pagination",count:0,display_page:4,pagesize:25,pageno:1,pagesize_list:[25,50,100],on_page_change:null,custom_pagesize:!1,customerText:""},_draw:function(){var c=this.options.display_page;c>this.totalPage&&(c=this.totalPage),c<=3&&(c=3);var d=Math.floor((c-1)/2),e=Math.ceil((c-1)/2);this.currentPage-2<d?e=e+d-(this.currentPage-2):this.totalPage-this.currentPage-1<e&&(d=d+e-(this.totalPage-this.currentPage-1)),d>this.currentPage-1&&(d=this.currentPage-1),e>this.totalPage-this.currentPage&&(e=this.totalPage-this.currentPage);var f=this.currentPage-d,g=this.currentPage+e,h={totalItems:this.totalItems,totalPage:this.totalPage,currentPage:this.currentPage,itemsPerPage:this.itemsPerPage,selectList:this.options.pagesize_list,customerText:this.options.customerText,customPageSize:this.options.custom_pagesize,displayPreCount:d,displayNextCount:e,toFirst:f,toLast:g};this.$container.html(this._buildTemplateStr("pagination",h)).addClass(this.options.cls).addClass("cui"),b.Browser.isQM&&b.Browser.isIE&&this.$container.addClass("pagination-qm"),b.UI.InputMask.doMask(this.$container.find("[act='cusPage']"),"Num"),this.options.custom_pagesize&&(b.UI.InputMask.doMask(this.$container.find("[act='customPageSize']"),"Num"),this.$container.find("[act='customPageSize']").on("input propertychange",function(c){var d=a(this).val();d.length>4&&a(this).val(b.String.interceptString(d,4))}))},_bindEvent:function(){function b(){var a=Number(d.$container.find(".page-size-num").val());return a=a?a:d.itemsPerPage,d._setItemsPerPage(a),d._calTotalPage(),d.go(d.currentPage),!1}function c(){var a=parseInt(d.$container.find(".page-skip-num").val(),10);return(isNaN(a)||a<=0)&&(a=1),a>d.totalPage&&(a=d.totalPage),d.go(a),!1}var d=this,e=this.$container;e.find('[act="numPage"]').bind("click",function(){return d.go(parseInt(a(this).text(),10)),!1}),e.find('[act="prevPage"]').bind("click",function(){return d.prev(),!1}),e.find('[act="nextPage"]').bind("click",function(){return d.next(),!1}),e.find('[act="goPage"]').bind("click",c),e.find('[act="cusPage"]').bind("keydown",function(a){13===a.keyCode&&c()}),this.$container.find('[act="sizePage"]').bind("click",function(){return d._setItemsPerPage(parseInt(a(this).text(),10)),d._calTotalPage(),d.go(d.currentPage),!1}),this.$container.find("[act='customPageSize']").on("blur",function(){b()}).on("keydown",function(b){13===b.keyCode&&a(this).trigger("blur")})}})}(window.comtop.cQuery,window.comtop),function(a,b){var c=0,d=1,e="change",f=function(a){if(!a)return{top:0,bottom:0,left:0,right:0};var b=null;return b=a.currentStyle?a.currentStyle:getComputedStyle(a,!1),{top:parseInt(b.paddingTop),bottom:parseInt(b.paddingBottom),left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)}};comtop.UI.Panel=comtop.UI.Base.extend({options:{uitype:"Panel",header_title:"",width:0,height:0,url:"",html:"",on_change:null,collapsible:!0,status:d,animate:"",containerCls:"cui-panel",titleCls:"cui-panel-title",triggerCls:"cui-panel-trigger",contentCls:"cui-panel-content"},container:null,title:null,trigger:null,content:null,status:null,events:[e],_init:function(c){var d=this.options;c.height=b.Tools.fixedNumber(c.height),c.height&&(d.height=c.height),this.status=d.status,c.html&&window[c.html]&&(d.html=window[c.html]),c.header_title&&window[c.header_title]&&(d.header_title=window[c.header_title]),d.el.css({zoom:1}),"function"==typeof d.on_change&&this.bind("change",d.on_change),""!==a.trim(d.el.html())&&(this._needBuildTemp=!0)},_create:function(){var b,c,d=this.options;this._needBuildTemp&&this._initStructures(),c=d.el,b=a(".cui-panel-content",c).hide(),this._navHeight=a(".cui-panel",c).height()-2,b.show(),this._parseMarkup(),this._initView(!0)},_parseMarkup:function(){var b=this.options;this.container=a("."+b.containerCls,b.el),this.title=a("."+b.titleCls,b.el),this.trigger=a("."+b.triggerCls,b.el).eq(0),this.content=a("."+b.contentCls,b.el)},_initView:function(b){var c=this.options;this._setUpSize(),this._bindTriggers(),c.header_title&&this._setTitle(c.header_title),c.html&&b?"string"==typeof c.html?this.content.find("div").html(c.html):this.content.find("div").append(a(c.html)):c.url&&b&&this._loadFrame(),c.collapsible?this.trigger.show():this.trigger.hide(),c.status===d?this._showView():this._hideView()},_setUpSize:function(){var c,d=this.options,e=d.height,g=d.el.parent(),h=f(d.el.find(".cui-panel-content").get(0)),i=b.Browser.isQM&&b.Browser.isIE&&!b.Browser.isIE9?0:h.top+h.bottom+2;this._contentPadding=h,d.width&&this.container.width(d.width),e?("100%"===e&&("BODY"===g.prop("tagName")?(this.h=a.client.height(),d.el.find(".cui-panel-content").eq(0).css("height",0),this.margin=parseInt(g.css("marginTop"))+parseInt(g.css("marginBottom")),d.height=e=this.h-this.margin,this._resizeHandle()):(this.margin=0,d.height=e=d.el.parent().height())),c=e-this._navHeight-i,c=c<10?10:c,d.content_height=c,d.el.find(".cui-panel-content").height(c),d.el.find(".cui-panel-iframe").height("100%"),b.Browser.isQM&&b.Browser.isIE&&this.content.children("div").height("").css("zoom",1)):this.content.children("div").height("")},_resizeHandle:function(){function c(){var b=a.client.height();d.content.css("height",d.content.height()+b-d.h+f),d.h=b}if(void 0!==this.margin){var d=this,e=(this.options,this._contentPadding),f=b.Browser.isQM&&b.Browser.isIE&&!b.Browser.isIE9?e.top+e.bottom+2:0;a(window).on("resize",c)}},get:function(a){var b=this.options[a];return"width"==a?b=b||this.container.width():"height"==a?(b=b||this.container.height(),this.status==c&&(b=this._navHeight)):b||"header_title"!=a?"status"==a&&(b=this.status):b=this._getTitle(),b},set:function(b,c){var d=!1;return"string"==typeof b?(this.options[b]=c,"url"!=b&&"html"!=b||(d=!0)):((b.hasOwnProperty("url")||b.hasOwnProperty("html"))&&(d=!0),a.extend(this.options,b)),this._initView(d),this},expend:function(){return this.options.collapsible&&this.status!=d?(this._showView(),this.status=d,this.options.onchange&&this.options.onchange.call(null,this.status),a(this).triggerHandler(e,this.status),this):this},collapse:function(){return this.options.collapsible&&this.status!=c?(this._hideView(),this.status=c,this.options.onchange&&this.options.onchange.call(null,this.status),a(this).triggerHandler(e,this.status),this):this},addIcon:function(a){if(a&&a.className){var b=a.title||"",c='<a href="#" title="'+b+'" class="cui-panel-trigger-customer '+a.className+'" hidefocus="true"></a>',d=this.title.find(".cui-panel-trigger-content").append(c);return"function"==typeof a.callback&&d.find("a."+a.className).on("click",function(){return a.callback(),!1}),this}},removeIcon:function(a){if(a)return this.title.find("a."+a).unbind().remove(),this},toggle:function(){return this.status==d?this.collapse():this.expend(),this},resize:function(a,c){if(0!=arguments.length){if("number"==typeof a){this.options.height=a;var d=this._contentPadding,e=b.Browser.isQM&&b.Browser.isIE&&!b.Browser.isIE9?0:d.top+d.bottom+2,f=a-this._navHeight-e;this.content.height(f)}"number"==typeof c&&(this.options.width=c,this.container.width(c))}},_initStructures:function(){var b=this.options,c=a(document.createElement("div"));this._buildTemplate(c,"panel",b),a(b.el).before(c).appendTo(a("."+b.contentCls,c).find("div")),b.el.css("height","100%"),this.el=b.el=c},_loadFrame:function(){var c=this.options,d=this.content.find("iframe");d.attr("src",this.options.url),this.loaded=!0,d.one("load",function(){var e=d.get(0).contentWindow.document,f=e.body.scrollHeight,g=e.documentElement.scrollHeight,h=Math.max(f,g);if(c.content_height&&(h=h<c.content_height?c.content_height:h),b.Browser.isIE6&&!b.Browser.isQM){var i=d.height();i&&h>i&&a(e).find("head").append('<style type="text/css">html{overflow-y:scroll}</style>')}a(e).width()>d.width()&&(h+=17),c.height||d.height(h)})},_bindTriggers:function(){var a=this,b=this.options.status;this.trigger.toggle(function(){b==d?a.collapse():a.expend()},function(){b==d?a.expend():a.collapse()})},_getTitle:function(){return this.title.find(".cui-panel-title-text").html()},_setTitle:function(a){this.title.find(".cui-panel-title-text").html(a)},_showView:function(){var a=this.options.animate;this.trigger.removeClass("collapse").html("&#xf068;"),a&&"slide"===a?this.content.slideDown(100):this.content.show()},_hideView:function(){var a=this.options.animate;this.trigger.addClass("collapse").html("&#xf067;"),a&&"slide"===a?this.content.slideUp(100):this.content.hide()}}),comtop.UI.Panel.EXPAND=d,comtop.UI.Panel.COLLAPSE=c}(window.comtop.cQuery,window.comtop),function(a){"use strict";var b=a.cQuery;a.UI.RadioGroup=a.UI.Base.extend({options:{uitype:"RadioGroup",name:"",radio_list:[],direction:"horizontal",value:"",readonly:!1,color:"#0078ff",br:[],border:!1,textmode:!1,on_change:null},_init:function(){var b=this.options,c=b.value,d=this._setType();this.textmode=b.textmode,this.guid=d+"group-"+a.guid()+"-",this.tipPosition=this.el,this.el=b.el.addClass(this.type+"-group"),this.tip_text=this.el.attr("tip"),this.inputs=null,this.labels=null,this.data=null,this.value=[String(c)],this.first=!0,this.values=[],this.orignalValues=[],this.texts=[],this.colors=[],this.size=0,this.readonly_list={},b.textmode&&this._create()},_setType:function(){return this.type="radio","radio"},_create:function(){if(!this.create){var a=this.type,c=this.options[a+"_list"],d=b.type(c),e=this.el,f=document.createElement("div");if(this.inner=b(f).html(e.html()),this.inputs=this.inner.find("input"),this.size=this.inputs.length,f.className=a+"group-inner",this.options.border&&this.inner.addClass(a+"group-border"),e.html(f),"function"===d)c(this);else if("array"!==d||this.size){if(!this.size)throw new Error(a+"_list's type not is a array or a function.");this._setDatasource(this._initData())}else this._setDatasource(c);this.create=!0}},_initData:function(){var a,b,c,d,e,f,g=this.inputs,h=this.size,i=0,j=[];for(a=0;a<h;a++)b=g.eq(a),c=b.attr("value"),f=b[0].nextSibling,c?(d={text:b.attr("text")||(3===f.nodeType?f.nodeValue.replace(/\s*|\n*/g,""):""),value:c},e=b.attr("readonly"),!e||"true"!==e&&"readonly"!==e.toLowerCase()||(d.readonly="readonly"),b.attr("color")&&(d.color=b.attr("color")),j.push(d)):i++;return this.size-=i,j},_setDatasource:function(a){if("array"!==b.type(a))throw new Error("data's type not is a array.");this.data=a,this.size=a.length,this._renderHtml(),this.first=!1},setDatasource:function(a){this.first||(this.value=[]),this.values=[],this.orignalValues=[],this.texts=[],this.readonly_list={},this.colors=[],this._setDatasource(a)},setDataSource:function(a){return this.setDatasource(a)},_renderHtml:function(){var a,b,c,d,e=this.options,f=this.data,g=e.name,h=e.readonly,i=this.texts,j=this.values,k=this.colors,l=this.size,m=e.direction,n=e.br,o=n.length,p={},q=this.type,r=this.guid,s=[],t=this.readonly_list;if(o)for(b=o;b--;)p[n[b]]=!0;for(a=0;a<l;a++)(0!==a&&"vertical"===m||p[a])&&s.push("<br />"),c=j[a]=f[a].value+"",this.orignalValues.push(f[a].value),d=i[a]=f[a].text,(h||f[a].readonly)&&(t[c]=a),k[a]=f[a].color,s.push('<label for="',r,a,'">','<input id="',r,a,'" type="',q,'" name="',g,'" value="',c,'" index="',a,'" hidefocus="true" />',d,"</label>");this.inner.html(s.join("")),this.inner=this.el.children().eq(0),this.labels=this.el.find("label"),this.inputs=this.el.find("input"),this._inputsAction()},_renderText:function(){var a=this.getText();null!==a?this.inner.text(a.toString()):this.inner.text("")},setTextMode:function(){this.value=[String(this.options.value)],this._renderText()},_inputsAction:function(){this._initValue(),this._setValue(void 0),this.options.textmode&&this._renderText(),this._clickEventBind(),this._setReadonly(),this._renderComplete&&this._renderComplete()},_initValue:function(a){a=(a||this.value).sort();var c,d,e=a.length,f=this.values,g=this.size,h=[];for(c=0;c<e;c++)for(d=0;d<g;d++)if(f[d]===a[c]+""){h.push(f[d]);break}this.value=b.unique(h)},_changeHander:function(){if(!this.options.designMode){var a=this.options.on_change;this._triggerHandler("change"),a&&a.call(this,this.getValue())}},getValue:function(){return this._getEle(this.orignalValues)},getText:function(){return this._getEle(this.texts)},_getEle:function(a){var b,c,d=this.value.sort(function(a,b){return a>b?1:-1}),e=d.length,f=this.size,g=this.type,h=[];for(b=0;b<e;b++)f=this._valueToIndex(d[b]),isNaN(f)||(h.push(a[f]),c=a[f]);return"radio"===g?"undefined"==typeof c?null:c:h.length?h:null},_clickEventBind:function(){var a=this;this.el.off("click").on("click",function(c){var d,e,f,g=b(c.target),h=a.readonly_list;if("INPUT"===g.prop("tagName"))if(d=g.attr("index")-0,e=g.val(),f=a._valueToIndex(a.value[0]),"undefined"!=typeof h[e]){if(isNaN(f))return a.inputs.eq(d).prop("checked",!1),!1;a.inputs.eq(f).prop("checked",!0)}else{if(f===d)return;a._checked(d),a.value=[e],a.labels.eq(f).removeClass(this.type+"-group-checked").css({color:"",fontWeight:""}),a._changeHander()}})},_valueToIndex:function(a){if("undefined"==typeof a)return NaN;for(var b=this.values,c=this.size,d=0;d<c;d++)if(a===b[d])return d;return NaN},_checked:function(a){var b=this.labels.eq(a),c=this.colors[a];b.addClass(this.type+"-group-checked"),c?b.css("color",c):b.css("color",this.options.color)},show:function(){this.inner.show()},hide:function(){this.inner.hide()},setValue:function(a,c){if(!this.textmode){var d,e,f,g=b.extend([],this.value);if(this._setValue(a),!c)if(d=this.value,e=d.length,e===g.length){for(f=0;f<e;f++)if(g[f]!==d[f]){this._changeHander();break}}else this._changeHander()}},_setValue:function(a){var c=b.type(a);"undefined"!==c&&("array"===c?(a=b.extend([],a),this._initValue(a)):""!==a?this._initValue([String(a)]):this.value=[""]);var d,e,f=(this.options,this.size),g=this.values,h=this.value,i=h.length,j=this.inputs,k=this.labels,l=this.type;a:for(d=0;d<f;d++){for(e=0;e<i;e++)if(h[e].toString()===g[d]){j.eq(d).prop("checked",!0),this._checked(d);continue a}j.eq(d).prop("checked",!1),k.eq(d).removeClass(l+"-group-checked").css("color","")}},setReadonly:function(a,c){if(!this.textmode){var d,e,f,g,h=b.type(c),i=this.readonly_list,j=this.values,k=this.size;if("boolean"==typeof a&&("array"===h||"undefined"===h))for("undefined"===h&&(c=j),d=c.length,e=d;e--;)for(f=k;f--;)if(g=j[f],c[e].toString()===g){a?i[g]=f:delete i[g],this._setReadonlyAction(f,a);break}}},_setReadonly:function(){var a,b=this.readonly_list;for(a in b)b.hasOwnProperty(a)&&this._setReadonlyAction(b[a],!0)},_setReadonlyAction:function(a,b){var c=this.labels,d=this.inputs,e=this.type;b?(comtop.Browser.isIE8?0===c.eq(a).find(".radio-readonly").length&&c.eq(a).prepend("<div class='radio-readonly'></div>"):c.eq(a).addClass(e+"-group-readonly"),d.attr("hidefocus","true")):(c.eq(a).find(".radio-readonly").remove(),c.eq(a).removeClass(e+"-group-readonly"),d.removeAttr("hidefocus"))},isReadonly:function(a){var b,c=this.readonly_list,d=0;if("undefined"==typeof a){for(b in c)c.hasOwnProperty(b)&&d++;return this.size===d}return c.hasOwnProperty(a)},onInValid:function(a,b){this.el.addClass(this.type+"-group-error").attr("tip",b),this.el.attr("tipType","error")},onValid:function(){var a,b=this.el,c=b.find(this.tipPosition).eq(0).attr("tipID");b.removeClass(this.type+"-group-error"),void 0!==c&&(a=window.cui.tipList[c],"undefined"!=typeof a&&a.hide()),this.tip_text?b.attr("tip",this.tip_text):b.attr("tip",""),b.attr("tipType","normal")}})}(window.comtop),function(a){"use strict";var b=a.cQuery;a.UI.CheckboxGroup=a.UI.RadioGroup.extend({options:{uitype:"CheckboxGroup",name:"",checkbox_list:[],direction:"horizontal",value:[],color:"#0078ff",textmode:!1,allselect:"",br:[],readonly:!1,border:!1},_setType:function(){return this.type="checkbox","checkbox"},_deleteVal:function(a){for(var b=this.value,c=b.length,d=0;d<c;d++)if(b[d]===a){b.splice(d,1);break}return b},_renderComplete:function(){if(this.options.allselect){var a=this.options,c=this.allId=this.guid+"all",d=this.type,e=this.allLabel=b("<label>");e.attr("for",c),e.html(['<input id="',c,'" type="',d,'" hidefocus="true" />',a.allselect].join("")),(a.br.length||"vertical"===a.direction)&&this.inner.prepend("<br />"),this.inner.prepend(e),this.allInput=b("#"+c),this._checkAllSelect()}},_changeHander:function(){var a=this.options,b=a.on_change;a.allselect&&this._checkAllSelect(),a.designMode||(this._triggerHandler("change"),"function"==typeof b&&b(this.getValue()))},_checkAllSelect:function(){this.value.length===this.size?(this.allInput.prop("checked",!0),this.allLabel.css("color","#f60")):(this.allInput.prop("checked",!1),this.allLabel.css("color",""))},_clickEventBind:function(){var a=this,c=!!a.options.allselect;this.el.off("click").on("click",function(d){var e,f,g=b(d.target),h=g.prop("checked"),i=a.readonly_list;"INPUT"===g.prop("tagName")&&(e=g.attr("index")-0,f=g.val(),"undefined"!=typeof i[f]?d.preventDefault():c&&a.allId===g.attr("id")?h?a.selectAll():a.unSelectAll():(h?(a._checked(e),a.value.push(f),b.unique(a.value)):(a._deleteVal(f),a.labels.eq(e).removeClass(this.type+"-group-checked").css({color:"",fontWeight:""})),a._changeHander()))})},getValueString:function(a){var b=this.getValue();return b?b.join(a||"\u3001"):""},getTextString:function(a){var b=this.getText();return b?this.getText().join(a||"\u3001"):""},selectAll:function(){this.setValue(this.values)},unSelectAll:function(){this.setValue([])}})}(window.comtop),function(a,b){b.UI.Tab=b.UI.Base.extend({options:{uitype:"Tab",width:0,head_width:"",height:0,tab_width:65,active_index:0,tabs:[],fill_height:!1,reload_on_active:!0,closeable:!1,trigger_type:"click"},_className:{parentCls:"cui-tab",navCls:"cui-tab-nav",contentCls:"cui-tab-content",titleCls:"cui-tab-title",activeTriggerCls:"cui-active",hoverTriggerCls:"cui-tab-hover",closeTriggerCls:"cui-tab-close"},active_index:0,navs:[],titles:[],contents:[],urls:[],events:["switch"],handles:[],_initUrl:function(){this.urls=a.map(this.options.tabs,function(a){return a.url||!1})},_initHandles:function(){this.handles=a.map(this.options.tabs,function(a){return a.on_switch||!1})},_init:function(){var c=this.options;c.tab_width=b.Tools.fixedNumber(c.tab_width),c.width=b.Tools.fixedNumber(c.width),c.height=b.Tools.fixedNumber(c.height),this.active_index=this.options.active_index||0,a.each(c.tabs,function(c,d){"object"==typeof d.html&&a(d.html).hide(),d.tab_width=b.Tools.fixedNumber(d.tab_width)}),""!=this.options.el.html().replace(/\s+/g,"")&&(this._isHTMLTemplate=!0)},_create:function(){var b=this.options,c=b.el,d=".";if(this._isHTMLTemplate&&this._initStructures(),this._initUrl(),this._initHandles(),this._navHeight=a(d+this._className.parentCls,c).height(),b.fill_height){var e=b.el.parent();if("BODY"===e.prop("tagName")){var f=a.client.height(),g=parseInt(e.css("marginTop"))+parseInt(e.css("marginBottom"));b.height=f-g,this._resizeHandle()}else b.height=e.height()}this._parseMarkup(),this._setUpHeight(),this._initView(!0),this._bindTriggers()},_initStructures:function(){var b=[],c=this.options;a.each(c.el.children(),function(){var c=a(this).attr("data-options");try{c=a.parseJSON(c)}catch(d){c={}}"string"==typeof c.closeable&&(c.closeable="true"===c.closeable),"string"==typeof c.tab_width&&(c.tab_width=parseInt(c.tab_width)),c.url||(c.html=a(this).children()),b.push(c)}),this.options=a.extend({},this.options,{tabs:b}),this.options.el.children().hide(),this._buildTemplate(this.options.el,"tab",this.options,!0)},_resizeHandle:function(){function b(){var b=a.client.height(),e=d.height;e||(e=d.el.height()),c.resize(e+b-c.h),c.h=b}var c=this,d=this.options;c.h=a.client.height(),a(window).on("resize",b)},_parseMarkup:function(){var b=this._className,c=this.options.el,d=".",e=a(d+b.navCls,c),f=a(d+b.contentCls,c);this.navs=e.children(),this.titles=a(d+b.titleCls,c),this.contents=f.children()},_setUpHeight:function(){var b,c=this.options;return c.height?(b=c.height-this._navHeight,b=b<10?10:b,void(c.content_height=b)):void this.contents.each(function(){var b=a(this).get(0);"DIV"!==b.nodeName&&"IFRAME"!==b.nodeName||(b.style.height="")})},attr:function(){var b=arguments;if(0==b.length)return a.extend(!0,{},this.options);if(1==b.length){if("string"==typeof b[0]){var c=this.options[b[0]];return"width"==b[0]&&(c=a(this.options.el).width()),"height"==b[0]&&(c=a(this.options.el).height()),c}if("object"==typeof b[0]){this.options;return a.extend(this.options,b[0]),this._setUpHeight(),this._initView(!1),this}}},switchTo:function(a){return this._switchTo(a),this},next:function(){return this.switchTo((this.active_index+1)%this.navs.length),this},prev:function(){var a=this.navs.length;return this.switchTo((this.active_index-1+a)%a),this},onClose:function(b){return a(this).bind("close",b),this},resize:function(c,d){var e={};"number"==typeof c&&(e.height=c),"number"==typeof d&&(e.width=d),a.extend(this.options,e),this._setUpHeight();var f=this.options,g=a("."+this._className.contentCls,f.el),h=b.Browser;if(f.width){f.el.width(f.width);var i="number"==typeof f.width?f.width-(h.isIE&&h.isQM?0:6):f.width;g.width(i)}f.content_height&&g.height(f.content_height+(h.isIE&&h.isQM?10:0))},addTab:function(){var b=this.options,c={title:"",closeable:b.closeable,tab_width:b.tab_width},d=arguments,e=this.navs.length;return 2==d.length?(c.title=d[0],c.url=d[1]):1==d.length&&"object"==typeof d[0]&&a.extend(c,d[0]),b.tabs[e]=c,this._add(c),this._calculateTabsLen(),this},removeTab:function(b){if(b<this.navs.length&&this.navs.length>1){this.active_index===b&&this.next(),this.navs.eq(b).remove(),this.contents.eq(b).remove(),this.urls.splice(b,1),
this.active_index>0&&b<this.active_index&&this.active_index--;var c=this.options.tabs.splice(b,1);this._parseMarkup(),a(this).triggerHandler("close",c),this._calculateTabsLen()}return this},getActiveTab:function(){return this.getTab(this.active_index)},getTab:function(a,b){if(!b)return this.navs.get(a);var c;switch(b){case"tab_width":c=this.navs.eq(a).width();break;case"title":c=this.titles.eq(a).html();break;case"html":c=this.options.tabs[a].html;break;case"url":c=this.options.tabs[a].url;break;case"closeable":c=this.navs.eq(a).hasClass(this._className.closeTriggerCls)}return c},getContent:function(a){var a=void 0===a?this.active_index:a;return this.contents[a]},setTab:function(b,c,d){return"string"==typeof c?this.options.tabs[b][c]=d:a.extend(this.options.tabs[b],c),this._initTabs(),this._initUrl(),this.active_index==b&&this._loadFrame(this.active_index,this.active_index),this},index:function(){return this.active_index},_bindTriggers:function(){var b=this;this.navs.hover(function(){b.navs.index(a(this))!==b.active_index&&a(this).addClass(b._className.hoverTriggerCls)},function(){a(this).removeClass(b._className.hoverTriggerCls)}),"click"==this.options.trigger_type?a("."+this._className.navCls,this.options.el).bind("click",a.proxy(this,"_onTrigger")):"mouseover"==this.options.trigger_type&&this.navs.bind("mouseover",a.proxy(this,"_onMouseover"));var c="."+this._className.closeTriggerCls;a("."+this._className.navCls+" > li",this.options.el).delegate(c,"click",function(a){var c=b._findNav(a.target),d=b.navs.index(c);return b.removeTab(d),!1}),a(".tabs-scroller-left,.tabs-scroller-right",this.options.el).on("click",function(){var c=a(".cui-tab-head").scrollLeft(),d=a(".cui-tab-head",b.options.el).outerWidth(),e=0;b.navs.each(function(){e+=a(this).outerWidth()+8}),a(this).is(".tabs-scroller-left")?a(".cui-tab-head").animate({scrollLeft:c-65},"fast"):c<e-d&&(c+65>e-d?a(".cui-tab-head").animate({scrollLeft:e-d+22},"fast"):a(".cui-tab-head").animate({scrollLeft:c+65},"fast"))}),a(window).on("resize",function(){b._calculateTabsLen()})},_loadFrame:function(c,d){var e=this.options,f=this.urls.length>0&&this.urls[c];if(void 0!=d&&e.reload_on_active){var g=this.contents.eq(d).unbind().removeData("_binded");this.urls[d]&&g.attr("src","about:blank")}if(f){var h=this.contents.eq(c).show();("about:blank"==h.attr("src")||e.reload_on_active)&&(h.attr("src",this.urls[c]),h.data("_binded")||h.bind("load",function(){try{var c=h.get(0).contentWindow.document,d=a(c).height();if(b.Browser.isIE6){var f=parseInt(h.css("height").replace("px",""));f&&d>f&&a(c).find("head").append('<style type="text/css">html{overflow-y:scroll}</style>')}a(c).width()>h.width()&&(d+=17),e.height||h.height(d)}catch(g){}}).data("_binded",!0))}},_initView:function(c){this.contents.css({position:"absolute",left:-999999}),this.contents.eq(this.active_index).css({position:"static",left:0});var d=this.options,e=a("."+this._className.contentCls,d.el),f=b.Browser;if(d.width){d.el.width(d.width);var g="number"==typeof d.width?d.width-(f.isIE&&f.isQM?0:6):d.width;e.width(g)}d.content_height&&e.height(d.content_height+(f.isIE&&f.isQM?10:0)),c||(d.tab_width&&this.navs.width(d.tab_width),d.tabs.length>0?this._initTabs(c):this._initCloseBtns()),this._initContents(),this._calculateTabsLen()},_calculateTabsLen:function(){var b=(this.options,a(".cui-tab-head",this.options.el)),c=b.width(),d=0;this.navs.each(function(){d+=a(this).outerWidth()+8}),c>d?(a(".tabs-scroller-left,.tabs-scroller-right",this.options.el).hide(),b.css({margin:"0"})):(a(".tabs-scroller-left,.tabs-scroller-right",this.options.el).show(),b.css({margin:""}));var e=b.css("marginLeft").replace("px",""),f=a(".cui-tab",this.options.el).width()-c-parseInt(e);a(".tabs-scroller-right",this.options.el).css("right",f>1?f:0),a(".cui-tab-head").animate({scrollLeft:0})},_initTabs:function(b){var c=this,d=c.options;d.tabs.length>0&&a.each(d.tabs,function(a,b){b.tab_width&&c.navs.eq(a).width(b.tab_width);var e=void 0!==b.closeable?b.closeable:d.closeable;e?c._addCloseBtn(a):c._removeCloseBtn(a),b.title&&c.titles.eq(a).html(b.title)})},_initContents:function(b,c){var d=b||this.active_index,e=this.options.tabs[d],f=this.contents.eq(d);e&&(e.html?e.__isLoad_||("string"==typeof e.html?f.html(e.html).show():f.append(a(e.html).show()).show(),e.__isLoad_=!0):e.url&&this._loadFrame(d,c))},_initCloseBtns:function(){for(var a=this.options,b=this.navs.length,c=0;c<b;c++)a.closeable===!0?this._addCloseBtn(c):this._removeCloseBtn(c)},_onTrigger:function(a){var b=this._findNav(a.target);b&&(idx=this.navs.index(b),this._switchTo(idx,a))},_findNav:function(b){for(;b!=this.options.el&&b!=document.body;){if(a(b).parent().hasClass(this._className.navCls))return b;b=b.parentNode}return null},_onMouseover:function(a){var b=this.navs.index(a.currentTarget);this._switchTo(b,a)},_triggerIsValid:function(a){return this.active_index!=a&&a<this.navs.length},_switchTo:function(b,c,d){if(this._triggerIsValid(b)){var e=this.active_index,f=b,g=this.navs.eq(e),h=this.navs.eq(f),i=this.contents.eq(e),j=this.handles[b],k=this.contents.eq(f);return this.active_index=this.options.active_index=f,this._switchTrigger(g,h)._switchView(i,k),this._initContents(this.active_index,e),d&&d.call(this),a(this).triggerHandler("switch",[{fromTab:e,toTab:f}]),"function"===a.type(j)?j.call(this,{fromTab:e,toTab:f}):"string"===a.type(j)&&window[j]&&window[j]({fromTab:e,toTab:f}),this}},_switchTrigger:function(a,b){return a.removeClass(this._className.activeTriggerCls),b.addClass(this._className.activeTriggerCls),this},_switchView:function(a,b){return a.css({position:"absolute",left:-999999,top:-99999}),b.css({position:"static",left:0,top:0}),this},_add:function(b){var c,d=this.options,e=this.navs.length,f=!!b.closeable,g=this._findClone(f);g!==-1?c=this.navs.eq(g).clone(!0):(c=this.navs.eq(0).clone(!0),f?this._addCloseBtn(e,c):this._removeCloseBtn(c)),c.hasClass(this._className.activeTriggerCls)&&c.removeClass(this._className.activeTriggerCls),c.width(b.tab_width||d.tab_width),c.attr("title",b.title||""),a("."+this._className.titleCls,c).html(b.title),this.navs.eq(e-1).after(c);var h;d.content_height||this._minHeight;b.url?(h=a('<iframe src="about:blank" frameborder="0" style="width:100%;height:100%"></iframe>'),this.urls[e]=b.url):h=a('<div style="width:100%;height:100%;overflow:auto;"></div>'),h.hide(),this.contents.eq(e-1).after(h),this._parseMarkup()},_addCloseBtn:function(a,b){b||(b=this.navs.eq(a)),b.addClass("closeable").append(this._generateCloseBtn(a))},_generateCloseBtn:function(a){var b="<a href='javascript:;' class='"+this._className.closeTriggerCls+"'></a>";return b},_removeCloseBtn:function(b){var c="number"==typeof b?this.navs.eq(b):b;a("."+this._className.closeTriggerCls,c).remove()},_findClone:function(b){return a.inArray(b,this._getCloseBtns())},_getCloseBtns:function(){for(var a,b=!!this.options.closeable,c=this.navs.length,d=this.options.tabs,e=[],f=0;f<c;f++)a=d[f],e.push(a&&void 0!==a.closeable?a.closeable:b);return e}})}(window.comtop.cQuery,window.comtop),function(a,b){b.UI.Textarea=b.UI.Base.extend({options:{uitype:"Textarea",name:"",relation:"",position:"top",value:"",width:"300",height:"57",readonly:!1,maxlength:-1,"byte":!0,emptytext:"",autoheight:!1,maxheight:"",textmode:!1,on_change:null,on_focus:null,on_blur:null,on_keyup:null,on_keydown:null},tipPosition:".textarea_textarea",_init:function(){var a=this.options;a.width=b.Tools.fixedNumber(a.width),a.height=b.Tools.fixedNumber(a.height),a.id=b.guid(),""===a.name&&(a.name=b.guid()+"_"+a.uitype),a.maxheight=/^(\d)+(px|PX)*$/.test(a.maxheight)?a.maxheight.replace("px",""):""},_create:function(){var c,d=this,e=d.options;if(e.maxheight!==-1&&(e.relation=e.relation||"t_count"),e.el.children("textarea").length>0&&(e.value=e.el.children("textarea").val()),e.el[0].innerHTML=this._createDom(),c=this.$textarea=a("#"+e.id),this._bindEvent(),this.$box=e.el.find(".cui_textarea_box"),this.$empty=e.el.find(".cui_textarea_empty").eq(0).on("mousedown",function(){c.focus()}),""!==e.relation&&e.maxlength!==-1){this.$relation=a("#"+e.relation);var f=e.maxlength-d._getStringLength(e.value)<0?0:e.maxlength-d._getStringLength(e.value);this.$relation.text(f)}e.maxlength!==-1&&this._textCounter(),""!==e.emptytext&&""===e.value&&this.$empty.html(e.emptytext),""===e.height&&(e.height="51"),this.setHeight(e.height),""===e.width&&(e.width="300"),this.setWidth(e.width),e.readonly&&this.setReadOnly(!0),e.maxlength>-1&&this.$textarea.on("input propertychange",function(a){d._textCounter(),d.$relation&&d.$relation.text(d._getRemainLength())}),this.$textarea.on("keypress",function(a){d._keyPressHandler(a)}),e.autoheight&&(this.$textarea.css({overflow:"hidden"}),b.Browser.isIE9?(this.$textarea.on("input change",function(){d._autoHeight()}),this.$textarea.on("keydown",function(a){46!==a.keyCode&&8!==a.keyCode||d._autoHeight()})):(d.$textarea.bind("input",function(){d._autoHeight()}),d.$textarea.bind("propertychange",function(){"value"===window.event.propertyName&&(b.Browser.isIE8?setTimeout(function(){d._autoHeight()},1):d._autoHeight())})),e.value&&d._autoHeight())},_createDom:function(){var b=this,c=b.options,d=c.maxlength>0&&c.relation&&!a("#"+c.relation).length,e=d?'<span style="font-size:12px;">\u60a8\u8fd8\u80fd\u8f93\u5165<em id="'+c.relation+'" style="color:red;"></em>\u4e2a\u5b57\u7b26</span>':"",f='<div class="cui_textarea_box"><div class="cui_textarea_empty"></div><textarea name="'+c.name+'" id="'+c.id+'" class="textarea_textarea">'+c.value+"</textarea></div>";return e="top"===c.position?e+f:f+e,['<div id="',c.id,'_wrap" class="textarea_textarea_wrap" style="width: ',c.width,'px;">',e,"</div>"].join("")},_bindEvent:function(){var a=this;a.options;a.$textarea.on("blur",function(b){a._blurHandler(b)}),a.$textarea.on("change",function(b){a._changeHander(b)}),a.$textarea.on("focus",function(b){a._focusHandler(b)}),a.$textarea.on("keyup",function(b){a._keyupHandler(b)}),a.$textarea.on("keydown",function(b){a._keydownHandler(b)})},setWidth:function(c){c+="";var d=a(".textarea_textarea_wrap",this.options.el);b.Browser.isIE8&&d.find("textarea").css({width:"100px","min-width":"100%","max-width":"100%"}),b.Browser.isQM||c.indexOf("%")!==-1?d.css({width:c}):d.css({width:parseFloat(c)+"px"})},setHeight:function(a){a+="",b.Browser.isQM||a.indexOf("%")!=-1?this.$textarea.css({height:a}):this.$textarea.css({height:parseFloat(a)-10+"px"})},setValue:function(a,b){var c=this.$textarea,d=this.options;a=null==a||void 0==a?"":a,c.val(a),""!==a?this.$empty.html(""):""!==d.emptytext&&this.$empty.html(d.emptytext),this.$relation&&this.$relation.text(this._getRemainLength()),d.maxlength!==-1&&this._textCounter(),b?this.onValid():(this._triggerHandler("change"),this.$textarea.change());var e=this;d.autoheight&&e._autoHeight()},getValue:function(){var b=this.$textarea.val(),c=this.options.emptytext;return a.trim(b)===c?"":b},setMaxLength:function(a){var b=this.options;b.maxlength=a,b["byte"]||this.$textarea.attr("maxlength",a),this._textCounter(),this.$relation&&this.$relation.text(this._getRemainLength())},_getRemainLength:function(){var a=this.options.maxlength-this._getStringLength(this.getValue());return a<0?0:a},setReadOnly:function(a){this.setReadonly(a)},setReadonly:function(a){var b=this.options;b.readonly=a,this.$textarea.attr("readonly",a),a?b.el.addClass("textarea_garybg"):b.el.removeClass("textarea_garybg")},focus:function(){var a=this.options;return a.readonly||a.el.find("textarea").focus(),this},_changeHander:function(a){var b=this.options;return!b.readonly&&(""!==this.getValue()?this.$textarea.removeClass("textarea_tipcolor"):""!==b.emptytext&&this.$empty.html(b.emptytext),this.$relation&&this.$relation.text(this._getRemainLength()),this._triggerHandler("change"),void this._customHandler("on_change",a))},_focusHandler:function(a){var b=this.options;return!b.readonly&&!b.designMode&&(this._removeEmptyText(!0),this.$box.addClass("textarea_textareafocus"),this.onValid(),void this._customHandler("on_focus",a))},_blurHandler:function(a){var b=this.options;if(b.readonly||b.designMode)return!1;this._removeEmptyText(!1),this.$box.removeClass("textarea_textareafocus"),this._textCounter();var c=this.getValue();""!==c&&null!=c&&this._triggerHandler("change"),this._customHandler("on_blur",a)},_keyPressHandler:function(a){var b=this.options;return!b.readonly&&void this._customHandler("on_keypress",a)},_keyupHandler:function(a){var b=this.options;return!b.readonly&&void this._customHandler("on_keyup",a)},_keydownHandler:function(a){var b=this.options;return!b.readonly&&void this._customHandler("on_keydown",a)},_customHandler:function(b,c){var d=this.options,e=d[b];d.designMode||("string"===a.type(e)?"function"==typeof window[e]&&window[e].call(this,c,this):"function"==typeof e&&e.call(this,c,this))},_removeEmptyText:function(a){var b=this.options.emptytext,c=this.getValue();""!==b&&0===c.length&&(a?this.$empty.html(""):this.$empty.html(this.options.emptytext))},_textCounter:function(){var a=this.options;if(a.maxlength>-1){var b=this._getStringLength(this.getValue());b>a.maxlength&&(this.$textarea.val(this._interceptString(this.getValue(),a.maxlength)),this.autoheight&&this._autoHeight())}return!1},_getStringLength:function(a){var c=this.options;return c["byte"]?b.String.getBytesLength(a):a.match(/\n/gi)?a.length+a.match(/\n/gi).length:a.length},_interceptString:function(a,c){var d=this.options;return d["byte"]?b.String.intercept(a,c):b.String.interceptString(a,c)},_autoHeight:function(){var a=this,c=a.$textarea;b.Browser.notIE&&(c.data("origin-height")||c.data("origin-height",c.outerHeight()),c.height(c.data("origin-height")));var d=a.options,e="hidden",f=c.get(0).scrollHeight;b.Browser.isIE&&c.get(0).scrollHeight!==f&&(f=c.get(0).scrollHeight),f=f<d.height-10?d.height-10:f,d.maxheight&&f>d.maxheight-10&&(f=d.maxheight-10,e="auto"),c.css({height:f,overflow:e})},onInValid:function(b,c){var d=this,e=d.options;d.$box.addClass("textarea_invalid"),null==e.tipTxt&&(e.tipTxt=e.el.attr("tip")||""),e.el.attr("tip",c),a(d.tipPosition,e.el).attr("tipType","error")},onValid:function(b){var c=this,d=c.options,e=a(c.tipPosition,d.el).attr("tipID");if(c.$box.removeClass("textarea_invalid"),null==d.tipTxt&&(d.tipTxt=d.el.attr("tip")||""),void 0!==e){var f=cui.tipList[e];"undefined"!=typeof f&&f.hide()}d.el.attr("tip",d.tipTxt),a(c.tipPosition,d.el).attr("tipType","normal")}})}(window.comtop.cQuery,window.comtop),function(a,b){function c(b,d){b.length>0&&a.each(b,function(a,b){void 0===b.icon&&(b.icon=d),b.children&&c(b.children,d)})}comtop.UI.Tree=comtop.UI.Base.extend({options:{uitype:"Tree",children:null,checkbox:!1,select_mode:1,persist:!1,icon:"",checkbox_style:"",on_dbl_click:null,on_expand:null,on_select:null,on_click:null,on_activate:null,on_focus:null,on_blur:null,on_lazy_read:null,auto_focus:!1,keyboard:!1,click_folder_mode:3,min_expand_level:1,default_expand_level:1,theme:"cui",on_post_init:null,reactive:!0},dtree:null,_init:function(b){var d=this,e=this.options;"false"!==e.icon&&""!==e.icon&&"cui"===e.theme?c(e.children,e.icon):"classic"===e.theme&&c(e.children,null),"string"==typeof e.checkbox_style&&""!==e.checkbox_style&&(e.classNames={checkbox:"dynatree-radio"}),"function"==typeof e.children&&(e.initDataFn=e.children,e.children=[]),a.each(this.options,function(b,c){var f=b.indexOf("_");if(f&&f!==-1){var g="";a.each(b.split("_"),function(a){g+=0===a?this:this.charAt(0).toUpperCase()+this.substring(1)});var h=c;"function"==typeof h?d._proxyEvent(h,e,g):e[g]=c}})},_proxyEvent:function(a,b,c){var d=this;b[c]=function(){var b=this;if(1===arguments.length)a.call(null,d._wrapNode(arguments[0]));else if(2===arguments.length)if("boolean"==typeof arguments[0])"boolean"==typeof arguments[1]?a.apply(b,arguments):a.call(null,arguments[0],d._wrapNode(arguments[1]));else{if("onClick"===c){var e=arguments[1].target||arguments[1].srcElement;if("span"===e.nodeName.toLowerCase()&&"dynatree-expander"===e.className)return}a.call(null,d._wrapNode(arguments[0]),arguments[1])}}},_create:function(){var b=this.options;a.isArray(b.children)?b.children.length&&(b.children[0]._firstNode=!0):b.children&&"object"==typeof b.children?(b.children._firstNode=!0,b.children=[b.children]):b.children=[],this.dtree=a(this.options.el).dynatree(this.options).dynatree("getTree"),b.el.addClass("tree_"+b.theme),b.initDataFn&&b.initDataFn(this,b)},getActiveNode:function(){return this._wrapNode(this.dtree.getActiveNode())},getNode:function(a){return this._wrapNode(this.dtree.getNodeByKey(a))},selectNode:function(a,b){return this.getNode(a).select(b)},enable:function(){return this.dtree.enable(),this},disable:function(){return this.dtree.disable(),this},setDatasource:function(b){if("object"==typeof b&&null!==b)return a.isArray(b)?b.length&&(b[0]._firstNode=!0):(b._firstNode=!0,b=[b]),this.options.children=b,this.getRoot().removeChildren().addChild(b),this},getDatasource:function(){var a=this.dtree.toDict();return a.children},getDataSource:function(){return this.getDatasource()},getSelectedNodes:function(b){var c=this,d=this.dtree.getSelectedNodes(b);return a.map(d,function(a,b){return c._wrapNode(a)})},getRoot:function(){return this._wrapNode(this.dtree.getRoot())},bind:function(a,b){if("string"==typeof a&&"function"==typeof b){var a="on"+a.charAt(0).toUpperCase()+a.substring(1),c=this.dtree.options[a];"undefined"!=typeof c&&this._proxyEvent(b,this.dtree.options,a)}},unbind:function(b){if("string"==typeof b){var b="on"+b.charAt(0).toUpperCase()+b.substring(1),c=this.dtree.options[b];if("undefined"==typeof c)return;this.dtree.options[b]=null}else a.extend(this.dtree.options,{onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onCustomRender:null,onCreate:null,onRender:null})},_wrapNode:function(a){return a?new d(a):null}});var d=function(a){this.dNode=a};d.prototype={error:-1,loading:1,ok:0,activate:function(a){"undefined"==typeof a&&(a=!0),this.dNode.activate(a)},deactivate:function(){this.dNode.deactivate()},getData:function(a){return"string"==typeof a?this.dNode.data[a]:this.dNode.data},expand:function(a){return this.dNode.expand(a),this},remove:function(){this.dNode.remove()},removeChildren:function(){return this.dNode.removeChildren(),this},select:function(a){return this.dNode.select(a),this},toggleSelect:function(){return this.dNode.toggleSelect(),this},addChild:function(a,b){var c=this.dNode.addChild(a,b&&b.dNode);return this._wrapNode(c)},setTitle:function(a){return this.dNode.setTitle(a)},setStyle:function(b){return a(this.dNode.span).find("a").attr("style",b),this.dNode.data._customStyle=b,this},removeStyle:function(){return a(this.dNode.span).find("a").removeAttr("style"),this.dNode.data._customStyle=null,this},prev:function(){var a=this.dNode.getPrevSibling();return a&&this._wrapNode(a)},next:function(){var a=this.dNode.getNextSibling();return a&&this._wrapNode(a)},firstChild:function(){var a=this.children();return null==a||void 0==a?a:a.length>0?a[0]:null},lastChild:function(){var a=this.children();return null==a||void 0==a?a:a.length>0?a[a.length-1]:null},children:function(){var b=this,c=this.dNode.getChildren();return null==c||void 0==c?c:a.map(c,function(a,c){return b._wrapNode(a)})},parent:function(){var a=this.dNode.getParent();return a&&this._wrapNode(a)},setData:function(a){if(1===arguments.length)for(var b in a)this.dNode.data[b]=a[b];else{var c=arguments[0],d=arguments[1];this.dNode.data[c]=d}return this.dNode.render(),this},focus:function(){return this.dNode.focus(),this},hasChild:function(){return this.dNode.hasChildren()},isChildOf:function(a){return this.dNode.isChildOf(a.dNode)},isDescendantOf:function(a){return this.dNode.isDescendantOf(a.dNode)},setLazyNodeStatus:function(){this.dNode.setLazyNodeStatus.apply(this.dNode,arguments)},getEventTargetType:function(a){return this.dNode.getEventTargetType(a)},move:function(a,b){a.dNode&&this.dNode.move(a.dNode,b)},disable:function(){return this.dNode.disable(),this},enable:function(){return this.dNode.enable(),this},_wrapNode:function(a){return a?new d(a):null}},comtop.UI.Tree.Node=d}(window.comtop.cQuery,window.comtop),function(a){"use strict";function b(a){this._self=a,this.options=c.extend({},this.constructor.defaults),this._init()}var c=a.cQuery,d=a.Tools.fixedNumber||function(a){return a},e=function(a){if("string"==typeof a){var b=a.replace("<script","&#60;script").replace("</script","&#60;&#47;script");return b.replace("<!--","&#60;&#33;--").replace("-->","--&#62;")}return a};a.UI.Grid=a.UI.Base.extend({options:{uitype:"Grid",gridwidth:"600px",gridheight:"500px",tablewidth:"",primarykey:"ID",ellipsis:!0,titleellipsis:!0,adaptive:!0,titlelock:!0,oddevenrow:!1,selectrows:"multi",fixcolumnnumber:0,config:null,datasource:null,titlerender:null,colhidden:!0,colmaxheight:"0",colmove:!1,loadtip:!0,resizeheight:null,resizewidth:null,rowstylerender:null,colstylerender:null,colrender:null,lazy:!0,sortstyle:1,sortname:[],sorttype:[],pageno:1,pagesize:50,pagesize_list:[25,50,100],custom_pagesize:!1,pagination:!0,pagination_model:"pagination_min_1",adddata_callback:null,removedata_callback:null,rowclick_callback:null,loadcomplate_callback:null,selectall_callback:null,rowdblclick_callback:null,afterdrag_callback:null,onstatuschange:null},formatFn:{date:a.Date.simpleformat,money:a.Number.money},renderMethod:{a:function(a,b,c){var d=["<a"],e=b.params,f="";if(e){e=e.split(";");for(var g=[],h=e.length;h--;){var i=e[h];a.hasOwnProperty(i)&&g.push([i,"=",a[i]].join(""))}f="?"+g.join("&")}return d.push(" href='",(b.url||"")+f,"' class='",b.className||"","' target='",b.targets||"_self","' clickid='",b.click,"'>",c,"</a>"),d.join("")},image:function(a,b,c){var d=["<img"];d.push(" class='",b.className||"");var e=b.url,f=b.compare,g=b.relation,h=b.title,i=c;if("string"==typeof g)if(/\./.test(g)){var j=g.split(".");i=a[j[0]][j[1]]}else i=a[g];return h=h&&h[i]?h[i]:c,f&&(e=f[i]||e),d.push("' src='",e,"' title='",h,"' clickid='",b.click,"' />"),d.join("")},button:function(a,b,c){var d=["<button class='"];return d.push(b.className||"","' clickid='",b.click,"'>",b.value||c,"</button>"),d.join("")}},_init:function(){var b=this.options,d=b.config,e=b.onstatuschange,f=b.datasource,g=b.sortstyle;b.sortname.length=Math.min(b.sortname.length,g),b.sorttype.length=Math.min(b.sorttype.length,g),"string"==typeof d&&"function"==typeof window[d]&&(b.config=window[d]),"string"==typeof e&&"function"==typeof window[e]&&(b.onstatuschange=window[e]),"string"==typeof f&&"function"==typeof window[f]&&(b.datasource=window[f]),this.el=b.el,this.elCache=null,this.gridContainer=null,this.gridBox=null,this.gridStyle=null,this.gridHead=null,this.gridHeadTable=null,this.gridTableHide=null,this.gridBody=null,this.gridTableBox=null,this.gridTbody=null,this.gridScroll=null,this.gridLine=null,this.gridEmpty=null,this.gridTfoot=null,this.loading=null,this.gridOverlay=null,this.gridAllCheck=null,this.createDomBox=document.createElement("div"),this.domTh=[],this.domTr=[],this.domTd=[],this.domFixed=[],this.domHeadCol=[],this.domBodyCol=[],this.theadMap=[],this.extendTh=[],this.trFrag=document.createElement("tbody"),this.data=[],this.backupQuery=null,this.query=null,this.customQuery=null,this.rowSize=0,this.colSize=0,this.sortType={},this.theadText=[],this.renderStyle=[],this.colRender=[],this.bindName=[],this.bindDotName=[],this.numCol=NaN,this.colWidth=[],this.initColWidth=[],this.colWidthBackup=[],this.multiChecked=[],this.multiCheckedNum=0,this.singleChecked=NaN,this.disabledIndex=[],this.fixedFnClick=[],this.colHidden=[],this.disabled=[],this.totalSize=0,this.guid="grid-"+a.guid(),this.heightLight=[],this.colIndex=[],this.gridWidth=0,this.gridHeight=0,this.tableWidth=0,this.theadHeight=30,this.boxHeight=0,this.paginationHeight=b.pagination?41:0,this.selectrowsClass="",this.tdsPackage=[],this.endRow=0,this.trStart=0,this.trEnd=0,this.renderComplete=!1,this.odd=!1,this.unRender=!0,this.autoHeight=!1,this.isIttab=!1,this.arrIndex=Array.prototype.indexOf,this.isQm=a.Browser.isQM,this.persistence="function"==typeof e&&"function"==typeof d,this.oddEvenClass="cardinal_row",this.selectedRowClass="selected_row";try{var h=c("head");h.append('<style type="text/css"></style>'),h.find("style").last()[0].innerHTML="",this.writeStyle=!0}catch(i){this.writeStyle=!1}this._createHeadDom(),this._backupQuery(),this._setPageSize(),this._setSortTypeObj(),this.__getDomTh(),this.__initWidthAndHeight(),this._initOperation()},_createHeadDom:function(){var a=this,b=this.options,d="<thead><tr>",e="<thead>",f=!1;b.columns&&(c.each(b.columns,function(g,h){c.isArray(h)?(f=!0,e+="<tr>",c.each(h,function(b,c){e+=a._createHeadTr(c)}),e+="</tr>"):(0===g&&"no"!=b.selectrows&&(d+="<th width='40px'></th>"),d+=a._createHeadTr(h))}),e+="<thead>",d+="</tr><thead>",this.el.append(f?e:d))},_createHeadTr:function(a){var b="<th ",d=a.name;return a.type&&"checkbox"==a.type&&(d='<input type="checkbox" />'),c.each(a,function(a,c){return"type"==a||"name"==a||(b+=[a,'="',c,'"'].join(""),void(b+=" "))}),b+=">"+d+"</th>"},_initOperation:function(){var a=this,b=this.options;if(b.operation&&b.operation.search){var c=b.operation.search.btn;c&&cui(c).isCUI&&cui(c).bind("click","",function(b){a.loadData()})}},_backupQuery:function(){var a=this.options,b={pageSize:a.pagesize,pageNo:a.pageno,custom_pagesize:a.custom_pagesize,sortName:c.extend([],a.sortname),sortType:c.extend([],a.sorttype)};this.backupQuery=c.extend(!0,{},b),this.query=b},_setPageSize:function(){for(var a=this.options,b=this.query,c=a.pagesize_list,d=b.pageSize,e=c.length;e--;)if(d===c[e])return;b.pageSize=c[1]},_setSortTypeObj:function(){for(var a=this.query,b=a.sortName,c=a.sortType,d=b.length,e=this.sortType={},f=0;f<d;f+=1){var g=c[f].toUpperCase();c[f]=g,e[b[f]]=g}},__getDomTh:function(){var a,b,d,e=this.el,f=this.colIndex,g=this.extendTh;if(a=c(document.createElement("div")).html(["<table><thead>",e.find("thead").html()||e.find("tbody").html()||e.html(),"</thead></table>"].join("")).find("table").eq(0),this.elCache=a,b=a.find("tr"),d=b.length,1===d){for(var h=a[0].getElementsByTagName("th"),i=[],j=0,k=h.length;j<k;j+=1)i.push(h[j]),f[j]=j;this.domTh=i}else{var l,m,n,o,p=this.theadMap=[];for(l=0;l<d;l+=1){var q=b.eq(l)[0],r=q.cells,s=r.length,t=0;for(g[l]=[],p[l]||(p[l]=[]),m=0;m<s;m+=1){var u=r[m],v=u.colSpan;for(n=0;n<v;n+=1)p[l][t+n]=u;t+=v}var w=document.createElement("th");w.className="grid-empty-th",q.insertBefore(w,r[0])}for(l=d;l--;){var x=p[l],y=x.length;for(m=0;m<y;m+=1){var z=x[m],A=z.rowSpan;if(A>1&&!g[l][m])for(A+=l,n=l+1;n<A;n+=1)o=p[n],o&&(g[n][m]=!0,o.splice(m,0,z))}}this.domTh=c.extend([],p[d-1])}this.colSize=this.domTh.length},__initWidthAndHeight:function(){var a=this.options,b="function"==typeof a.resizewidth?a.resizewidth():void 0,c="function"==typeof a.resizeheight?a.resizeheight():void 0,e=a.gridwidth=d(a.gridwidth),f=a.gridheight=d(a.gridheight);this.gridWidth=(b||e)-2,"auto"===f&&(f=500,this.autoHeight=!0),this.gridHeight=(c||f)-2,this.theadHeight=30*this.elCache.find("tr").length,this.boxHeight=this.gridHeight-this.paginationHeight-this.theadHeight,this.tableWidth=a.adaptive?this.gridWidth-17:d(a.tablewidth)||this.gridWidth},_create:function(){this.__createLayoutDom(),this.__theadClickEventBind(),this.__theadMouseEventBind(),this.__tbodyClickEventBind(),this.__tbodyMouseEventBind(),this.__imitateScroll(),this._resizeEventBind(),this.__boxScrollEventBind(),this._setStyleWidth(),this._setStyleHeight(),this._loading("show");var a=this.options,b=a.datasource,c=a.config;"function"==typeof b&&(this.persistence?c(this):(this._createPropertys(),this._createContent(),b(this,this.getQuery())))},__createLayoutDom:function(){var a=this.options,b=this.el,d=document.createElement("div");d.className="grid-container";var e=['<div class="grid-style"></div>','<div class="grid-box">','<div class="grid-head">','<table class="grid-head-table"></table>',"</div>",'<div class="grid-body">','<div class="grid-empty">\u672c\u5217\u8868\u6682\u65e0\u8bb0\u5f55</div>','<div class="grid-table-box"><div class="grid-table-hide"></div></div>',"</div>",'<div class="grid-scroll">',"<div></div>","</div>",'<div class="grid-line"></div>','<div class="grid-overlay"></div>',"</div>",'<div class="grid-tfoot"></div>','<div class="grid-loading-bg grid-loading-bg-over"></div>','<div class="grid-loading-box"><span>\u6b63\u5728\u52a0\u8f7d...</span></div>'];d.innerHTML=e.join(""),b[0].parentNode.insertBefore(d,b[0]);var f=this.gridContainer=c(d).addClass(this.guid);this.isQm&&f.addClass("grid-container-qm"),this.gridTableBox=c(".grid-table-box",f);var g=this.gridBox=f.children(".grid-box");this.gridStyle=f.find(".grid-style").eq(0),this.gridHead=g.find(".grid-head").eq(0),this.gridBody=g.children(".grid-body").eq(0),this.gridOverlay=g.children(".grid-overlay").eq(0),this.gridHeadTable=this.gridHead.children(".grid-head-table").eq(0),this.gridLine=g.children(".grid-line").eq(0),this.gridScroll=g.children(".grid-scroll").eq(0),this.gridTfoot=f.children(".grid-tfoot").eq(0),this.gridEmpty=this.gridBody.children(".grid-empty").eq(0),this.loading=f.children(".grid-loading-bg").next().andSelf(),this.gridTableHide=c(".grid-table-hide",f).eq(0).append(b.addClass("grid-body-table")),a.ellipsis&&b.addClass("grid-ellipsis"),a.titleellipsis&&this.gridHeadTable.addClass("grid-ellipsis")},__theadClickEventBind:function(){var a=this.options,b=this.bindName,d=a.primarykey,e=this;this.gridHeadTable.on("click",function(f){f.stopPropagation();var g=c(f.target),h=g.attr("class");if("grid-select"!==h&&"grid-ittab"!==h)if(g.hasClass("grid-all-checkbox")){var i,j=e.domTr,k=e.multiChecked,l=e.selectedRowClass,m="grid-all-checkbox-checked",n=e.endRow,o=e.rowSize,p=g.hasClass(m),q=e.disabledIndex,r=e.data,s=0;if(p){for(var t=n;t--;)k[t]=!1,c(j[t]).removeClass(l);g.removeClass(m);for(var u=n;u<o;u+=1)k[u]=!1;e.multiCheckedNum=0}else{for(var v=n;v--;)i=r[v],i.hasOwnProperty(d)&&q[v]||(s++,k[v]=!0,c(j[v]).addClass(l));for(g.addClass(m),v=n;v<o;v+=1)i=r[v],i.hasOwnProperty(d)&&q[v]||(s++,k[v]=!0);e.multiCheckedNum=s}var w=a.selectall_callback;if("function"==typeof w){var x=!p;w.call(e,x?e.data:[],x)}}else{var y=g.parents(".grid-sort");if(y.length&&"grid-thead-text"===h){var z=e.sortType,A=b[e._thIndex(y[0])],B=z[A],C="DESC"!==B?"DESC":"ASC";e._setOptsSortNameAndSoryType(A,C),e.persistence&&e._triggerStatusChange(),e.loadData()}}})},_thIndex:function(a){var b=this.domTh,c=this.arrIndex;if(c)return c.call(b,a);for(var d=this.colSize;d--;)if(b[d]===a)return d;return-1},_setOptsSortNameAndSoryType:function(a,b){for(var c=this.query,d=this.options.sortstyle,e=c.sortName,f=c.sortType,g=d;g--;)if(a===e[g]){f.splice(g,1),e.splice(g,1);break}e.length===d&&(f.shift(),e.shift()),e.push(a),f.push(b),this._setSortTypeObj()},__theadMouseEventBind:function(){this.gridHeadTable.on("mouseover",function(a){var b=c(a.target),d=b.closest(".grid-fixed-s").eq(0);d.length&&d.parents("th").addClass("grid-thead-mouseover")}).on("mouseout",function(a){var b=c(a.target),d=b.closest(".grid-fixed-s").eq(0);d.length&&d.parents("th").removeClass("grid-thead-mouseover")})},__tbodyClickEventBind:function(){function a(a){return"TD"===a.prop("tagName")||a.hasClass("grid-fixed-s")}function b(a){var b=!1;"multi"===g?b=h.multiChecked[a]:"single"===g&&(b=a===h.singleChecked),"function"==typeof e.rowclick_callback&&e.rowclick_callback.call(h,h.data[a],b,a)}var d,e=this.options,f="function"==typeof e.rowdblclick_callback?e.rowdblclick_callback:null,g=e.selectrows,h=this,i=null,j=null;h.el.on("click",function(e){if(e.stopPropagation(),j=e.target,d=j.tagName,"TBODY"===d||"TABLE"===d)return!1;var g=c(j),k=g.closest("tr").eq(0),l=k.attr("index")||k[0].rowIndex-1+h.trStart,m=j.getAttribute("clickid")||"";return""!==m?h.fixedFnClick[m](h.data[l],l)!==!1:void((a(g)||("SPAN"===d||"DIV"===d)&&a(g.parent()))&&(h._selectRows(l,void 0),f?(clearTimeout(i),i=setTimeout(function(){
b(l)},300)):b(l)))}),h.el.on("dblclick",function(a){if(a.stopPropagation(),f){if(clearTimeout(i),j=a.target,d=j.tagName,"TBODY"===d||"TABLE"===d)return;var b=c(j).closest("tr").eq(0),e=b.attr("index")-0;f.call(h,h.data[e],e)}})},_selectRows:function(a,b){var d=this.domTr,e=d[a],f=this.options,g=f.selectrows,h=this.selectedRowClass,i=c(e);if(!this.disabledIndex[a])if("multi"===g){var j=this.multiChecked,k=j[a];if(void 0===b)b=k!==!0;else if(b===k)return;if(j[a]=b,!e)return;b===!1?(i.removeClass(h),this.multiCheckedNum--,this.gridAllCheck.removeClass("grid-all-checkbox-checked")):(i.addClass(h),this.multiCheckedNum+=1,this.multiCheckedNum===this.rowSize&&this.gridAllCheck.addClass("grid-all-checkbox-checked"))}else if("single"===g){var l=this.singleChecked;if(this.singleChecked=l===a&&b===!1?NaN:a,!e)return;b===!1?i.removeClass(h):(isNaN(l)||c(d[l]).removeClass(h),i.addClass(h))}},__tbodyMouseEventBind:function(){var a,b,d=this,e=this.bindName,f=this.options.titlerender;d.el.on("mouseover",function(g){var h=g.target,i=h.tagName;if("TR"!==i&&"TBODY"!==i&&"TABLE"!==i){var j=c(h).closest("td");if(j.length){var k,l=j[0].cellIndex,m=j.find(".grid-fixed-s"),n=m.length?m:j,o=e[l];a=j.closest("tr"),k=a.attr("index"),k||(k=a[0].rowIndex-1+d.trStart,a.attr("index",k)),a.addClass("grid-tr-over"),"number"==typeof o||j.attr("title")||("function"==typeof f?(b=f(d.data[k],o),b?j.attr("title",b):(b=c.trim(n.text()),b&&j.attr("title",b))):(b=c.trim(n.text()),b&&j.attr("title",b)))}}}).on("mouseout",function(){a&&a.removeClass("grid-tr-over")})},__imitateScroll:function(){var a,b,c=this,d=c.guid,e=this.gridHeadTable[0],f=this.gridStyle[0],g=this.el[0],h=this.options.fixcolumnnumber;this.writeStyle?this.gridScroll.on("scroll",function(){a=this.scrollLeft,b!==a&&(b=a,f.innerHTML=['<style type="text/css">.',d," .grid-fixed .grid-fixed-s{left:",a,"px}.",d," .grid-body-table, .",d," .grid-head-table{margin-left:-",a,"px}</style>"].join(""))}):this.gridScroll.on("scroll",function(){if(a=this.scrollLeft+"px",b!==a){b=a;var d="-"+a;e.style.marginLeft=d,g.style.marginLeft=d;for(var f=c.domFixed,i=f.length;i--;)for(var j=f[i],k=h;k--;)j[k].style.left=a;for(var l=c.tdsPackage,m=0;m<h;m+=1)l[m].html=l[m].html.replace(/(style="left:)\d*?px/,"$1"+a)}})},_resizeEventBind:function(){var a=this.options,b=this;(a.resizeheight||a.resizewidth)&&c(window).on("resize",function(){b.resize()})},resize:function(){var a=this.options;try{var b=a.resizeheight();"number"==typeof b&&b>0&&!this.autoHeight&&this.setHeight(b)}catch(c){}try{var d=a.resizewidth();"number"==typeof d&&d>0&&this.setWidth(d)}catch(c){}this.autoHeight&&this._setAutoHeight()},__boxScrollEventBind:function(){var a=this;this.options.lazy&&!this.autoHeight&&this.gridBody.on("scroll",function(){a._lazyload(!0)})},_lazyload:function(a){var b=this,c=this.options,d=this.gridBody[0].scrollTop,e=b.endRow,f=parseInt(d/28,10),g=parseInt(this.boxHeight/28,10)+f+20+1;c.ellipsis?(clearTimeout(this.renderTimeout),a?this.renderTimeout=setTimeout(function(){try{b._clearAndLoad(f-20,e,g)}catch(a){}},10):b._clearAndLoad(f-20,e,g)):!this.renderComplete&&this.appendRowsComplete&&g>e&&(clearTimeout(this.renderTimeout),a?this.renderTimeout=setTimeout(function(){try{b.appendRowsComplete=!1,b._appendRows(e,g)}catch(a){}},10):(b.appendRowsComplete=!1,b._appendRows(e,g)))},_clearAndLoad:function(a,b,c){var d,e=this.rowSize,f=this.gridTbody[0],g=this.gridTableBox[0].style,h=this.trFrag,i=this.trStart,j=this.trEnd;c=this.trEnd=Math.min(e,c),a=this.trStart=Math.max(a,0);var k,l,m,n;if(c>b){var o=this._dataToDom(this.data,b,c),p=o.domTr;for(this.domTr=this.domTr.concat(p),this.domTd=this.domTd.concat(o.domTd),this.domFixed=this.domFixed.concat(o.domFixed),this.endRow=c,n=p.length;n--;)h.appendChild(p[n])}if(d=this.domTr,a>i||c>j){for(k=i,l=Math.min(j,a);k<l;k++)h.appendChild(d[k]);for(m=Math.max(a,j);m<c;m++)f.appendChild(d[m])}else if(a<i){var q=d[i];for(k=a,l=Math.min(i,c);k<l;k++)f.insertBefore(d[k],q);for(m=Math.max(i,c);m<j;m++)h.appendChild(d[m])}g.paddingTop=28*a+"px",g.paddingBottom=28*(e-c)+"px"},_setStyleWidth:function(){this.gridContainer.css("width",this.gridWidth),this.el.css("width",this.tableWidth),this.gridHeadTable.css("width",this.tableWidth)},_setStyleHeight:function(){this.gridContainer.css("height",this.gridHeight),this.gridHead.css("height",this.theadHeight),this.gridOverlay.css("height",this.theadHeight),this.gridBody.css("height",this.boxHeight)},_loading:function(a){this.options.loadtip&&(this.loading[a](),this.unRender&&"hide"===a&&this.gridContainer.find(".grid-loading-bg").removeClass("grid-loading-bg-over"))},_createPropertys:function(){this.__getTagsPropertys(),this.__initColWidth()},_createContent:function(){this.__renderHead(),this.__renderBody(),this._setColWidthStyle(),this.__packageTds(),this._colHidden(!0),this.ittab._init(this);var a=this.options;if(a.colhidden&&this.hideCol._init(this),a.colmove&&0===this.theadMap.length&&this.moveCol._init(this),a.afterdrag_callback){new b(this)}},__getTagsPropertys:function(){for(var a=this.domTh,b=this.options,d=this.colSize,e=this.renderStyle,f=this.bindName,g=this.bindDotName,h=this.sort=[],i=this.theadText,j=this.colWidth,k=this.colRender,l=this.fixedFnClick,m=this.colHidden,n=this.disabled,o=0;o<d;o+=1){var p=a[o];j.push(p.style.width||p.getAttribute("width")||""),m[o]="true"===p.getAttribute("hide")||"none"===c(p).css("display"),n[o]="true"===p.getAttribute("disabled"),p.removeAttribute("disabled");var q=p.getAttribute("renderStyle")||"",r=q.replace(/padding.+?(;|$)/,"").replace(/display\s*?:\s*?none\s*?(;|$)/,"")+";";e.push(r);var s=p.getAttribute("bindName")||"";f[o]=s,/\./.test(s)?g[o]=s.split("."):g[o]=void 0,isNaN(this.numCol)&&s.length&&!isNaN(s-0)&&(this.numCol=o,f[o]=s-0,s=""),""===s?h[o]=!1:h[o]="true"===p.getAttribute("sort")||!1,i.push(p.innerHTML);var t=p.getAttribute("format"),u=b.colrender,v=p.getAttribute("render");if(k[o]=[],null!==t&&(/money/.test(t)?k[o][1]={format:Number(t.split("-")[1]||2),callback:this.formatFn.money}:/(dd|MM|yy)/i.test(t)&&(k[o][1]={format:t,callback:this.formatFn.date})),"function"==typeof u&&(k[o][0]={render:"colrenderFn",callback:u}),"string"==typeof v)if(new RegExp(v).test("a;button;image")){var w=p.getAttribute("options");if(null!==w)if(/{/.test(w))try{w=JSON.parse(w)}catch(x){w=new Function("return "+w+";")()}finally{"object"!=typeof w&&(w=void 0)}else w=window[w];if(w){var y=w.click;y="string"==typeof y?window[y]:y,"function"==typeof y?w.click=l.push(y)-1:w.click="",k[o][0]={render:"fiexdFn",method:v,options:w}}}else{var z=window[v];if(z){var A={format:t||void 0,render:z,renderStyle:q,text:i[o]};k[o][0]={render:"renderFn",colJson:A,callback:z}}}if(this.url=p.getAttribute("url"),this.url){var w=p.getAttribute("options");w=new Function("return "+w+";")(),c.ajax({type:"GET",url:this.url,dataType:"json",async:!1}).done(function(a){c.isPlainObject(a)&&a.data&&(a=a.data),k[o][0]={render:"renderFn",colJson:{options:w||{display:"id",value:"text"},data:a},callback:function(a,b,d){var e=a[d.bindName];return c.each(d.data,function(a,b){if(b[d.options.display]==e)return e=b[d.options.value],!1}),e}}})}}var B=b.selectrows;"multi"!==B&&"single"!==B||(f[0]=-1)},__initColWidth:function(){for(var a=this.gridWidth,b=this.tableWidth||a,d=this.colWidth,e=this.colWidthBackup,f=0,g=0,h=this.colSize,i=[],j=this.colSize;j--;){var k=d[j];e[j]=-1,""===k?(k=0,d[j]=200,i.push(j)):/%/.test(k)?(k=Math.round(b*parseInt(k,10)/100),d[j]=k):(k=parseInt(k,10),d[j]=k),f+=d[j],g+=k}var l=i.length,m=b-g;if(l>0&&m>l){for(var n=Math.round(m/l),o=0;o<l;o++)d[i[o]]=n;d[i[o-1]]+=m-n*l,this.tableWidth=b}else if(isNaN(this.tableWidth)&&f>=a)this.tableWidth=f;else{this.tableWidth||(this.tableWidth=a);for(var p=[],q=0,r=0,s=h;s--;){var t=Math.round(d[s]*b/f);q+=t,p[s]=t,r=s}p[r]+=b-q,this.colWidth=p}this.initColWidth=c.extend([],this.colWidth)},__renderHead:function(){var a=this.options,b=this.domTh,d=this.theadMap,e=this.theadMap.length,f=this.domHeadCol,g=this.domFixed[0]=[],h=this.theadText,i=this.colSize,j=a.fixcolumnnumber,k=this.options.colhidden,l=this.sort,m=document.createElement("tr"),n=a.titleellipsis;if(m.className="grid-width-norm",e){var o=document.createElement("th");o.className="grid-empty-th",m.appendChild(o);for(var p=e-1;p--;)for(var q=d[p],r=q.length;r--;){var s=q[r];s.removeAttribute("width"),s.style.width=""}}for(var t=0;t<i;t+=1){var u=f[t]=document.createElement("th");m.appendChild(u);var v=b[t];t<j&&c(v).addClass("grid-fixed"),l[t]&&c(v).addClass("grid-sort"),v.removeAttribute("width"),v.style.width="";var w=h[t],x=['<div class="grid-fixed-d">','<span class="grid-fixed-s">'];l[t]&&x.push('<b class="grid-sort-icon-desc cui-icon">&#xf0d7;</b><b class="grid-sort-icon-asc cui-icon">&#xf0d8;</b>'),x.push('<a class="grid-thead-text'),n&&x.push('" title="',c.trim(w.replace(/<.*?>/g,""))),x.push('">',w,"</a>"),k&&x.push('<a class="grid-select cui-icon">&#xf0b0;</a>'),x.push('<em class="grid-ittab"></em>'),x.push("</span>"),t<j&&!n&&x.push(w),x.push("</div>"),v.innerHTML=x.join("")}this.gridHeadTable.html(this.elCache.find("thead").eq(0).prepend(m)),this.elCache.parent().remove(),delete this.elCache;for(var y=0;y<j;y+=1)b[y].getElementsByTagName("div")[0].style.zIndex=j+1-y,g.push(b[y].getElementsByTagName("span")[0]);var z=c(b[0]);if("multi"===a.selectrows){z.find(".grid-select").eq(0).remove(),z.find(".grid-fixed-s").addClass("grid-no-move");var A=c(b[0]).find(".grid-thead-text").addClass("grid-all-checkbox");A.html(A.text()+"<b></b>"),this.gridAllCheck=A}"single"===a.selectrows&&(z.find(".grid-select").eq(0).remove(),z.find(".grid-fixed-s").addClass("grid-no-move"))},__renderBody:function(){var a=this.el,b=this.colSize,c=this.domBodyCol,d=document.createElement("tr");d.className="grid-width-norm";for(var e=0;e<b;e+=1){var f=c[e]=document.createElement("th");d.appendChild(f)}a.html("<thead></thead><tbody></tbody>"),a.find("thead").append(d),this.gridTbody=a.find("tbody").eq(0)},__packageTds:function(){var a=this.options,b=a.fixcolumnnumber,c=this.renderStyle,d=a.selectrows,e=this.selectrowsClass={no:"",multi:"grid-checkbox",single:"grid-radio"}[d],f=this.colSize,g="";this.writeStyle||(g="left:0px;");var h=[],i=0;if(""!==e){i+=1;var j=h[0]={};b>0?(j.html=['<div class="grid-fixed-d" style="z-index:',b+1,';"><span class="grid-fixed-s ',e,'" style="',g,c[0],'/**/">',"</span></div>"].join(""),j.style=""):(j.style=c[0],j.className=e)}for(var k=i;k<f;k+=1){var l=h[k]={};k<b?(l.html=['<div class="grid-fixed-d" style="z-index:',b+1-k,';"><span class="grid-fixed-s" style="',g,c[k],'/**/"><!---->',"</div>"].join(""),l.style=""):l.style=c[k]}this.tdsPackage=h},_setColWidth:function(a){for(var b=this.initColWidth,c=this.colHidden,d=this.tableWidth,e=this.colSize,f=0,g=e;g--;)c[g]===!1&&(f+=b[g]);for(var h=[],i=0,j=0,k=e;k--;)if(c[k]===!1){var l=Math.round(b[k]*d/f);i+=l,h[k]=l,j=k}else h[k]=0;h[j]+=d-i,this.colWidth=h,this._setColWidthStyle(),a&&this._isScrolling(!0)},_setColWidthStyle:function(a){var b,c=this.colWidth,d=this.domHeadCol,e=this.domBodyCol,f=this.colSize,g="";if("number"==typeof a)b=c[a]-1+"px",d[a].style.width=b,e[a].style.width=b;else for(;f--;)g=0===c[f]?0:c[f]-1+"px",d[f].style.width=g,e[f].style.width=g;comtop.Browser.isIE&&this._bugFix()},_bugFix:function(){c(".grid-container table").css({"border-collapse":"separate"}),setTimeout(function(){c(".grid-container table").css({"border-collapse":"collapse"})},1)},_colHidden:function(a){for(var b=this.endRow,c=this.domTh,d=this.domTd,e=this.tdsPackage,f=this.domHeadCol,g=this.domBodyCol,h=this.colHidden,i=this.colWidth,j=this.colWidthBackup,k=this.tableWidth,l=this.theadMap,m=this.extendTh,n=null,o=null,p=this.colSize;p--;)if(h[p]===!0){if(j[p]===-1||a){if(f[p].style.display="none",o=c[p],l.length)for(var q=l.length;q--;)m[q][p]||(n=l[q][p],n.colSpan>1?n.colSpan--:n.style.display="none");else o.style.display="none";for(var r=b;r--;)d[r][p].style.display="none";g[p].style.display="none",e[p].style+="display:none;",j[p]=i[p],k-=i[p],i[p]=0}}else if(j[p]!==-1){if(f[p].style.display="",o=c[p],l.length)for(var s=l.length;s--;)m[s][p]||(n=l[s][p],"none"===n.style.display?n.style.display="":n.colSpan+=1);else o.style.display="";for(var t=b;t--;)d[t][p].style.display="";g[p].style.display="",e[p].style=e[p].style.replace(/display.*?($|;)/g,""),i[p]=j[p],k+=j[p],j[p]=-1}this.options.adaptive?this.isIttab=!1:this.tableWidth=k,this._setLayout(),this.persistence&&!a&&this._triggerStatusChange()},_triggerStatusChange:function(){var a,b,c,d=this.options,e=this.query,f=this.colWidth,g=this.colWidthBackup,h=this.colHidden,i=this.colIndex,j=!d.adaptive,k=0===this.theadMap.length&&d.colmove,l=0,m=[];for(b=this.colSize;b--;)h[b]?(f[b]=g[b],m[b]=1):m[b]=0,l+=f[b];c={hide:h,sortName:e.sortName,sortType:e.sortType,overall:l},window.JSON&&JSON.stringify?(k&&(c.index=i),j&&(c.width=f),a=JSON.stringify(c)):a=["{",k?['"index":[',i.join(","),"],"].join(""):"",j?['"width":[',f.join(","),"],"].join(""):"",'"hide":[',m.join(","),"],",'"sortName":["',e.sortName.join('","'),'"],','"sortType":["',e.sortType.join('","'),'"],','"overall":',l,"}"].join(""),this.options.onstatuschange(a)},_isScrolling:function(a){var b=this.el,c=this.gridWidth+2,d=this.tableWidth,e=this.boxHeight,f=b.height(),g=this.gridScroll;this.options.adaptive&&!this.isIttab?(e<f?d=this.tableWidth=c-17:(this.tableWidth=c,d=c+1),b.css("width",d),this.gridHeadTable.css("width",d),g.css("left","-999999px"),a||(this._setColWidth(!0),this._setLayout(!0))):(e<f&&c>=d+17&&(this.gridTableHide.css("marginBottom",0),g.css({left:"-999999px",width:c-17})),c<d&&e>=f+17&&(g.css({width:c,left:0,bottom:""}),g.css("bottom",0),this.gridTableHide.css("marginBottom",17)),(c<d+17&&e<f||c<d&&e<f+17)&&(g.css({width:c-17,left:0,bottom:""}),g.css("bottom",0),this.gridTableHide.css("marginBottom",17),this.autoHeight&&(this.gridBody.css("height",this.boxHeight+17),this.gridContainer.css("height",this.gridHeight+17),g.css({width:c}))),e>=f&&c>=d&&(this.gridTableHide.css("marginBottom",0),g.css({left:"-999999px",width:c}))),g.find("div").eq(0).css("width",d),clearTimeout(this.sc),this.sc=setTimeout(function(){try{g.scroll()}catch(a){}},10)},_setAutoHeight:function(){var a,b;if(this.autoHeight){a=this.gridTableBox,b=28;var c,d=parseInt(a.css("marginBottom"),10)||1;c=0===this.rowSize?50:a.height()||this.rowSize*b,this._setHeight(c+d+this.theadHeight+(this.options.pagination&&this.rowSize?41:0)+2)}},_setLayout:function(a){this._setStyleWidth(),!this.options.fixcolumnnumber&&this.options.titleellipsis||this._setTheadHeight(),this.autoHeight&&this._setAutoHeight(),this._setStyleHeight(),a||this._isScrolling()},_setTheadHeight:function(){this.gridHead.css("height","auto");var a=this.theadHeight=this.gridHead.height(),b=this.domFixed[0],d=this.isQm;this.boxHeight=this.gridHeight-this.paginationHeight-a-1,this.gridOverlay.css("height",a);for(var e=b.length;e--;){var f=b[e],g=c(f).parent(),h=parseInt(g.parent().height(),10),i=parseInt((h-(g.height()||21))/2,10);i=i<0?0:i,f.style.paddingTop=i+"px",f.style.height=h-(d?0:i+1)+"px"}},setConfig:function(a){this.persistence&&this.unRender&&this._setPersistence(a),this.options.datasource(this,this.getQuery())},setDatasource:function(a,b,d){this.persistence&&this.unRender&&"string"==typeof d&&this._setPersistence(d),a=a||[],b=b||0,this.rowSize=a.length,this.data=c.extend(!0,[],a),this.options.pagination&&(this.totalSize=b,this.unRender?this.__createPagination():this._changepages()),this._isEmpty(),this._initProperty(),this._renderTbody(NaN,NaN),this._loading("hide"),this._loadComplateCallBack(),this.__setSortStyle(),this.autoHeight&&"function"==typeof this.options.resizewidth?(this.resize(),this._setLayout()):this._setLayout(),delete this.unRender},_setPersistence:function(a){var b,d,e,f,g,h,i,j=this.options,k=this.colSize;if("string"==typeof a){try{b=c.parseJSON(a)}catch(l){}if(b){if(b.overall&&(this.tableWidth=b.overall,this.gridHeadTable.css("width",this.tableWidth)),d=b.index,0===this.theadMap.length&&j.colmove&&"object"==typeof d&&k===d.length&&(this.colIndex=d,this._sortPropertys(d)),this._createPropertys(),e=b.sortName,f=b.sortType,"array"===c.type(e)&&"array"===c.type(f)&&this.setQuery({sortName:e,sortType:f}),g=b.hide,"object"==typeof g&&k===g.length){for(i=0;i<k;i++)g[i]=!!g[i];this.colHidden=g}h=b.width,j.adaptive||"object"!=typeof h||k!==h.length||(this.colWidth=h)}else this._createPropertys()}else this._createPropertys();this._createContent()},_sortPropertys:function(a){var b,c,d,e,f=this.colSize;for(c=this.domTh,d=[],b=c[0].parentNode,e=0;e<f;e++)d[e]=c[a[e]],b.appendChild(d[e]);this.domTh=d},_isEmpty:function(){var a=this.options,b=this.rowSize;if(0===b){this.gridEmpty.show(),this.gridTfoot.hide(),this.paginationHeight=0;var c=this;this.gridTableBoxTimer=setTimeout(function(){try{c.gridTableBox.hide()}catch(a){}},10)}else this.gridEmpty.hide(),this.gridTableBox.show(),clearTimeout(this.gridTableBoxTimer),a.pagination&&(this.gridTfoot.show(),this.paginationHeight=41);this.boxHeight=this.gridHeight-this.paginationHeight-this.theadHeight},_initProperty:function(){var a,b=this,d=this.domTr.length>0;setTimeout(function(){try{b.gridBody[0].scrollTop=0}catch(a){}},1),this.gridTableBox.removeAttr("style"),this.heightLight=[],this.domTr=[],this.domTd=[],this.domFixed.length=1,this.multiChecked=[],this.multiCheckedNum=0,this.singleChecked=NaN,this.disabledIndex=[],this.odd=!1,this.endRow=0,this.renderComplete=!1,this.gridAllCheck&&this.gridAllCheck.removeClass("grid-all-checkbox-checked"),d&&(this.el[0].removeChild(this.gridTbody[0]),a=document.createElement("tbody"),this.el[0].appendChild(a),this.gridTbody=c(a)),this.trStart=0,this.trEnd=0},loadData:function(){this._loading("show"),this.options.datasource(this,this.getQuery())},addData:function(a,b){"object"===c.type(a)&&(a=[a]);var d=a.length,e=this.options,f=this.disabledIndex;if(0!==d){if(a=c.extend(!0,[],a),this.unRender)return void this.setDatasource(a);var g=e.selectrows;"number"==typeof b&&b<this.rowSize?(this._spliceArray(this.data,b,a),e.primarykey&&f.length&&this._spliceArray(f,b,new Array(d)),"multi"===g?this._spliceArray(this.multiChecked,b,new Array(d)):"single"===g&&b<this.singleChecked&&(this.singleChecked+=d)):this.data=this.data.concat(a),this.rowSize+=d,this._isEmpty(),this._renderTbody(d,b),this.paginationObj&&this._changepages();var h=e.adddata_callback;"function"==typeof h&&h.call(this,a),this.autoHeight&&"function"==typeof e.resizewidth?this.resize():this._setLayout()}},setPagerText:function(a){"string"==typeof a&&(this.customerText=a)},__createPagination:function(){var a=this.options,b=this.query;if(a.pagination){var c=this;window.cui(this.gridTfoot).pagination({count:this.totalSize,pagesize:b.pageSize,pageno:b.pageNo,pagesize_list:a.pagesize_list,tpls:{pagination:a.pagination_model},cls:a.pagination_model,customerText:this.customerText,custom_pagesize:b.custom_pagesize,on_page_change:function(a,d){b.pageNo=a,b.pageSize=d,c.loadData()}}),this.paginationObj=window.cui(this.gridTfoot)}},_changepages:function(){var a=this.query;this.paginationObj.setInitData({custom_pagesize:a.custom_pagesize,count:this.totalSize,pagesize:a.pageSize,pageno:a.pageNo}),this.paginationObj.reDraw()},_spliceArray:function(a,b,c){return Array.prototype.splice.apply(a,[b,0].concat(c)),a},_renderTbody:function(a,b){var c=this.data,d=this.endRow,e=this.rowSize,f=parseInt(this.boxHeight/28,10)+20,g=this.options.ellipsis;if(0===e)return this.renderComplete=!0,void(this.appendRowsComplete=!0);if(this.renderComplete=!1,isNaN(a)){var h=Math.min(e,d+f+1);g&&(this.trEnd=h),this._appendRows(d,h)}else if(this.gridAllCheck&&this.gridAllCheck.removeClass("grid-all-checkbox-checked"),"number"==typeof b&&b<d){for(var i=this.domTr,j=b;j<d;j+=1)i[j].removeAttribute("index");var k=i[b],l=this._dataToDom(c,b,b+a),m=l.domTr;if(this._spliceArray(this.domTr,b,m),this._spliceArray(this.domTd,b,l.domTd),this._spliceArray(this.domFixed,b+1,l.domFixed),b>=this.trStart&&b<this.trEnd||!g){for(var n=this.gridTbody[0],o=0;o<a;o+=1)n.insertBefore(m[o],k);g&&(this.trEnd+=a)}else{b<this.trStart&&g&&(this.trStart+=a,this.trEnd+=a);for(var p=this.trFrag,q=0;q<a;q+=1)p.appendChild(m[q])}this.endRow+=a,this._setAutoHeight(),this._setOddEven(b),this._setNum(b)}else this._lazyload()},_loadComplateCallBack:function(){var a=this.options.loadcomplate_callback;"function"==typeof a&&a.call(this,this)},__setSortStyle:function(){var a,b,d,e,f=this.query,g=f.sortType,h=f.sortName,i=h.length,j=this.bindName,k=this.domTh,l={DESC:"desc",ASC:"asc"};a:for(b=this.colSize;b--;)if(e=j[b],e!==-1)for(d=c(k[b]),d.find("span > b").hide(),a=0;a<i;a++)if(h[a]===e){d.find(".grid-sort-icon-"+l[g[a]].toLocaleLowerCase()).show();continue a}},_dataToDom:function(a,b,c){for(var d=this.options,f=this.oddEvenClass,g=d.oddevenrow,h=d.ellipsis,i=this.colSize,j=this.domTh,k=this.tdsPackage,l=this.bindName,m=this.bindDotName,n=d.fixcolumnnumber,o=this.numCol,p=this.colRender,q=d.rowstylerender,r=d.colstylerender,s="function"==typeof q,t="function"==typeof r,u=this.renderMethod,v=this.heightLight,w=""!==this.selectrowsClass?1:0,x=this.odd,y=d.primarykey,z="object"==typeof a[0]&&a[0].hasOwnProperty(y),A=this.createDomBox,B=["<table>"],C=b;C<c;C+=1){B.push('<tr class="'),g&&(x&&B.push(f),x=!x),v[C]&&B.push(" grid-highlight"),B.push('"');var D=a[C];if(z&&D.hasOwnProperty(y)&&(B.push(' pkey="'),B.push(String(D[y])),B.push('"')),s){var E=q(D);"string"==typeof E&&B.push(' style="',E,'"')}if(B.push(">"),1===w){var F=k[0];B.push('<td class="grid-select-input '),n>0?(B.push("grid-fixed"),B.push('" style="',F.style,'">',F.html,"</td>")):(B.push(F.className),B.push('" style="',F.style,'"></td>'))}for(var G="",H="",I="",J="",K="",L="",M="",N=null,O=null,P=null,Q=null,R=w;R<n;R+=1){I=l[R],J=m[R],o===R?K=C+I:I?"undefined"==typeof J?K=D[I]:(K=D[J[0]],K=K&&"object"==typeof K?K[J[1]]||"":""):K="";var S="",T="";if(N=p[R],O=N[0],P=N[1],P&&(K=P.callback(K,P.format)||K),O)switch(M=O.render,T=O.method,M){case"colrenderFn":K=O.callback(D,I)||K;break;case"renderFn":Q=O.colJson,Q.el=j[R],Q.bindName=I,K=O.callback(D,C,Q)||K;break;case"fiexdFn":K=u[T](D,O.options,K)||K}K=e(K),S="button"===T||h?[K,"</span>"].join(""):[K,"</span>",K].join(""),G=k[R];var U=G.html.replace("<!---->",S);B.push('<td class="grid-fixed" style="',G.style,'">'),t&&(H=r(D,I),"string"==typeof H&&(U=U.replace("/**/",H))),B.push(U,"</td>")}for(;R<i;R+=1){if(I=l[R],J=m[R],G=k[R],o===R?K=C+I:I?"undefined"==typeof J?K=D[I]:(K=D[J[0]],K=K&&"object"==typeof K?K[J[1]]||"":""):K="",N=p[R],O=N[0],P=N[1],P&&(L=P.callback(K,P.format),K=null===L||void 0===L?K:L),O)switch(M=O.render){case"colrenderFn":L=O.callback(D,I),K=null===L||void 0===L?K:L;break;case"renderFn":Q=O.colJson,Q.el=j[R],Q.bindName=I,L=O.callback(D,C,Q),K=null===L||void 0===L?K:L;break;case"fiexdFn":L=u[O.method](D,O.options,K),K=null===L||void 0===L?K:L}var V=G.style;t&&(H=r(D,I),"string"==typeof H&&(V+=";"+H)),K=e(K),B.push('<td style="',V,'">',K,"</td>")}B.push("</tr>")}this.odd=x,B.push("</table>"),A.innerHTML=B.join("");for(var W=[],X=[],Y=[],Z=" "+this.selectedRowClass,$=this.disabledIndex,_=this.multiChecked,aa=this.singleChecked,ba=A.getElementsByTagName("table")[0],ca=0,da=c-b;ca<da;ca+=1){var ea=ba.rows[ca];W.push(ea);for(var fa=[],ga=[],ha=0;ha<i;ha+=1){var ia=ea.cells[ha];fa.push(ia),ha<n&&ga.push(ia.getElementsByTagName("span")[0])}$[ca+b]?ea.addClass("grid-disable-row"):_[ca+b]&&(ea.className+=Z),X.push(fa),Y.push(ga)}if(!isNaN(aa)&&aa>=b&&aa<c&&!$[aa]){var ja=ba.rows[aa-b];ja.className+=Z}return{domTd:X,domTr:W,domFixed:Y}},_appendRows:function(a,b){var c=this.rowSize;!this.autoHeight&&this.options.lazy||(b=c),b=this.endRow=Math.min(c,b);var d=this._dataToDom(this.data,a,b);this.domTr=this.domTr.concat(d.domTr),this.domTd=this.domTd.concat(d.domTd),this.domFixed=this.domFixed.concat(d.domFixed);for(var e=this.domTr,f=this.gridTbody[0],g=a;g<b;g+=1)f.appendChild(e[g]);this.gridTableBox.css("paddingBottom",28*(c-b)),this.renderComplete=b===c,this.appendRowsComplete=!0,this._setAutoHeight()},_setOddEven:function(a){var b=this.options;if(b.oddevenrow)for(var d=this.domTr,e=this.endRow,f=this.oddEvenClass,g=this.odd=a%2===0,h=a;h<e;h+=1)g?c(d[h]).removeClass(f):c(d[h]).addClass(f),g=!g},_setNum:function(a){if(!isNaN(this.numCol)){var b=this.domTd,c=this.domFixed,d=this.numCol,e=this.bindName[d],f=a,g=this.endRow;if(this.options.fixcolumnnumber>d)for(;f<g;f+=1){var h=c[f+1][d],i=f+e;h.innerHTML=i,h.nextSibling&&(h.nextSibling.nodeValue=i)}else for(;f<g;f+=1)b[f][d].innerHTML=f+e}},hideCols:function(a){if("object"===c.type(a)){for(var b=this.colHidden,d=this.colSize,e=this.bindName,f=0;f<d;f+=1){var g=a[e[f]];"boolean"==typeof g&&(b[f]=g)}this._colHidden(!1)}},disableColFilter:function(a){if("object"===c.type(a)){var b,d=this.bindName,e=this.colSize,f=this.disabled,g=[],h=d[0]===-1?1:0,i=this.hideCol.domA;for(b=0;b<e;b++){var j=a[d[b]];"boolean"==typeof j&&(g.push({index:b-h,dis:j}),f[b]=j?"true":null)}for(b=0;b<g.length;b++)g[b].dis?c(i[g[b].index]).addClass("grid-hide-disabled"):c(i[g[b].index]).removeClass("grid-hide-disabled")}},getQuery:function(){var a=c.extend(!0,{},this.query),b=this.customQuery;return b?(b.pageSize=a.pageSize,b.pageNo=a.pageNo,b.sortName=c.extend([],a.sortName),b.sortType=c.extend([],a.sortType),b):a},setQuery:function(a){"object"==typeof a&&(this.customQuery=a),a=a||this.backupQuery;var b=this.options.sortstyle,d=this.query;"number"==typeof a.pageSize&&(d.pageSize=a.pageSize),"number"==typeof a.pageNo&&(d.pageNo=a.pageNo),"array"===c.type(a.sortName)&&(d.sortName=c.extend([],a.sortName),d.sortName.length>b&&(d.sortName.length=b)),"array"===c.type(a.sortType)&&(d.sortType=c.extend([],a.sortType),d.sortType.length>b&&(d.sortType.length=b)),this._setSortTypeObj()},_setHeight:function(a){return"number"==typeof a&&(a-=1,this.boxHeight-=this.gridHeight-a,this.gridHeight=a,this._lazyload(),this.options.colhidden&&this.hideCol.hideCol&&this.hideCol.hideCol.blur(),!0)},setHeight:function(a){this.autoHeight=!this._setHeight(a),this._setLayout()},setWidth:function(a){if("number"==typeof a&&a-2!==this.gridWidth){var b=this.ittab;b&&b.ittabActive||(a-=2,this.options.adaptive&&(this.tableWidth=a-17,this.isIttab=!1),this.gridWidth=a,this._setLayout(),this.options.colhidden&&this.hideCol.hideCol&&this.hideCol.hideCol.blur())}},setHighLight:function(a,b){var d=this.options.primarykey,e=this.data,f=this.endRow;if(e[0]&&e[0].hasOwnProperty(d))for(var g=this.rowSize;g--;)if(e[g][d]===a){g<f&&(b!==!1?c(this.domTr[g]).addClass("grid-highlight"):c(this.domTr[g]).removeClass("grid-highlight")),this.heightLight[g]=b!==!1;break}},selectRowsByIndex:function(a,b){b=b!==!1;var c,d,e=this.options,f=e.selectrows,g=this.data,h=[],i=this.disabledIndex;if("no"===f||a>=this.rowSize)return[];if(b!==!1&&(b=!0),"number"==typeof a&&(a=[a]),"single"===f)c=a[0],c>-1&&!i[c]&&(this._selectRows(c,b),h.push(g[c]));else for(var j=0,k=a.length;j<k;j+=1)d=a[j],i[j]||(this._selectRows(d,b),h.push(g[d]));return h},_pkToIndex:function(a,b){var d=this.data,e=this.rowSize,f=this.options.primarykey;if(d[0].hasOwnProperty(f)===!1||void 0===a)return[];"array"!==c.type(a)&&(a=[a]);for(var g=a.length,h=[],i=0;i<g;i+=1){for(var j=a[i],k=!1,l=e;l--;)if(d[l][f]===j){h.push(l),k=!0;break}!k&&b&&h.push(-1)}return h},getIndexByPk:function(a){if(void 0!==a)return this._pkToIndex(a,!0)[0]},selectRowsByPK:function(a,b){var d=this.options;return"array string number".indexOf(c.type(a))!==-1&&"no"!==d.selectrows&&this.rowSize&&this.data[0].hasOwnProperty(d.primarykey)!==!1?this.selectRowsByIndex(this._pkToIndex(a,!0),b):[]},disableRows:function(a,b){var d,e,f,g,h,i,j=this.options,k=c.type(a),l=this.disabledIndex;if("array string number".indexOf(k)!==-1&&"no"!==j.selectrows&&this.rowSize&&this.data[0].hasOwnProperty(j.primarykey)!==!1)for(b=void 0===b||b,b&&this.selectRowsByPK(a,!1),d=this._pkToIndex(a,!1),h=this.domTr,f=0,g=d.length;f<g;f++)e=d[f],i=c(h[e]),b?i.addClass("grid-disable-row"):i.removeClass("grid-disable-row"),l[e]=b},_removeRow:function(a){var b=this.data,d=b[a];return this.data.splice(a,1),c(this.domTr[a]).remove(),this.domTr.splice(a,1),this.domTd.splice(a,1),this.multiChecked.splice(a,1),this.disabledIndex.splice(a,1),this.singleChecked>a&&this.singleChecked--,this.domFixed.splice(a+1,1),d},removeData:function(a){if("number"==typeof a||"array"===c.type(a)){"number"==typeof a&&(a=[a]),a.sort(function(a,b){return a-b});for(var b=a.length,d=[],e=this.singleChecked,f=this.multiChecked,g=this.options,h=g.selectrows,i=g.ellipsis,j=this.endRow,k=0;k<b;k+=1){var l=a[k]-k,m=this.rowSize;if(isNaN(l)||l>=m){a[k]=0;break}this.rowSize=m-1,l<j&&(i&&(l<this.trEnd&&this.trEnd--,l<this.trStart&&this.trStart--),this.endRow--),"multi"===h?f[l]===!0&&this.multiCheckedNum--:"single"===h&&e===l&&(this.singleChecked=NaN);var n=this._removeRow(l);n&&d.push(n)}var o=this.rowSize;if(o<=0)this.query.pageNo>1&&(this.query.pageNo-=1),this.rowSize=0,this._isEmpty();else{"multi"===g.selectrows&&(this.multiCheckedNum===o?this.gridAllCheck.addClass("grid-all-checkbox-checked"):this.gridAllCheck.removeClass("grid-all-checkbox-checked"));for(var p=this.domTr,q=this.endRow;q--;)p[q].removeAttribute("index");var r=a[0]-0;this._setOddEven(r),this._setNum(r),this._lazyload()}this.autoHeight&&"function"==typeof this.options.resizewidth?this.resize():this._setLayout();var s=g.removedata_callback;"function"==typeof s&&s.call(this,d)}},removeDataByPk:function(a){this.removeData(this._pkToIndex(a,!1))},changeData:function(a,b){if("object"===c.type(a)){var d=this.options,e=d.primarykey,f=a[e];if("undefined"!=typeof f){var g=this._pkToIndex(f,!1)[0];b=void 0===g?b:g}if(!("number"!=typeof b||b<0||b>=this.rowSize||(this.data[b]=c.extend(!0,this.data[b],a),b>=this.endRow))){var h=this._dataToDom([a],0,1),i=h.domTd[0],j=this.domTd[b],k=this.bindName,l=d.fixcolumnnumber;this.odd=!this.odd;for(var m=this.colSize;m--;){var n=k[m],o=c(j[m]);if(o.removeAttr("title"),m<l){if("number"!=typeof n){var p=o.find(".grid-fixed-s")[0],q=c(i[m]).find(".grid-fixed-s")[0].innerHTML;p.innerHTML=q,p.nextSibling&&(p.nextSibling.nodeValue=q)}}else"number"!=typeof n&&o.html(i[m].innerHTML)}}}},getData:function(){return c.extend(!0,[],this.data)},getSelectedRowData:function(){var a=this.options.selectrows;if("no"===a)return[];var b=this.data;if("single"===a)return isNaN(this.singleChecked)?[]:[b[this.singleChecked]];if(this.multiCheckedNum===this.rowSize)return this.data;for(var c=this.multiChecked,d=this.rowSize,e=[],f=0;f<d;f+=1)c[f]&&e.push(b[f]);return e},getSelectedPrimaryKey:function(){var a=this.options,b=a.selectrows,c=a.primarykey,d=this.getSelectedRowData(),e=d.length;if("no"===b||!e||d[0].hasOwnProperty(c)===!1)return[];for(var f=[],g=0;g<e;g+=1)f.push(d[g][c]);return f},getSelectedIndex:function(){var a=this.options.selectrows;if("no"===a)return[];if("single"===a)return[this.singleChecked];for(var b=this.multiChecked,c=this.rowSize,d=[],e=0;e<c;e+=1)b[e]&&d.push(e);return d},getRowsDataByIndex:function(a){var b=this.data;if("number"==typeof a)return[b[a]];if("array"===c.type(a)){for(var d=a.length,e=[],f=0;f<d;f+=1){var g=b[a[f]];g&&e.push(g)}return e}},getRowsDataByPK:function(a){var b=this.options.primarykey,d=this.data;if(d[0]&&d[0].hasOwnProperty(b)){"array"!==c.type(a)&&(a=[a]);for(var e=a.length,f=[],g=0;g<e;g+=1)for(var h=a[g],i=this.rowSize;i--;)if(d[i][b]===h){f.push(d[i]);break}return f}return null},_switchCol:function(a,b){var d=this.domHeadCol,e=this.domBodyCol,f=this.domTd,g=this.domTh,h=this.domFixed,i=this.domTr,j=this.options.fixcolumnnumber,k=this.numCol;this._switchArrayValue(this.bindName,a,b),this._switchArrayValue(this.bindDotName,a,b),this._switchArrayValue(this.colIndex,a,b),this._switchArrayValue(this.theadText,a,b),this._switchArrayValue(this.renderStyle,a,b),this._switchArrayValue(this.colRender,a,b),this._switchArrayValue(this.colWidth,a,b),this._switchArrayValue(this.initColWidth,a,b),this._switchArrayValue(this.colWidthBackup,a,b),this._switchArrayValue(this.colHidden,a,b),
this._switchArrayValue(this.tdsPackage,a,b),isNaN(k)||(a===k?this.numCol=b-(a>b?0:1):a>k&&b<=k?this.numCol=k+1:a<k&&b>k&&(this.numCol=k-1));var l=null,m=this.endRow,n=this.hideCol,o=n.domA,p=n.gridHidecolList;if(b===this.colSize){var q=c(g[a]);q.appendTo(q.parent());var r=c(e[a]);r.appendTo(r.parent());var s=c(d[a]);for(s.appendTo(s.parent());m--;)l=f[m],i[m].appendChild(l[a]),this._switchArrayValue(l,a,b);p&&(""!==this.selectrowsClass?p.appendChild(o[a-1]):p.appendChild(o[a]))}else{for(c(g[a]).insertBefore(g[b]),c(e[a]).insertBefore(e[b]),c(d[a]).insertBefore(d[b]);m--;)l=f[m],i[m].insertBefore(l[a],l[b]),this._switchArrayValue(l,a,b);p&&(""!==this.selectrowsClass?p.insertBefore(o[a-1],o[b-1]):p.insertBefore(o[a],o[b]))}if(this._switchArrayValue(g,a,b),a<j||b<j){var t=Math.min(a,b),u=Math.max(a,b);j++;for(var v=0,w=this.rowSize+1;v<w;v++){this._switchArrayValue(h[v],a,b);for(var x=t;x<=u;x++)c(h[v][x]).parent().css("zIndex",j-x)}}this._switchArrayValue(e,a,b),this._switchArrayValue(d,a,b),this.persistence&&this._triggerStatusChange()},_switchArrayValue:function(a,b,c){a.length<c&&(a[c]=void 0),b>c?a.splice(c,0,a.splice(b,1)[0]):a.splice(c-1,0,a.splice(b,1)[0])},ittab:{ittabActive:!1,_init:function(a){var b=this,d=a.gridOverlay,e=a.gridLine,f=[],g=0,h=0,i=!0,j=NaN,k=a.options.adaptive;a.gridHeadTable.find(".grid-ittab").show(),a.gridHeadTable.on("mousedown",function(b){var k=b.target;if(h=0,"grid-ittab"===k.className){f=a.colWidth,j=a._thIndex(c(k).parents("th")[0]),d.show().css("cursor","col-resize");var l=d.offset().left;g=b.pageX-l,e.show().css("left",g),i=!1,d.off("mousemove").on("mousemove",function(a){return a.stopPropagation(),h=a.pageX-l,f[j]+h-g<24&&(h=24+g-f[j]),e.css("left",h),!1})}return!1}),d.on("mouseup mouseout",function(){if(!i&&!isNaN(j)&&(i=!0,c(this).hide(),e.hide(),0!==h)){var d=h-g;a.isIttab=!0,a.colWidth[j]=f[j]+d,a.tableWidth=a.tableWidth+d,b.ittabActive=!0,a._setColWidthStyle(k?void 0:j),a.persistence&&a._triggerStatusChange(),a._setLayout(),b.ittabActive=!1,g=h=0,j=NaN}})}},hideCol:{_init:function(b){function d(d,f,h){var i=a.Tools.fixedNumber(b.options.colmaxheight),j=0,k=h,m=1,n=d,o=f;switch(l="",i){case"auto":j=Math.max(b.boxHeight+b.paginationHeight-50,60),c(g.hideCol).height(j);break;default:i&&i>=60&&(j=i)}for(k="number"==typeof j?j/28|0:h,m=Math.ceil(h/k),c(g.hideCol).width(130*m);m--;)l+=e(n.splice(0,k),o.splice(0,k));return l}function e(a,b){for(var d=a.length,e=0,f="",h="",i=[];e<d;e+=1)f=c.trim(a[e].replace(/<.*?>/g,"")),b[e]?(g.ban++,h=' class="grid-hide-disabled"'):h="",i.push('<a href="javascript:;" hidefocus="true"',h," title=",f,">",f,"</a>");return i.join("")}var f=this.hideCol=document.createElement("div"),g=this;g.ban=0,f.className="grid-hidecol";var h=b.theadHeight;f.style.top=h+"px",f.tabIndex="1",c("body").append(f),f=c(f);var i=c.extend(!0,[],b.theadText),j=c.extend(!0,[],b.disabled),k=b.options.colmaxheight;""!==b.selectrowsClass&&(i=i.splice(1,i.length),j=j.splice(1,i.length));var l='<div class="grid-hidecol-list" hidefocus="true" >';l+=0!=k?d(i,j,i.length):e(i,j),l+='</div><div class="grid-hidecol-button"><a href="javascript:;" hidefocus="true" class="cui-button blue-button grid-hidecol-confirm">\u786e\u5b9a</a><a href="javascript:;" hidefocus="true" class="cui-button red-button grid-hidecol-cancel">\u53d6\u6d88</a></div>',f.html(l),this.gridHidecolList=f.find(".grid-hidecol-list")[0],this.domA=this.gridHidecolList.getElementsByTagName("a"),this.bindEvent(b,f)},bindEvent:function(a,b){function d(){for(var a=j;a<f;a+=1)m[a]?c(l[a-j]).addClass("grid-hidecol-nochecked"):c(l[a-j]).removeClass("grid-hidecol-nochecked")}var e=this,f=a.colSize,g=a.gridBox,h=null,i=!1,j=0,k=-1,l=this.domA;document.createElement("span");""!==a.selectrowsClass&&(j+=1),a.gridHeadTable.on("click",function(m){var n=c(m.target);if(n.hasClass("grid-select")){h&&b.blur(),h=n.parents("th").addClass("grid-thead-select");var o=n.offset().left,p=o-117;p+c(".grid-hidecol").width()>c(document).width()&&(p=c(document).width()-c(".grid-hidecol").width()),p<g.offset().left&&(p=g.offset().left);var q=b.children(".grid-hidecol-list").css("height");b.children(".grid-hidecol-list").css("height",28*(f-e.ban)>q?q:"");var r=(c(n).parents("tr").first().outerHeight()+c(n).outerHeight())/2+1.5;b.css({left:p,top:n.offset().top+r}).show().focus().attr("hidefocus","true"),d();var s=a._thIndex(h[0])-j;c(l).removeClass("grid-hidecol-disabled"),c(l[s]).addClass("grid-hidecol-disabled"),k=s,i=!1}else c(b).blur()}),b.on("blur",function(){return i?void b.focus():(h&&h.removeClass("grid-thead-select"),void c(b).hide())}),b.on("mouseover",function(){i=!0}),b.on("mouseout",function(){i=!1});var m=a.colHidden;b.on("click",function(b){var e=c(b.target);if(e.hasClass("grid-hidecol-confirm")){for(var g=j;g<f;g+=1)m[g]=c(l[g-j]).hasClass("grid-hidecol-nochecked");return i=!1,a._colHidden(!1),c(this).blur(),comtop.Browser.isIE&&a._bugFix(),!1}return e.hasClass("grid-hidecol-cancel")?(d(),i=!1,c(this).blur(),!1):"A"===e.prop("tagName")?(e.hasClass("grid-hidecol-disabled")||e.toggleClass("grid-hidecol-nochecked"),!1):void this.focus()}),setTimeout(d,100)}},moveCol:{_init:function(a){var b=c("<div></div>"),d=c("<div></div>"),e=a.gridHeadTable.addClass("grid-col-move");b.addClass("grid-col-move-insert"),d.addClass("grid-col-move-tag"),a.gridHead.append(d).append(b);var f=a.options,g=a.gridOverlay,h=f.fixcolumnnumber,i=a.selectrowsClass,j=null,k=0,l=[],m=[],n=NaN,o=NaN,p=!1,q=!0;e.on("mousedown",function(r){var s=c(r.target);if(s.hasClass("grid-fixed-s")&&!s.hasClass("grid-no-move")){f.colhidden&&a.hideCol.hideCol.blur(),q=!1,j=a.colHidden;var t=a.colWidth,u=a.colSize,v=a.domTh,w=a.domFixed[0],x=Math.round(e.offset().left),y=a.gridScroll[0].scrollLeft,z=0,A=a.theadHeight,B=s.parents("th");n=a._thIndex(B[0]),k=0,l=[],m=[];var C=0,D=null,E=0,F=0;if(n<h){for(p=!0;C<h;C+=1)D=t[C],k+=D,E=Math.round(c(w[C]).offset().left)-x-y,j[C]===!0&&(E=-100),l.push(E),m.push(E),j[C]||(m[C]=E+D/2);l.push(k-y),m.push(k-y-1),i&&(l[0]=m[0]=-100),F=l[n]-1}else{for(p=!1,C=h;C<u;C+=1)D=t[C],E=Math.round(c(v[C]).offset().left)-x-y,j[C]===!0&&(E=-100),l.push(E),m.push(E),j[C]||(m[C-h]=E+D/2);l.push(a.tableWidth-y),m.push(a.tableWidth-y-1),0===h&&i&&(l[0]=m[0]=-100),F=l[n-h]-1}d.show().css({left:F,width:B.width(),height:A-1,lineHeight:A-1+"px"}).html(B.find(".grid-thead-text").eq(0).html()),b.show().css("height",A-5),g.show().css("cursor","move");var G=r.pageX;b.css("left",-1e3),g.off("mousemove").on("mousemove",function(a){a.stopPropagation(),z=a.pageX,d.css("left",F-G+z);for(var c=m.length,e=0;e<c;e+=1){var f=m[e];if(!(f<0)&&z<f){b.css("left",l[e]),o=p?e:e+h;break}}return!1})}}),g.on("mouseup",function(){if(!q&&(q=!0,g.hide(),b.hide(),d.hide(),!isNaN(o)&&!isNaN(n)&&o!==n&&o!==n+1)){if(n>o)return a._switchCol(n,o),void(o=n=NaN);for(var c=n+1;c<o;c+=1)if(!j[c]){a._switchCol(n,o),o=n=NaN;break}}}),g.on("mouseout",function(){g.hide(),b.hide(),d.hide(),o=n=NaN})}},destroy:function(){var a=this;a.options;a._super(),c("."+this.guid).remove()}}),b.defaults={name:"GridMoveRowPlugin"},c.extend(b.prototype,{_init:function(){var a=this,b=this._self;b.el.on("mousedown.moveRow","tr",function(d){a._mouseDownEvent=d,c("body").addClass("cui-userselectnone").attr("unselectable","on").attr("onselectstart","javascript:return false;"),b.el.on("mousemove.moveRow","tr",function(b){return a.__mouseStarted?(a._mouseDrag(b),b.preventDefault()):void(a._mouseDistanceMet(b)&&(a.__mouseStarted=a._mouseStart(b)))}).on("mouseup.moveRow","tr",function(b){a._mouseStop(b)})})},_createEmptyTr:function(){var a=this,b=this._self,d='<div style="width:'+b.tableWidth+'px;z-index:1000;cursor:move;background-color:#ffd398;height: 28px;position: absolute;opacity: .8;filter:alpha(opacity=80);-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=80)";">'+a._buildHtml(a.startData)+"</div>";this._Emptydom=c(d).appendTo(b.gridTableBox),this._Emptydom.css({left:c(b.gridTbody).offset().left-9}),this._Emptydom.on("mouseup.moveRow",function(b){a._mouseStop(b)}).on("mousemove.moveRow",function(b){a._mouseDrag(b)})},repalce:function(a,b){function c(a,b){for(var c=b.split("."),d=0;d<c.length;d++)"undefined"!=typeof b&&(a=a[c[d]]);return a}var d=a.replace(/{([^}]+)}/g,function(a,d){var e=c(b,d);return"undefined"!=typeof e?e:"&nbsp"});return d},_buildHtml:function(a){var b=this,d="";return c.each(b._self.bindName,function(a,c){d+='<span style="line-height: 27px; text-align:center;width: '+b._self.initColWidth[a]+'px ;display: block;float:left;">{'+c+"}</span>"}),d=b.repalce(d,a)},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=1},_getDatabyPkey:function(a){var b,d=this._self.data,e=this;return c.each(d,function(c,d){if(d[e._self.options.primarykey]==a)return b=d,!1}),b},_mouseStart:function(a){return this.startData=this._getDatabyPkey(c(this._mouseDownEvent.currentTarget).attr("pkey")),this._createEmptyTr(),this._mouseDrag(a),!0},_mouseDrag:function(a){var b=this;c.each(this._self.domTr,function(a,d){c("td",d).css({"border-bottom-color":"#eee","border-bottom-width":"1px"});var e=b._Emptydom.offset().top-c(d).offset().top;0<e&&e<28&&(c("td",d).css({"border-bottom-color":"#ff0000","border-bottom-width":"2px"}),b.endData=b._getDatabyPkey(c(d).attr("pkey")))});var d=c(this._self.gridTableBox).offset().top;this._Emptydom.css({top:a.pageY-d-10})},_mouseStop:function(a){var b=this;this._Emptydom.remove();var d,e,f=this._self.data;c("body").removeClass("cui-userselectnone").removeAttr("unselectable").removeAttr("onselectstart"),this._self.el.off("mousemove.moveRow"),this._self.el.off("mouseup.moveRow"),b.startData[b._self.options.primarykey]!=b.endData[b._self.options.primarykey]&&(c.each(f,function(a,c){if(c[b._self.options.primarykey]==b.startData[b._self.options.primarykey])return b._self.removeData(a),d=a+1,!1}),c.each(f,function(a,c){if(c[b._self.options.primarykey]==b.endData[b._self.options.primarykey])return b._self.addData(b.startData,a+1),e=a+2,!1}));var g=e-d;b._self.options.afterdrag_callback&&b._self.options.afterdrag_callback.call(b,b.startData,b.endData,g),this.__mouseStarted=!1}})}(window.comtop),function(a){"use strict";function b(a,b,c){var d,e,h=a[c.bindName]||"",i=c.editType,j=i.datasource,k=g.SinglePullDown.prototype.options,l=i.value_field||k.value_field,m=i.label_field||k.label_field;if("undefined"!=typeof webPath){var n=(webPath||f("#cuiExtendDictionary").attr("webRoot"))+"/top/cfg/getAllValue.ac";!j&&i.dictionary&&f.ajax({type:"GET",url:n,data:"&fullcode="+i.dictionary,dataType:"json",async:!1}).done(function(a){i.datasource=j=a})}if(j)for(d=0,e=j.length;d<e;d++)if(j[d][l]===h)return j[d][m]}function c(a,b,c){var d,e,h,i,j,k,l,m,n,o,p=a[c.bindName]||"";if(""===p)return"";if(p=p.split(";"),j=c.editType,k=j.datasource,l=g.SinglePullDown.prototype.options,m=j.value_field||l.value_field,n=j.label_field||l.label_field,o=[],"undefined"!=typeof webPath){var q=(webPath||f("#cuiExtendDictionary").attr("webRoot"))+"/top/cfg/getAllValue.ac";!k&&j.dictionary&&f.ajax({type:"GET",url:q,data:"&fullcode="+j.dictionary,dataType:"json",async:!1}).done(function(a){j.datasource=k=a})}if(k)for(h=0,i=p.length;h<i;h++)for(d=0,e=k.length;d<e;d++)k[d][m]===p[h]&&o.push(k[d][n]);return o.join(";")}function d(a,b,c){var d,e,g="",h=c.editType,i=h.radio_list;if("undefined"!=typeof a[c.bindName]&&(g=a[c.bindName]),"undefined"!=typeof webPath){var j=(webPath||f("#cuiExtendDictionary").attr("webRoot"))+"/top/cfg/getAllValue.ac";!i&&h.dictionary&&f.ajax({type:"GET",url:j,data:"&fullcode="+h.dictionary,dataType:"json",async:!1}).done(function(a){h.radio_list=i=a})}if(i)for(d=0,e=i.length;d<e;d++)if(i[d].value+""==g+"")return i[d].text}function e(a,b,c){var d,e,g,h,i,j,k,l=a[c.bindName]||"";if(""===l)return"";if(l=l.split(";"),i=c.editType,j=i.checkbox_list,k=[],"undefined"!=typeof webPath){var m=(webPath||f("#cuiExtendDictionary").attr("webRoot"))+"/top/cfg/getAllValue.ac";!j&&i.dictionary&&f.ajax({type:"GET",url:m,data:"&fullcode="+i.dictionary,dataType:"json",async:!1}).done(function(a){i.checkbox_list=j=a})}if(j)for(g=0,h=l.length;g<h;g++)for(d=0,e=j.length;d<e;d++)j[d].value===l[g]&&k.push(j[d].text);return k.join(";")}var f=a.cQuery,g=a.UI,h=a.Tools.fixedNumber||function(a){return a},i=/^((i|I)nput|(c|C)lickInput|(p|((s|S)ingle|(m|M)ulti)?P)ullDown|(c|C)alender|(t|T)extarea)|((c|C)heckbox|(r|R)adio)Group$/,j=/(ullDown|Group)$/,k=/(nput|textarea)$/,l={required:function(a,b){var c,d,e,g=f.extend({m:"\u4e0d\u80fd\u4e3a\u7a7a!"},b||{}),h=g.emptyVal,i=g.m;if(""===a||null===a||void 0===a)return i;if(h)for(c=0,d=h.length;c<d;c++)if(a==h[c])return i;if("array"===f.type(a)){if(d=a.length,0===d)return i;for(c=0;c<d;c++)if(e=a[c],""===e||null===e||void 0===e)return i}return!0},numeric:function(a,b){if(""===a)return!0;var c,d,e=a;if(a=Number(a),b=b||{},c={notANumberMessage:b.notnm||"\u5fc5\u987b\u4e3a\u6570\u5b57!",notAnIntegerMessage:b.notim||"\u5fc5\u987b\u4e3a\u6574\u6570!",wrongNumberMessage:b.wrongm||"\u5fc5\u987b\u4e3a "+b.is+"!",tooLowMessage:b.minm||"\u5fc5\u987b\u5927\u4e8e "+b.min+"!",tooHighMessage:b.maxm||"\u5fc5\u987b\u5c0f\u4e8e "+b.max+"!",is:b.is||0===b.is?b.is:null,minimum:b.min||0===b.min?b.min:null,maximum:b.max||0===b.max?b.max:null,onlyInteger:b.oi||!1},!isFinite(a))return c.notANumberMessage;if(c.onlyInteger&&!/^\d+$/.test(String(e)))return c.notAnIntegerMessage;switch(!0){case null!==c.is:if(a!==Number(c.is))return c.wrongNumberMessage;break;case null!==c.minimum&&null!==c.maximum:if(d=this.numeric(a,{minm:c.tooLowMessage,min:c.minimum}),d!==!0)return d;if(d=this.numeric(a,{maxm:c.tooHighMessage,max:c.maximum}),d!==!0)return d;break;case null!==c.minimum:if(a<Number(c.minimum))return c.tooLowMessage;break;case null!==c.maximum:if(a>Number(c.maximum))return c.tooHighMessage}return!0},format:function(a,b){if(""===a)return!0;a=String(a);var c=f.extend({m:"\u4e0d\u7b26\u5408\u89c4\u5b9a\u683c\u5f0f!",pattern:/./,negate:!1},b||{});return c.pattern="string"===f.type(c.pattern)?new RegExp(c.pattern):c.pattern,!(!c.negate&&!c.pattern.test(a))||c.m},email:function(a,b){if(""===a)return!0;var c=f.extend({m:"\u90ae\u7bb1\u683c\u5f0f\u8f93\u5165\u4e0d\u5408\u6cd5!"},b||{}),d=this.format(a,{m:c.m,pattern:/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i});return d===!0||d},dateFormat:function(a,b){var c=f.extend({m:"\u65e5\u671f\u683c\u5f0f\u5fc5\u987b\u4e3ayyyy-MM-dd\u5f62\u5f0f\uff01"},b||{}),d=this.format(a,{m:c.m,pattern:/^((((((0[48])|([13579][26])|([2468][048]))00)|([0-9][0-9]((0[48])|([13579][26])|([2468][048]))))-02-29)|(((000[1-9])|(00[1-9][0-9])|(0[1-9][0-9][0-9])|([1-9][0-9][0-9][0-9]))-((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30))|(((0[1-9])|(1[0-2]))-((0[1-9])|(1[0-9])|(2[0-8]))))))$/i});return d===!0||d},length:function(a,b){a=String(a),b=b||{};var c,d={wrongLengthMessage:b.wrongm||"\u957f\u5ea6\u5fc5\u987b\u4e3a "+b.is+" \u5b57\u8282!",tooShortMessage:b.minm||"\u957f\u5ea6\u5fc5\u987b\u5927\u4e8e "+b.min+" \u5b57\u8282!",tooLongMessage:b.maxm||"\u957f\u5ea6\u5fc5\u987b\u5c0f\u4e8e "+b.max+" \u5b57\u8282!",is:b.is||0===b.is?b.is:null,minimum:b.min||0===b.min?b.min:null,maximum:b.max||0===b.max?b.max:null};switch(!0){case null!==d.is:if(a.replace(/[^\x00-\xff]/g,"xx").length!==Number(d.is))return d.wrongLengthMessage;break;case null!==d.minimum&&null!==d.maximum:if(c=this.length(a,{minm:d.tooShortMessage,min:d.minimum}),c!==!0)return c;if(c=this.length(a,{maxm:d.tooLongMessage,max:d.maximum}),c!==!0)return c;break;case null!==d.minimum:if(a.replace(/[^\x00-\xff]/g,"xx").length<Number(d.minimum))return d.tooShortMessage;break;case null!==d.maximum:if(a.replace(/[^\x00-\xff]/g,"xx").length>Number(d.maximum))return d.tooLongMessage;break;default:return"\u957f\u5ea6\u9a8c\u8bc1\u5fc5\u987b\u63d0\u4f9b\u957f\u5ea6\u503c!"}return!0},inclusion:function(a,b){var c,d=f.extend({m:"",within:[],allowNull:!1,partialMatch:!1,caseSensitive:!0,negate:!1},b||{}),e=(d.within,!1),g=d.m||a+"\u6ca1\u6709\u5305\u542b\u5728\u6570\u7ec4"+d.within.join(",")+"\u4e2d";if(d.allowNull&&!a)return!0;if(!d.allowNull&&!a)return d.m;if(!d.caseSensitive){var c=[];f.each(d.within,function(a,b){"string"==typeof b&&(b=b.toLowerCase()),c.push(b)}),d.within=c,"string"==typeof a&&(a=a.toLowerCase())}return f.each(d.within,function(b,c){if(c===a||d.partialMatch&&a.indexOf(c)!==-1)return e=!0,!1}),d.negate!==e||g},exclusion:function(a,b){var c,d=f.extend({m:"",within:[],allowNull:!1,partialMatch:!1,caseSensitive:!0},b||{});return d.m=d.m||a+"\u4e0d\u5e94\u8be5\u5728\u6570\u7ec4"+d.within.join(",")+"\u4e2d\uff01",d.negate=!0,c=this.inclusion(a,d),c===!0||c},acceptance:function(a,b){var c=f.extend({m:"\u5fc5\u987b\u9009\u62e9!"},b||{});return!!a||c.m},custom:function(a,b){var c=f.extend({against:function(){return!0},args:{},m:"\u4e0d\u5408\u6cd5!"},b||{}),d=c.against;return"string"===f.type(d)&&(d=window[d]),!!d(a,c.args)||c.m}};a.UI.EditableGrid=a.UI.Base.extend({options:{uitype:"EditableGrid",gridwidth:"600px",gridheight:"500px",tablewidth:"",primarykey:"",readonly:!1,ellipsis:!0,titleellipsis:!0,adaptive:!0,oddevenrow:!1,selectrows:"multi",fixcolumnnumber:0,config:null,onstatuschange:null,datasource:null,titlerender:null,colhidden:!0,colmove:!1,loadtip:!0,resizeheight:null,resizewidth:null,rowstylerender:null,colstylerender:null,colrender:null,sortstyle:1,sortname:[],sorttype:[],pageno:1,pagesize:50,pagesize_list:[25,50,100],pagination:!0,pagination_model:"pagination_min_1",rowclick_callback:null,loadcomplete_callback:null,selectall_callback:null,rowdblclick_callback:null,edittype:{},submitdata:null,editbefore:null,editafter:null,deletebefore:null,deleteafter:null},formatFn:{date:a.Date.simpleformat,money:a.Number.money},renderMethod:{a:function(a,b,c){var d=["<a"],e=b.params,f="";if(e){e=e.split(";");for(var g=[],h=e.length;h--;){var i=e[h];a.hasOwnProperty(i)&&g.push([i,"=",a[i]].join(""))}f="?"+g.join("&")}return d.push(" href='",(b.url||"")+f,"' class='",b.className||"","' target='",b.targets||"-self","' clickid='",b.click,"'>",c,"</a>"),d.join("")},image:function(a,b,c){var d=["<img"];d.push(" class='",b.className||"");var e=b.url,f=b.compare,g=b.relation,h=b.title,i=c;if("string"==typeof g)if(/\./.test(g)){var j=g.split(".");i=a[j[0]][j[1]]}else i=a[g];return h=h&&h[i]?h[i]:c,f&&(e=f[i]||e),d.push("' src='",e,"' title='",h,"' clickid='",b.click,"' />"),d.join("")},button:function(a,b,c){var d=["<button class='"];return d.push(b.className||"","' clickid='",b.click,"'>",b.value||c,"</button>"),d.join("")}},_init:function(){var b=this.options,c=b.config,d=b.onstatuschange,e=b.datasource,g=b.sortstyle;b.primarykey||window.alert("\u8bf7\u8bbe\u7f6eprimarykey!"),b.sortname.length=Math.min(b.sortname.length,g),b.sorttype.length=Math.min(b.sorttype.length,g),"string"==typeof c&&"function"==typeof window[c]&&(b.config=window[c]),"string"==typeof d&&"function"==typeof window[d]&&(b.onstatuschange=window[d]),"string"==typeof e&&"function"==typeof window[e]&&(b.datasource=window[e]),this.el=b.el,this.elCache=null,this.gridContainer=null,this.gridBox=null,this.gridStyle=null,this.gridHead=null,this.gridHeadTable=null,this.gridTableHide=null,this.gridBody=null,this.gridTableBox=null,this.gridTbody=null,this.gridScroll=null,this.gridLine=null,this.gridEmpty=null,this.gridTfoot=null,this.loading=null,this.gridOverlay=null,this.gridAllCheck=null,this.createDomBox=document.createElement("div"),this.domTh=[],this.domTr=[],this.domTd=[],this.domFixed=[],this.domHeadCol=[],this.domBodyCol=[],this.theadMap=[],this.extendTh=[],this.trFrag=document.createElement("tbody"),this.data=[],this.backupQuery=null,this.query=null,this.customQuery=null,this.rowSize=0,this.colSize=0,this.sortType={},this.theadText=[],this.renderStyle=[],this.colRender=[],this.bindName=[],this.left=0,this.numCol=NaN,this.colWidth=[],this.initColWidth=[],this.colWidthBackup=[],this.multiChecked=[],this.multiCheckedNum=0,this.singleChecked=NaN,this.disabledIndex=[],this.fixedFnClick=[],this.colHidden=[],this.disabled=[],this.totalSize=0,this.guid="eg-"+a.guid(),this.heightLight=[],this.colIndex=[],this.gridWidth=0,this.gridHeight=0,this.tableWidth=0,this.theadHeight=30,this.boxHeight=0,this.paginationHeight=b.pagination?41:0,this.selectrowsClass="",this.tdsPackage=[],this.renderComplete=!1,this.odd=!1,this.unRender=!0,this.autoHeight=!1,this.isIttab=!1,this.arrIndex=Array.prototype.indexOf,this.isQm=a.Browser.isQM,this.persistence="function"==typeof d&&"function"==typeof c,this.oddEvenClass="eg-even-row",this.selectedRowClass="eg-select-row";try{var h=f("head");h.append('<style type="text/css"></style>'),h.find("style").last()[0].innerHTML="",this.writeStyle=!0}catch(i){this.writeStyle=!1}this.editType={},this.editDict={},this.editObj=null,this.changeEditData={insertData:{},updateData:{},deleteData:[]},this.validateState={insert:{},update:{}},this.insertId=0,this.dataBackup={},this.isChanged=!1,this._createHeadDom(),this._backupQuery(),this._setPageSize(),this._setSortTypeObj(),this.__getDomTh(),this.__initWidthAndHeight()},_createHeadDom:function(){var a=this,b=this.options,c="<thead><tr>",d="<thead>",e=!1;b.columns&&(f.each(b.columns,function(g,h){f.isArray(h)?(e=!0,d+="<tr>",f.each(h,function(b,c){d+=a._createHeadTr(c)}),d+="</tr>"):(0===g&&"no"!=b.selectrows&&(c+="<th width='40px'></th>"),c+=a._createHeadTr(h))}),d+="<thead>",c+="</tr><thead>",this.el.append(e?d:c))},_createHeadTr:function(a){var b="<th ",c=a.name;return a.type&&"checkbox"==a.type&&(c='<input type="checkbox" />'),f.each(a,function(a,c){return"type"==a||"name"==a||(b+=[a,'="',c,'"'].join(""),void(b+=" "))}),b+=">"+c+"</th>"},_backupQuery:function(){var a=this.options,b={pageSize:a.pagesize,pageNo:a.pageno,sortName:f.extend([],a.sortname),sortType:f.extend([],a.sorttype)};this.backupQuery=f.extend(!0,{},b),this.query=b},_setPageSize:function(){for(var a=this.options,b=this.query,c=a.pagesize_list,d=b.pageSize,e=c.length;e--;)if(d===c[e])return;b.pageSize=c[1]},_setSortTypeObj:function(){for(var a=this.query,b=a.sortName,c=a.sortType,d=b.length,e=this.sortType={},f=0;f<d;f+=1){var g=c[f].toUpperCase();c[f]=g,e[b[f]]=g}},__getDomTh:function(){var a,b,c,d=this.el,e=this.colIndex,g=this.extendTh;if(a=f(document.createElement("div")).html(["<table><thead>",d.find("thead").html()||d.find("tbody").html()||d.html(),"</thead></table>"].join("")).find("table").eq(0),this.elCache=a,b=a.find("tr"),c=b.length,1===c){for(var h=a[0].getElementsByTagName("th"),i=[],j=0,k=h.length;j<k;j+=1)i.push(h[j]),e[j]=j;this.domTh=i}else{var l,m,n,o,p=this.theadMap=[];for(l=0;l<c;l+=1){var q=b.eq(l)[0],r=q.cells,s=r.length,t=0;for(g[l]=[],p[l]||(p[l]=[]),m=0;m<s;m+=1){var u=r[m],v=u.colSpan;for(n=0;n<v;n+=1)p[l][t+n]=u;t+=v}var w=document.createElement("th");w.className="eg-empty-th",q.insertBefore(w,r[0])}for(l=c;l--;){var x=p[l],y=x.length;for(m=0;m<y;m+=1){var z=x[m],A=z.rowSpan;if(A>1&&!g[l][m])for(A+=l,n=l+1;n<A;n+=1)o=p[n],o&&(g[n][m]=!0,o.splice(m,0,z))}}this.domTh=f.extend([],p[c-1])}this.colSize=this.domTh.length},__initWidthAndHeight:function(){var a=this.options,b="function"==typeof a.resizewidth?a.resizewidth():void 0,c="function"==typeof a.resizeheight?a.resizeheight():void 0,d=a.gridwidth=h(a.gridwidth),e=a.gridheight=h(a.gridheight);this.gridWidth=(b||d)-2,"auto"===e&&(e=500,this.autoHeight=!0),this.gridHeight=(c||e)-2,this.theadHeight=30*this.elCache.find("tr").length,this.boxHeight=this.gridHeight-this.paginationHeight-this.theadHeight,this.tableWidth=a.adaptive?this.gridWidth-17:h(a.tablewidth)||this.gridWidth},_create:function(){this.__createLayoutDom(),this.__theadClickEventBind(),this.__theadMouseEventBind(),this.__tbodyMouseEventBind(),this.__tbodyKeyEventBind(),this.__imitateScroll(),this._resizeEventBind(),this._setStyleWidth(),this._setStyleHeight(),this._loading("show");var a=this.options,b=a.datasource,c=a.config;"function"==typeof b&&(this.persistence?c(this):(this._createPropertys(),this._createContent(),b(this,this.getQuery())))},__createLayoutDom:function(){var a=this.options,b=this.el,c=document.createElement("div");c.className="eg-container";var d=['<div class="eg-style"></div>','<div class="eg-box">','<div class="eg-head">','<table class="eg-head-table"></table>',"</div>",'<div class="eg-body">','<div class="eg-empty">\u672c\u5217\u8868\u6682\u65e0\u8bb0\u5f55</div>','<div class="eg-table-box"><div class="eg-table-hide"></div></div>',"</div>",'<div class="eg-scroll">',"<div></div>","</div>",'<div class="eg-line"></div>','<div class="eg-overlay"></div>',"</div>",'<div class="eg-tfoot"></div>','<div class="eg-loading-bg eg-loading-bg-over"></div>','<div class="eg-loading-box"><span>\u6b63\u5728\u52a0\u8f7d...</span></div>'];c.innerHTML=d.join(""),b[0].parentNode.insertBefore(c,b[0]);var e=this.gridContainer=f(c).addClass(this.guid);this.isQm&&e.addClass("eg-container-qm"),this.gridTableBox=f(".eg-table-box",e);var g=this.gridBox=e.children(".eg-box");this.gridStyle=e.find(".eg-style").eq(0),this.gridHead=g.find(".eg-head").eq(0),this.gridBody=g.children(".eg-body").eq(0),this.gridOverlay=g.children(".eg-overlay").eq(0),this.gridHeadTable=this.gridHead.children(".eg-head-table").eq(0),this.gridLine=g.children(".eg-line").eq(0),this.gridScroll=g.children(".eg-scroll").eq(0),this.gridTfoot=e.children(".eg-tfoot").eq(0),this.gridEmpty=this.gridBody.children(".eg-empty").eq(0),this.loading=e.children(".eg-loading-bg").next().andSelf(),this.gridTableHide=f(".eg-table-hide",e).eq(0).append(b.addClass("eg-body-table")),a.ellipsis&&b.addClass("eg-ellipsis"),a.titleellipsis&&this.gridHeadTable.addClass("eg-ellipsis")},__theadClickEventBind:function(){var a=this.options,b=this.bindName,c=a.primarykey,d=this;this.gridHeadTable.on("click",function(e){e.stopPropagation();var g=f(e.target),h=g.attr("class");if("eg-select"!==h&&"eg-ittab"!==h)if(g.hasClass("eg-all-checkbox")){var i,j=d.domTr,k=d.multiChecked,l=d.selectedRowClass,m="eg-all-checkbox-checked",n=d.rowSize,o=g.hasClass(m),p=d.disabledIndex,q=0,r=d.data;if(o){for(var s=n;s--;)k[s]=!1,f(j[s]).removeClass(l);g.removeClass(m),d.multiCheckedNum=0}else{for(var t=n;t--;)i=r[t],i.hasOwnProperty(c)&&p[t]||(q++,k[t]=!0,f(j[t]).addClass(l));g.addClass(m),d.multiCheckedNum=q}var u=a.selectall_callback;if("function"==typeof u){var v=!o;u.call(d,v?d.data:[],v)}}else{var w=g.parents(".eg-sort");if(w.length&&"eg-thead-text"===h){var x=d.sortType,y=b[d._thIndex(w[0])],z=x[y],A="DESC"!==z?"DESC":"ASC";d._setOptsSortNameAndSoryType(y,A),d.persistence&&d._triggerStatusChange(),"noChange"===d.submit()&&d.loadData()}}})},_thIndex:function(a){var b=this.domTh,c=this.arrIndex;if(c)return c.call(b,a);for(var d=this.colSize;d--;)if(b[d]===a)return d;return-1},_setOptsSortNameAndSoryType:function(a,b){for(var c=this.query,d=this.options.sortstyle,e=c.sortName,f=c.sortType,g=d;g--;)if(a===e[g]){f.splice(g,1),e.splice(g,1);break}e.length===d&&(f.shift(),e.shift()),e.push(a),f.push(b),this._setSortTypeObj()},__theadMouseEventBind:function(){this.gridHeadTable.on("mouseover",function(a){var b=f(a.target),c=b.closest(".eg-fixed-s").eq(0);c.length&&c.parents("th").addClass("eg-thead-mouseover")}).on("mouseout",function(a){var b=f(a.target),c=b.closest(".eg-fixed-s").eq(0);c.length&&c.parents("th").removeClass("eg-thead-mouseover")})},__tbodyMouseEventBind:function(){function a(a){var b=!1;"multi"===o?b=k.multiChecked[a]:"single"===o&&(b=a===k.singleChecked),"function"==typeof l.rowclick_callback&&l.rowclick_callback.call(k,i,b,a)}var b,c,d,e,g,h,i,j,k=this,l=this.options,m=this.editType,n=l.rowdblclick_callback,o=l.selectrows,p="A;BUTTON;IMG";this.el.delegate("td","mouseover",function(a){var j,l,n,o;a.stopPropagation(),j=f(a.target).closest("td").eq(0),j.length&&j!==b&&(l=j.closest("tr").eq(0),l.closest("tbody").length&&(b=j,c=l,d=c[0].rowIndex-1,i=k.data[d],n=j[0].cellIndex,g=k.bindName[n],h=m[g],c.addClass("eg-tr-over"),e=b.hasClass("eg-editing"),e||(h&&(o=!0,b.addClass("eg-editable-td")),k._renderTitle(b,g,d,o))))}).on("mouseout",function(a){a.stopPropagation(),b&&(c.removeClass("eg-tr-over"),b.removeClass("eg-editable-td"),c=b=e=d=g=h=void 0)}).on("dblclick",function(a){a.stopPropagation(),"function"==typeof l.rowdblclick_callback&&b&&!h&&(clearTimeout(j),l.rowdblclick_callback.call(k,i,d))}),this.gridBody.on("click",function(c){var l,m,o=f(c.target);if(c.stopPropagation(),b){if(e)return;if(k.editObj&&k._destroyFormEle(),h)return void k.__startEdit(h,b,d,g);if(l=o.prop("tagName"),m=o.attr("clickid")||"",p.indexOf(l)!==-1)return void(""!==m&&k.fixedFnClick[m](i,d));if("INPUT"===l)return;o.closest("td").hasClass("eg-select-input")&&k._selectRows(d,void 0),n?(clearTimeout(j),j=setTimeout(function(){a(d)},300)):a(d)}k.editObj&&k._destroyFormEle()})},__tbodyKeyEventBind:function(){var a=this;f(document).on("keydown",function(b){var c,d=a.editObj;d&&9===b.keyCode&&(b.preventDefault(),a._destroyFormEle(),c=d.index,!a.__createNextEditObj(c,d.bindName)&&c+1<a.rowSize&&a.__createNextEditObj(c+1,a.bindName[0]))})},__createNextEditObj:function(a,b){var c,d,e,g,h,i=this.colSize,j=this.bindName,k=this.editType,l=this.gridTableBox;for(c=0;c<i;c++)if(d=j[c],e=k[d],e&&g){if(h=f(this.domTd[a][c]),this.__startEdit(e,h,a,d,!0))return this.gridScroll.scrollLeft(l.scrollLeft()+this.left),l.scrollLeft(0),!0}else d===b&&(g=!0)},_renderTitle:function(a,b,c,d){var e,g,h=this.options.titlerender;"number"==typeof b||a.attr("title")||(g=a.find(".eg-fixed-s"),g=g.length?g:null,"function"==typeof h&&(e=h(this.data[c],b),e?d=!1:""),e=e||f.trim((g||a).text()),e&&d?e+=" (\u70b9\u51fb\u7f16\u8f91)":"",e&&a.attr("title",e))},__startEdit:function(a,b,c,d,e){var g,h,i=this.options.editbefore;return"function"==typeof i&&(g=i.call(this,this.data[c],d,c),"object"===f.type(g)&&(h=g.uitype,g.uitype=h.charAt(0).toLowerCase()+h.slice(1),a=g)),!this.options.readonly&&(g!==!1&&(b.removeAttr("title"),this._createFormEle(b,a,c,d,e),!0))},setReadonly:function(a){this.options.readonly=!!a},_selectRows:function(a,b){var c=this.domTr,d=c[a],e=this.options,g=e.selectrows,h=this.selectedRowClass,i=f(d);if(!this.disabledIndex[a])if("multi"===g){var j=this.multiChecked,k=j[a];if(void 0===b)b=k!==!0;else if(b===k)return;if(j[a]=b,!d)return;b===!1?(i.removeClass(h),this.multiCheckedNum--,this.gridAllCheck.removeClass("eg-all-checkbox-checked")):(i.addClass(h),this.multiCheckedNum+=1,this.multiCheckedNum===this.rowSize&&this.gridAllCheck.addClass("eg-all-checkbox-checked"))}else if("single"===g){var l=this.singleChecked;if(this.singleChecked=l===a&&b===!1?NaN:a,!d)return;b===!1?i.removeClass(h):(isNaN(l)||f(c[l]).removeClass(h),i.addClass(h))}},__imitateScroll:function(){var a,b,c=this,d=c.guid,e=this.gridHeadTable[0],f=this.gridStyle[0],g=this.el[0],h=this.options.fixcolumnnumber;this.writeStyle?this.gridScroll.on("scroll",function(){a=c.left=this.scrollLeft,b!==a&&(b=a,f.innerHTML=['<style type="text/css">.',d," .eg-fixed .eg-fixed-s{left:",a,"px}.",d," .eg-body-table, .",d," .eg-head-table{margin-left:-",a,"px}</style>"].join(""))}):this.gridScroll.on("scroll",function(){if(a=c.left=this.scrollLeft,a+="px",b!==a){b=a;var d="-"+a;e.style.marginLeft=d,g.style.marginLeft=d;for(var f=c.domFixed,i=f.length;i--;)for(var j=f[i],k=h;k--;)j[k].style.left=a;for(var l=c.tdsPackage,m=0;m<h;m+=1)l[m].html=l[m].html.replace(/(style="left:)\d*?px/,"$1"+a)}}),this.gridBody.on("scroll",function(){c.editObj&&c._destroyFormEle()})},_resizeEventBind:function(){var a=this.options,b=this;(a.resizeheight||a.resizewidth)&&f(window).on("resize",function(){b.resize()})},resize:function(){var a=this.options,b=!1;try{var c=a.resizeheight();"number"==typeof c&&c>0&&this._setHeight(c)}catch(d){}try{var e=a.resizewidth();"number"==typeof e&&e>0&&(b=this.setWidth(e))}catch(d){}b&&this._setAutoHeight()},_setStyleWidth:function(){this.gridContainer.css("width",this.gridWidth),this.el.css("width",this.tableWidth),this.gridHeadTable.css("width",this.tableWidth)},_setStyleHeight:function(){this.gridContainer.css("height",this.gridHeight),this.gridHead.css("height",this.theadHeight),
this.gridOverlay.css("height",this.theadHeight),this.gridBody.css("height",this.boxHeight)},_loading:function(a){this.options.loadtip&&(this.loading[a](),this.unRender&&"hide"===a&&this.gridContainer.find(".eg-loading-bg").removeClass("eg-loading-bg-over"))},_createPropertys:function(){this.__getTagsPropertys(),this._initEditType(),this.__initColWidth()},_createContent:function(){this.__renderHead(),this.__renderBody(),this._setColWidthStyle(),this.__packageTds(),this._colHidden(!0),this.ittab._init(this);var a=this.options;a.colhidden&&this.hideCol._init(this),a.colmove&&0===this.theadMap.length&&this.moveCol._init(this)},__getTagsPropertys:function(){var a,b=this.domTh,c=this.options,d=this.colSize,e=this.renderStyle,g=this.bindName,h=this.sort=[],i=this.theadText,j=this.colWidth,k=this.colRender,l=this.fixedFnClick,m=this.colHidden,n=this.disabled;for(a=0;a<d;a+=1){var o=b[a];j.push(o.style.width||o.getAttribute("width")||""),m[a]="true"===o.getAttribute("hide")||"none"===f(o).css("display"),n[a]="true"===o.getAttribute("disabled"),o.removeAttribute("disabled");var p=o.getAttribute("renderStyle")||"",q=p.replace(/padding.+?(;|$)/,"").replace(/display\s*?:\s*?none\s*?(;|$)/,"")+";";e.push(q);var r=o.getAttribute("bindName")||"";g[a]=r,isNaN(this.numCol)&&r.length&&!isNaN(r-0)&&(this.numCol=a,g[a]=r-0,r=""),""===r?h[a]=!1:h[a]="true"===o.getAttribute("sort")||!1,i.push(o.innerHTML);var s=o.getAttribute("format"),t=c.colrender,u=o.getAttribute("render");if(k[a]=[],null!==s&&(/money/.test(s)?k[a][1]={format:Number(s.split("-")[1]||2),callback:this.formatFn.money}:/(dd|MM|yy)/i.test(s)&&(k[a][1]={format:s,callback:this.formatFn.date})),"function"==typeof t&&(k[a][0]={render:"colrenderFn",callback:t}),"string"==typeof u)if(new RegExp(u).test("a;button;image")){var v=o.getAttribute("options");if(null!==v)if(/{/.test(v))try{v=JSON.parse(v)}catch(w){v=new Function("return "+v+";")()}finally{"object"!=typeof v&&(v=void 0)}else v=window[v];if(v){var x=v.click;x="string"==typeof x?window[x]:x,"function"==typeof x?v.click=l.push(x)-1:v.click="",k[a][0]={render:"fiexdFn",method:u,options:v}}}else{var y=window[u];if(y){var z={format:s||void 0,render:y,renderStyle:p,text:i[a]};k[a][0]={render:"renderFn",colJson:z,callback:y}}}}var A=c.selectrows;"multi"!==A&&"single"!==A||(g[0]=-1)},__initColWidth:function(){for(var a=this.gridWidth,b=this.tableWidth||a,c=this.colWidth,d=this.colWidthBackup,e=0,g=0,h=this.colSize,i=[],j=this.colSize;j--;){var k=c[j];d[j]=-1,""===k?(k=0,c[j]=200,i.push(j)):/%/.test(k)?(k=Math.round(b*parseInt(k,10)/100),c[j]=k):(k=parseInt(k,10),c[j]=k),e+=c[j],g+=k}var l=i.length,m=b-g;if(l>0&&m>l){for(var n=Math.round(m/l),o=0;o<l;o++)c[i[o]]=n;c[i[o-1]]+=m-n*l,this.tableWidth=b}else if(isNaN(this.tableWidth)&&e>=a)this.tableWidth=e;else{this.tableWidth||(this.tableWidth=a);for(var p=[],q=0,r=0,s=h;s--;){var t=Math.round(c[s]*b/e);q+=t,p[s]=t,r=s}p[r]+=b-q,this.colWidth=p}this.initColWidth=f.extend([],this.colWidth)},__renderHead:function(){var a,b,c,d,e=this.options,g=this.domTh,h=this.theadMap,i=this.theadMap.length,j=this.domHeadCol,k=this.domFixed[0]=[],l=this.theadText,m=this.colSize,n=e.fixcolumnnumber,o=this.options.colhidden,p=this.sort,q=document.createElement("tr"),r=e.titleellipsis,s=this.bindName,t=this.editType;if(q.className="eg-width-norm",i){var u=document.createElement("th");u.className="eg-empty-th",q.appendChild(u);for(var v=i-1;v--;)for(var w=h[v],x=w.length;x--;){var y=w[x];y.removeAttribute("width"),y.style.width=""}}for(b=0;b<m;b+=1){var z=j[b]=document.createElement("th");q.appendChild(z);var A=g[b];b<n&&f(A).addClass("eg-fixed"),p[b]&&f(A).addClass("eg-sort"),A.removeAttribute("width"),A.style.width="";var B=l[b],C=['<div class="eg-fixed-d">','<span class="eg-fixed-s'];if(a=t[s[b]],a&&(f(A).addClass("eg-editable"),a.validate))for(a=a.validate,c=0,d=a.length;c<d;c++)if("required"===a[c].type){B="<i>*</i>"+B;break}C.push('">'),p[b]&&C.push('<b class="eg-sort-icon-desc cui-icon">&#xf0d7;</b><b class="eg-sort-icon-asc cui-icon">&#xf0d8;</b>'),C.push('<a class="eg-thead-text'),r&&C.push('" title="',f.trim(B.replace(/<.*?>/g,""))),C.push('">',B,"</a>"),C.push(),o&&C.push('<a class="eg-select cui-icon">&#xf0b0;</a>'),C.push('<em class="eg-ittab"></em>'),C.push("</span>"),b<n&&!r&&C.push(B),C.push("</div>"),A.innerHTML=C.join("")}for(this.gridHeadTable.html(this.elCache.find("thead").eq(0).prepend(q)),this.elCache.parent().remove(),delete this.elCache,c=0;c<n;c+=1)g[c].getElementsByTagName("div")[0].style.zIndex=n+1-c,k.push(g[c].getElementsByTagName("span")[0]);var D=f(g[0]);if("multi"===e.selectrows){D.find(".eg-select").eq(0).remove(),D.find(".eg-fixed-s").addClass("eg-no-move");var E=f(g[0]).find(".eg-thead-text").addClass("eg-all-checkbox");E.html(E.text()+"<b></b>"),this.gridAllCheck=E}"single"===e.selectrows&&(D.find(".eg-select").eq(0).remove(),D.find(".eg-fixed-s").addClass("eg-no-move"))},__renderBody:function(){var a=this.el,b=this.colSize,c=this.domBodyCol,d=document.createElement("tr");d.className="eg-width-norm";for(var e=0;e<b;e+=1){var f=c[e]=document.createElement("th");d.appendChild(f)}a.html("<thead></thead><tbody></tbody>"),a.find("thead").append(d),this.gridTbody=a.find("tbody").eq(0)},__packageTds:function(){var a=this.options,b=a.fixcolumnnumber,c=this.renderStyle,d=a.selectrows,e=this.selectrowsClass={no:"",multi:"eg-checkbox",single:"eg-radio"}[d],f=this.colSize,g="";this.writeStyle||(g="left:0px;");var h=[],i=0;if(""!==e){i+=1;var j=h[0]={};b>0?(j.html=['<div class="eg-fixed-d" style="z-index:',b+1,';"><span class="eg-fixed-s ',e,'" style="',g,c[0],'/**/">',"</span></div>"].join(""),j.style=""):(j.style=c[0],j.className=e)}for(var k=i;k<f;k+=1){var l=h[k]={};k<b?(l.html=['<div class="eg-fixed-d" style="z-index:',b+1-k,';"><span class="eg-fixed-s" style="',g,c[k],'/**/"><!---->',"</div>"].join(""),l.style=""):l.style=c[k]}this.tdsPackage=h},_setColWidth:function(a){for(var b=this.initColWidth,c=this.colHidden,d=this.tableWidth,e=this.colSize,f=0,g=e;g--;)c[g]===!1&&(f+=b[g]);for(var h=[],i=0,j=0,k=e;k--;)if(c[k]===!1){var l=Math.round(b[k]*d/f);i+=l,h[k]=l,j=k}else h[k]=0;h[j]+=d-i,this.colWidth=h,this._setColWidthStyle(),a&&this._isScrolling(!0)},_setColWidthStyle:function(a){var b,c=this.colWidth,d=this.domHeadCol,e=this.domBodyCol,f=this.colSize,g="";if("number"==typeof a)b=c[a]-1+"px",d[a].style.width=b,e[a].style.width=b;else for(;f--;)g=0===c[f]?0:c[f]-1+"px",d[f].style.width=g,e[f].style.width=g},_colHidden:function(a){for(var b=this.rowSize,c=this.domTh,d=this.domTd,e=this.tdsPackage,f=this.domHeadCol,g=this.domBodyCol,h=this.colHidden,i=this.colWidth,j=this.colWidthBackup,k=this.tableWidth,l=this.theadMap,m=this.extendTh,n=null,o=null,p=this.colSize;p--;)if(h[p]===!0){if(j[p]===-1||a){if(f[p].style.display="none",o=c[p],l.length)for(var q=l.length;q--;)m[q][p]||(n=l[q][p],n.colSpan>1?n.colSpan--:n.style.display="none");else o.style.display="none";for(var r=b;r--;)d[r][p].style.display="none";g[p].style.display="none",e[p].style+="display:none;",j[p]=i[p],k-=i[p],i[p]=0}}else if(j[p]!==-1){if(f[p].style.display="",o=c[p],l.length)for(var s=l.length;s--;)m[s][p]||(n=l[s][p],"none"===n.style.display?n.style.display="":n.colSpan+=1);else o.style.display="";for(var t=b;t--;)d[t][p].style.display="";g[p].style.display="",e[p].style=e[p].style.replace(/display.*?($|;)/g,""),i[p]=j[p],k+=j[p],j[p]=-1}this.options.adaptive?this.isIttab=!1:this.tableWidth=k,this._setLayout(),this.persistence&&!a&&this._triggerStatusChange()},_triggerStatusChange:function(){var a,b,c,d=this.options,e=this.query,f=this.colWidth,g=this.colWidthBackup,h=this.colHidden,i=this.colIndex,j=!d.adaptive,k=0===this.theadMap.length&&d.colmove,l=0,m=[];for(b=this.colSize;b--;)h[b]?(f[b]=g[b],m[b]=1):m[b]=0,l+=f[b];c={hide:h,sortName:e.sortName,sortType:e.sortType,overall:l},window.JSON&&JSON.stringify?(k&&(c.index=i),j&&(c.width=f),a=JSON.stringify(c)):a=["{",k?['"index":[',i.join(","),"],"].join(""):"",j?['"width":[',f.join(","),"],"].join(""):"",'"hide":[',m.join(","),"],",'"sortName":["',e.sortName.join('","'),'"],','"sortType":["',e.sortType.join('","'),'"],','"overall":',l,"}"].join(""),this.options.onstatuschange(a)},_isScrolling:function(a){var b=this.el,c=this.gridWidth+2,d=this.tableWidth,e=this.boxHeight,f=b.height(),g=this.gridScroll;this.options.adaptive&&!this.isIttab?(e<f?d=this.tableWidth=c-17:(this.tableWidth=c,d=c+1),b.css("width",d),this.gridHeadTable.css("width",d),g.css("left","-999999px"),a||(this._setColWidth(!0),this._setLayout(!0))):(e<f&&c>=d+17&&(this.gridTableHide.css("marginBottom",0),g.css({left:"-999999px",width:c-17})),c<d&&e>=f+17&&(g.css({width:c,left:0,bottom:""}),g.css("bottom",0),this.gridTableHide.css("marginBottom",17)),(c<d+17&&e<f||c<d&&e<f+17)&&(g.css({width:c-17,left:0,bottom:""}),g.css("bottom",0),this.gridTableHide.css("marginBottom",17)),e>=f&&c>=d&&(this.gridTableHide.css("marginBottom",0),g.css({left:"-999999px",width:c}))),g.find("div").eq(0).css("width",d),clearTimeout(this.sc),this.sc=setTimeout(function(){g.scroll()},10)},_setAutoHeight:function(){var a,b;if(this.autoHeight){a=this.gridTableBox,b=28;var c=parseInt(a.css("marginBottom"),10)||1,d=Math.max(a.height()||this.rowSize*b,50);this._setHeight(d+c+this.theadHeight+(this.options.pagination&&this.rowSize?41:0)+2)}},_setLayout:function(a){this.editObj&&this._destroyFormEle(),this._setStyleWidth(),!this.options.fixcolumnnumber&&this.options.titleellipsis||this._setTheadHeight(),this._setStyleHeight(),a||this._isScrolling(),this._setAutoHeight()},_setTheadHeight:function(){this.gridHead.css("height","auto");var a=this.theadHeight=this.gridHead.height(),b=this.domFixed[0],c=this.isQm;this.boxHeight=this.gridHeight-this.paginationHeight-a-1,this.gridOverlay.css("height",a);for(var d=b.length;d--;){var e=b[d],g=f(e).parent(),h=parseInt(g.parent().height(),10),i=parseInt((h-(g.height()||21))/2,10);i=i<0?0:i,e.style.paddingTop=i+"px",e.style.height=h-(c?0:i+1)+"px"}},setConfig:function(a){this.persistence&&this.unRender&&this._setPersistence(a),this.options.datasource(this,this.getQuery())},setDatasource:function(a,b,c){this.editObj&&this._destroyFormEle(),this.persistence&&this.unRender&&"string"==typeof c&&this._setPersistence(c),a=a||[],b=b||0,this.rowSize=a.length,this.data=f.extend(!0,[],a),this.options.pagination&&(this.totalSize=b,this.unRender?this.__createPagination():this._changepages()),this._isEmpty(),this._initProperty(),this._renderTbody(NaN,NaN),this.autoHeight&&"function"==typeof this.options.resizewidth?this.resize():this._setLayout(),this._loading("hide"),this._loadCompleteCallBack(),this.__setSortStyle(),delete this.unRender},_setPersistence:function(a){var b,c,d,e,g,h,i,j=this.options,k=this.colSize,l=this.bindName,m=this.editType;if("string"==typeof a){try{b=f.parseJSON(a)}catch(n){}if(b){if(b.overall&&(this.tableWidth=b.overall,this.gridHeadTable.css("width",this.tableWidth)),c=b.index,0===this.theadMap.length&&j.colmove&&"object"==typeof c&&k===c.length&&(this.colIndex=c,this._sortPropertys(c)),this._createPropertys(),d=b.sortName,e=b.sortType,"array"===f.type(d)&&"array"===f.type(e)&&this.setQuery({sortName:d,sortType:e}),g=b.hide,"object"==typeof g&&k===g.length){for(i=0;i<k;i++)m[l[i]]?g[i]=!1:g[i]=!!g[i];this.colHidden=g}h=b.width,j.adaptive||"object"!=typeof h||k!==h.length||(this.colWidth=h)}else this._createPropertys()}else this._createPropertys();this._createContent()},_sortPropertys:function(a){var b,c,d,e,f=this.colSize;for(c=this.domTh,d=[],b=c[0].parentNode,e=0;e<f;e++)d[e]=c[a[e]],b.appendChild(d[e]);this.domTh=d},_isEmpty:function(){var a=this.options,b=this.rowSize;if(0===b){this.gridEmpty.show(),this.gridTfoot.hide(),this.paginationHeight=0;var c=this;this.gridTableBoxTimer=setTimeout(function(){c.gridTableBox.hide()},10)}else this.gridEmpty.hide(),this.gridTableBox.show(),clearTimeout(this.gridTableBoxTimer),a.pagination&&(this.gridTfoot.show(),this.paginationHeight=41);this.boxHeight=this.gridHeight-this.paginationHeight-this.theadHeight},_initProperty:function(){var a=this;setTimeout(function(){a.gridBody[0].scrollTop=0},1),this.gridTableBox.removeAttr("style"),this.heightLight=[],this.domTr=[],this.domTd=[],this.domFixed.length=1,this.multiChecked=[],this.multiCheckedNum=0,this.singleChecked=NaN,this.disabledIndex=[],this.odd=!1,this.renderComplete=!1,this.gridAllCheck&&this.gridAllCheck.removeClass("eg-all-checkbox-checked"),this.gridTbody.html(""),this.editObj=null,this.changeEditData={insertData:{},updateData:{},deleteData:[]},this.insertId=0,this.validateState={insert:{},update:{}},this.isChanged=!1,this.dataBackup={}},loadData:function(){this._loading("show"),this.options.datasource(this,this.getQuery())},_addData:function(a,b){"object"===f.type(a)&&(a=[a]);var c=this.options,d=this.disabledIndex,e=a.length;if(0!==e){if(a=f.extend(!0,[],a),this.unRender)return void this.setDatasource(a);var g=c.selectrows;"number"==typeof b&&b<this.rowSize?(this._spliceArray(this.data,b,a),c.primarykey&&d.length&&this._spliceArray(d,b,new Array(e)),"multi"===g?this._spliceArray(this.multiChecked,b,new Array(e)):"single"===g&&b<this.singleChecked&&(this.singleChecked+=e)):this.data=this.data.concat(a),this.rowSize+=e,this._isEmpty(),this._renderTbody(e,b),this.paginationObj&&this._changepages(),this.autoHeight&&"function"==typeof c.resizewidth?this.resize():this._setLayout()}},__createPagination:function(){var a=this.options,b=this.query;if(a.pagination){var c=this;window.cui(this.gridTfoot).pagination({count:this.totalSize,pagesize:b.pageSize,pageno:b.pageNo,pagesize_list:a.pagesize_list,tpls:{pagination:a.pagination_model},cls:a.pagination_model,on_page_change:function(a,d){var e=f.extend({},b);b.pageNo=a,b.pageSize=d;var g=c.submit();return"fail"===g?(b.pageNo=e.pageNo,b.pageSize=e.pageSize,!1):("noChange"===g&&c.loadData(),void c._changepages())}}),this.paginationObj=window.cui(this.gridTfoot)}},_changepages:function(){var a=this.query;this.paginationObj.setInitData({count:this.totalSize,pagesize:a.pageSize,pageno:a.pageNo}),this.paginationObj.reDraw()},_spliceArray:function(a,b,c){return Array.prototype.splice.apply(a,[b,0].concat(c)),a},_renderTbody:function(a,b){var c=this.data,d=this.rowSize,e=d-a,f=this.gridTbody[0];if(0===d)return void(this.renderComplete=!0);if(this.renderComplete=!1,isNaN(a))this._appendRows(0,d);else{if(this.gridAllCheck&&this.gridAllCheck.removeClass("eg-all-checkbox-checked"),"number"==typeof b&&b<e){for(var g=this._dataToDom(c,b,b+a),h=g.domTr,i=this.domTr,j=i[b],k=b;k<e;k+=1)i[k].removeAttribute("index");this._spliceArray(this.domTr,b,h),this._spliceArray(this.domTd,b,g.domTd),this._spliceArray(this.domFixed,b+1,g.domFixed);for(var l=0;l<a;l+=1)f.insertBefore(h[l],j);this._setOddEven(b),this._setNum(b)}else this._appendRows(e,d);this._setAutoHeight()}},_loadCompleteCallBack:function(){var a=this.options.loadcomplete_callback;"function"==typeof a&&a.call(this,this)},__setSortStyle:function(){var a,b,c,d,e=this.query,g=e.sortType,h=e.sortName,i=h.length,j=this.bindName,k=this.domTh,l={DESC:"desc",ASC:"asc"};a:for(b=this.colSize;b--;)for(d=j[b],c=f(k[b]),c.find("span > b").hide(),a=0;a<i;a++)if(h[a]===d){c.find(".eg-sort-icon-"+l[g[a]].toLocaleLowerCase()).show();continue a}},_dataToDom:function(b,c,d,e){for(var g=this.options,h=this.oddEvenClass,i=g.oddevenrow,j=g.ellipsis,k=this.colSize,l=this.domTh,m=this.tdsPackage,n=this.bindName,o=g.fixcolumnnumber,p=this.numCol,q=this.colRender,r=g.rowstylerender,s=g.colstylerender,t="function"==typeof r,u="function"==typeof s,v=this.renderMethod,w=this.heightLight,x=""!==this.selectrowsClass?1:0,y=this.odd,z=g.primarykey,A=this.createDomBox,B=["<table>"],C=c;C<d;C+=1){B.push('<tr class="'),i&&(y&&B.push(h),y=!y),w[C]&&B.push(" eg-highlight"),B.push('"');var D=b[C];if(D.hasOwnProperty(z)&&(B.push(' pkey="'),B.push(String(D[z])),B.push('"')),t){var E=r(D);"string"==typeof E&&B.push(' style="',E,'"')}if(B.push(">"),1===x){var F=m[0];B.push('<td class="eg-select-input '),o>0?(B.push("eg-fixed"),B.push('" style="',F.style,'">',F.html,"</td>")):(B.push(F.className),B.push('" style="',F.style,'"></td>'))}for(var G="",H="",I="",J="",K="",L=null,M=null,N=null,O=null,P=x;P<o;P+=1){I=n[P],J=p===P?C+I:I?D[I]:"";var Q="",R="";if(L=q[P],M=L[0],N=L[1],N&&(J=N.callback(J,N.format)||J),M)switch(K=M.render,R=M.method,K){case"colrenderFn":J=M.callback(D,I)||J;break;case"renderFn":O=M.colJson,O.el=l[P],O.bindName=I,J=M.callback.call(this,D,"undefined"==typeof e?C:e,O)||J;break;case"fiexdFn":J=v[R](D,M.options,J)||J}Q="button"===R||j?[J,"</span>"].join(""):[J,"</span>",J].join(""),G=m[P];var S=G.html.replace("<!---->",Q);B.push('<td class="eg-fixed" style="',G.style,'">'),u&&(H=s(D,I),"string"==typeof H&&(S=S.replace("/**/",H))),B.push(S,"</td>")}for(;P<k;P+=1){if(I=n[P],G=m[P],J=p===P?C+I:I?D[I]:"",L=q[P],M=L[0],N=L[1],N&&(J=N.callback(J,N.format)||J),M)switch(K=M.render){case"colrenderFn":J=M.callback(D,I)||J;break;case"renderFn":O=M.colJson,O.el=l[P],O.bindName=I,J=M.callback.call(this,D,"undefined"==typeof e?C:e,O)||J;break;case"fiexdFn":J=v[M.method](D,M.options,J)||J}var T=G.style;u&&(H=s(D,I),"string"==typeof H&&(T+=";"+H));var U=this.options.edittype[I]||{};if(U.uitype&&"input"===U.uitype.toLowerCase()&&null!==J&&void 0!==J){var V;switch(J+="",U.mask){case"Int":V=f.extend({prefix:"",separator:","},U.maskoptions),J=a.Number.money(J,0,V);break;case"Dec":V=f.extend({prefix:"",separator:",",precision:null},U.maskoptions),J=a.Number.money(J,V.precision,V);break;case"Money":V=f.extend({prefix:"",separator:",",precision:2},U.maskoptions),J=a.Number.money(J,V.precision,V)}}B.push('<td style="',T,'">',J,"</td>")}B.push("</tr>")}this.odd=y,B.push("</table>"),A.innerHTML=B.join("");for(var W=[],X=[],Y=[],Z=A.getElementsByTagName("table")[0],$=0,_=d-c;$<_;$+=1){var aa=Z.rows[$];W.push(aa);for(var ba=[],ca=[],da=0;da<k;da+=1){var ea=aa.cells[da];ba.push(ea),da<o&&ca.push(ea.getElementsByTagName("span")[0])}X.push(ba),Y.push(ca)}return{domTd:X,domTr:W,domFixed:Y}},_appendRows:function(a,b){var c=this._dataToDom(this.data,a,b);this.domTr=this.domTr.concat(c.domTr),this.domTd=this.domTd.concat(c.domTd),this.domFixed=this.domFixed.concat(c.domFixed);for(var d=this.domTr,e=this.gridTbody[0],f=a;f<b;f+=1)e.appendChild(d[f]);this.renderComplete=!0},_setOddEven:function(a){var b=this.options;if(b.oddevenrow)for(var c=this.domTr,d=this.rowSize,e=this.oddEvenClass,g=this.odd=a%2===0,h=a;h<d;h+=1)g?f(c[h]).removeClass(e):f(c[h]).addClass(e),g=!g},_setNum:function(a){if(!isNaN(this.numCol)){var b=this.domTd,c=this.domFixed,d=this.numCol,e=this.bindName[d],f=a,g=this.rowSize;if(this.options.fixcolumnnumber>d)for(;f<g;f+=1){var h=c[f+1][d],i=f+e;h.innerHTML=i,h.nextSibling&&(h.nextSibling.nodeValue=i)}else for(;f<g;f+=1)b[f][d].innerHTML=f+e}},hideCols:function(a){if("object"===f.type(a)){for(var b,c,d=this.colHidden,e=this.colSize,g=this.bindName,h=this.editType,i=0;i<e;i+=1)b=g[i],c=a[b],h[b]?d[i]=!1:"boolean"==typeof c&&(d[i]=c);this._colHidden(!1)}},getQuery:function(){var a=f.extend(!0,{},this.query),b=this.customQuery;return b?(b.pageSize=a.pageSize,b.pageNo=a.pageNo,b.sortName=f.extend([],a.sortName),b.sortType=f.extend([],a.sortType),b):a},setQuery:function(a){"object"==typeof a&&(this.customQuery=a),a=a||this.backupQuery;var b=this.options.sortstyle,c=this.query;"number"==typeof a.pageSize&&(c.pageSize=a.pageSize),"number"==typeof a.pageNo&&(c.pageNo=a.pageNo),"array"===f.type(a.sortName)&&(c.sortName=f.extend([],a.sortName),c.sortName.length>b&&(c.sortName.length=b)),"array"===f.type(a.sortType)&&(c.sortType=f.extend([],a.sortType),c.sortType.length>b&&(c.sortType.length=b)),this._setPageSize(),this._setSortTypeObj()},_setHeight:function(a){return"number"==typeof a&&a-2!==this.gridHeight&&(a-=2,this.boxHeight-=this.gridHeight-a,this.gridHeight=a,this._setLayout(),this.options.colhidden&&this.hideCol.hideCol&&this.hideCol.hideCol.blur(),!0)},setHeight:function(a){this.autoHeight=!this._setHeight(a)},setWidth:function(a){if("number"!=typeof a||a-2===this.gridWidth)return!0;var b=this.ittab;b&&b.ittabActive||(a-=2,this.options.adaptive&&(this.tableWidth=a-17,this.isIttab=!1),this.gridWidth=a,this._setLayout(),this.options.colhidden&&this.hideCol.hideCol&&this.hideCol.hideCol.blur())},setHighLight:function(a,b){var c=this._pkToIndex(a,!1)[0];void 0!==c&&(b!==!1?f(this.domTr[c]).addClass("eg-highlight"):f(this.domTr[c]).removeClass("eg-highlight"),this.heightLight[c]=b!==!1)},_selectRowsByIndex:function(a,b){b=b!==!1;var c,d,e=this.options,f=e.selectrows,g=this.data,h=[],i=this.disabledIndex;if("no"===f||a>=this.rowSize)return[];if(b!==!1&&(b=!0),"number"==typeof a&&(a=[a]),"single"===f)c=a[0],c>-1&&!i[c]&&(this._selectRows(c,b),h.push(g[c]));else for(var j=0,k=a.length;j<k;j+=1)d=a[j],i[j]||(this._selectRows(d,b),h.push(g[d]));return h},_pkToIndex:function(a,b){var c=this.data,d=this.rowSize,e=this.options.primarykey;if(void 0===a)return[];"array"!==f.type(a)&&(a=[a]);for(var g=a.length,h=[],i=0;i<g;i+=1){for(var j=a[i]+"",k=!1,l=d;l--;)if(c[l][e]+""===j){h.push(l),k=!0;break}!k&&b&&h.push(-1)}return h},selectRowsByPK:function(a,b){var c=this.options;return"array string number".indexOf(f.type(a))!==-1&&"no"!==c.selectrows&&this.rowSize?this._selectRowsByIndex(this._pkToIndex(a,!0),b):[]},selectRowsByIndex:function(a,b){return this._selectRowsByIndex(a,b)},disableRows:function(a,b){this.editObj&&this._destroyFormEle();var c,d,e,g,h,i,j=this.options,k=f.type(a),l=this.disabledIndex;if("array string number".indexOf(k)!==-1&&"no"!==j.selectrows&&this.rowSize)for(b=void 0===b||b,b&&this.selectRowsByPK(a,!1),c=this._pkToIndex(a,!1),h=this.domTr,e=0,g=c.length;e<g;e++)d=c[e],i=f(h[d]),b?i.addClass("eg-disable-row"):i.removeClass("eg-disable-row"),l[d]=b},_removeRow:function(a){var b=this.data,c=b[a];return this.data.splice(a,1),f(this.domTr[a]).remove(),this.domTr.splice(a,1),this.domTd.splice(a,1),this.multiChecked.splice(a,1),this.disabledIndex.splice(a,1),this.singleChecked>a&&this.singleChecked--,this.domFixed.splice(a+1,1),c},_removeData:function(a){if("number"==typeof a||"array"===f.type(a)){"number"==typeof a&&(a=[a]),a.sort(function(a,b){return a-b});for(var b=a.length,c=[],d=this.singleChecked,e=this.multiChecked,g=this.options,h=g.selectrows,i=0;i<b;i+=1){var j=a[i]-i,k=this.rowSize;if(isNaN(j)||j>=k){a[i]=0;break}this.rowSize=k-1,"multi"===h?e[j]===!0&&this.multiCheckedNum--:"single"===h&&d===j&&(this.singleChecked=NaN);var l=this._removeRow(j);l&&c.push(l)}var m=this.rowSize;if(m<=0)this.query.pageNo>1&&(this.query.pageNo-=1),this.rowSize=0,this._isEmpty();else{"multi"===g.selectrows&&(this.multiCheckedNum===m?this.gridAllCheck.addClass("eg-all-checkbox-checked"):this.gridAllCheck.removeClass("eg-all-checkbox-checked"));for(var n=this.domTr,o=this.rowSize;o--;)n[o].removeAttribute("index");var p=a[0]-0;this._setOddEven(p),this._setNum(p)}this.autoHeight&&"function"==typeof this.options.resizewidth?this.resize():this._setLayout()}},_changeValue:function(a,b,c){if("object"===f.type(a)){var d,e,g,h,i,j,k,l=this.options,m=l.primarykey,n=a[m],o=this.bindName,p=l.fixcolumnnumber;if(void 0===b&&(b=this._pkToIndex(n,!1)[0]),!(b<0||b>=this.rowSize)){h=this.domTd[b],i=f.extend({},this.data[b]);for(var q in a)d=a[q],i.hasOwnProperty(q)&&void 0!==d&&d!==i[q]&&("object"===f.type(d)?(i[q]=d.value,a[q]=d.text):i[q]=d);a=f.extend({},i,a),e=this._dataToDom([a],0,1),g=e.domTd[0],this.odd=!this.odd;for(var q=this.colSize;q--;)if(j=o[q],this.data[j]!==a[j])if(k=f(h[q]),k.removeAttr("title"),q<p){if("number"!=typeof j){var r=k.find(".eg-fixed-s")[0],s=f(g[q]).find(".eg-fixed-s")[0].innerHTML;r.innerHTML=s,r.nextSibling&&(r.nextSibling.nodeValue=s)}}else"number"!=typeof j&&k.html(g[q].innerHTML);this.data[b]=a}}},getData:function(){return this.editObj&&this._destroyFormEle(),f.extend(!0,[],this.data)},getSelectedRowData:function(){this.editObj&&this._destroyFormEle();var a=this.options.selectrows;if("no"===a)return[];var b=this.data;if("single"===a)return isNaN(this.singleChecked)?[]:[b[this.singleChecked]];if(this.multiCheckedNum===this.rowSize)return this.data;for(var c=this.multiChecked,d=this.rowSize,e=[],f=0;f<d;f+=1)c[f]&&e.push(b[f]);return e},getSelectedPrimaryKey:function(){this.editObj&&this._destroyFormEle();var a,b=this.options,c=b.selectrows,d=b.primarykey,e=this.getSelectedRowData(),f=e.length;if("no"===c||!f)return[];for(var g=[],h=0;h<f;h+=1)a=e[h][d],void 0!==a&&g.push(e[h][d]);return g},getSelectedIndex:function(){this.editObj&&this._destroyFormEle();var a=this.options.selectrows;if("no"===a)return[];if("single"===a)return[this.singleChecked];for(var b=this.multiChecked,c=this.rowSize,d=[],e=0;e<c;e+=1)b[e]&&d.push(e);return d},getRowsDataByPK:function(a){this.editObj&&this._destroyFormEle();var b=this.options.primarykey,c=this.data;"array"!==f.type(a)&&(a=[a]);for(var d=a.length,e=[],g=0;g<d;g+=1)for(var h=a[g],i=this.rowSize;i--;)if(c[i][b]===h){e.push(c[i]);break}return e},getRowsDataByIndex:function(a){this.editObj&&this._destroyFormEle();var b=this.data;if("number"==typeof a)return[b[a]];if("array"===f.type(a)){for(var c=a.length,d=[],e=0;e<c;e+=1){var g=b[a[e]];g&&d.push(g)}return d}},_switchCol:function(a,b){var c=this.domHeadCol,d=this.domBodyCol,e=this.domTd,g=this.domTh,h=this.domFixed,i=this.domTr,j=this.options.fixcolumnnumber,k=this.numCol;this._switchArrayValue(this.bindName,a,b),this._switchArrayValue(this.colIndex,a,b),this._switchArrayValue(this.theadText,a,b),this._switchArrayValue(this.renderStyle,a,b),this._switchArrayValue(this.colRender,a,b),this._switchArrayValue(this.colWidth,a,b),this._switchArrayValue(this.initColWidth,a,b),this._switchArrayValue(this.colWidthBackup,a,b),this._switchArrayValue(this.colHidden,a,b),this._switchArrayValue(this.tdsPackage,a,b),isNaN(k)||(a===k?this.numCol=b-(a>b?0:1):a>k&&b<=k?this.numCol=k+1:a<k&&b>k&&(this.numCol=k-1));var l=null,m=this.rowSize,n=this.hideCol,o=n.domA,p=n.gridHidecolList;if(b===this.colSize){var q=f(g[a]);q.appendTo(q.parent());var r=f(d[a]);r.appendTo(r.parent());var s=f(c[a]);for(s.appendTo(s.parent());m--;)l=e[m],i[m].appendChild(l[a]),this._switchArrayValue(l,a,b);p&&(""!==this.selectrowsClass?p.appendChild(o[a-1]):p.appendChild(o[a]))}else{for(f(g[a]).insertBefore(g[b]),f(d[a]).insertBefore(d[b]),f(c[a]).insertBefore(c[b]);m--;)l=e[m],i[m].insertBefore(l[a],l[b]),this._switchArrayValue(l,a,b);p&&(""!==this.selectrowsClass?p.insertBefore(o[a-1],o[b-1]):p.insertBefore(o[a],o[b]))}if(this._switchArrayValue(g,a,b),a<j||b<j){var t=Math.min(a,b),u=Math.max(a,b);j++;for(var v=0,w=this.rowSize+1;v<w;v++){this._switchArrayValue(h[v],a,b);for(var x=t;x<=u;x++)f(h[v][x]).parent().css("zIndex",j-x)}}this._switchArrayValue(d,a,b),this._switchArrayValue(c,a,b),this.persistence&&this._triggerStatusChange()},_switchArrayValue:function(a,b,c){a.length<c&&(a[c]=void 0),b>c?a.splice(c,0,a.splice(b,1)[0]):a.splice(c-1,0,a.splice(b,1)[0])},ittab:{ittabActive:!1,_init:function(a){var b=this,c=a.gridOverlay,d=a.gridLine,e=[],g=0,h=0,i=!0,j=NaN,k=a.options.adaptive;a.gridHeadTable.find(".eg-ittab").show(),a.gridHeadTable.on("mousedown",function(b){var k=b.target;if(h=0,"eg-ittab"===k.className){e=a.colWidth,j=a._thIndex(f(k).parents("th")[0]),c.show().css("cursor","col-resize");var l=c.offset().left;g=b.pageX-l,d.show().css("left",g),i=!1,c.off("mousemove").on("mousemove",function(a){return a.stopPropagation(),h=a.pageX-l,e[j]+h-g<24&&(h=24+g-e[j]),d.css("left",h),!1})}return!1}),c.on("mouseup mouseout",function(){if(!i&&!isNaN(j)&&(i=!0,f(this).hide(),d.hide(),0!==h)){var c=h-g;a.isIttab=!0,a.colWidth[j]=e[j]+c,a.tableWidth=a.tableWidth+c,b.ittabActive=!0,a._setColWidthStyle(k?void 0:j),a.persistence&&a._triggerStatusChange(),a._setLayout(),b.ittabActive=!1,g=h=0,j=NaN}})}},hideCol:{_init:function(a){var b,c=this.hideCol=document.createElement("div"),d=a.theadHeight,e=0;c.className="eg-hidecol",c.style.top=d+"px",c.tabIndex="1",a.gridContainer.append(c),c=f(c);var g=a.colSize,h=a.theadText,i=a.bindName,j=a.editType||{},k="",l=a.disabled,m=0;""!==a.selectrowsClass&&(m+=1);for(var n=['<div class="eg-hidecol-list" hidefocus="true" >'];m<g;m+=1)k=f.trim(h[m].replace(/<.*?>/g,"")),j[i[m]]||l[m]?(b=' class="eg-hidecol-hide" banHide="true">',e++):b=">",n.push('<a href="javascript:;" hidefocus="true" title=',k,b,k,"</a>");n.push("</div>",'<div class="eg-hidecol-button">','<a href="javascript:;" hidefocus="true" class="cui-button blue-button eg-hidecol-confirm">\u786e\u5b9a</a>','<a href="javascript:;" hidefocus="true" class="cui-button red-button eg-hidecol-cancel">\u53d6\u6d88</a>',"</div>"),c.html(n.join("")),this.gridHidecolList=c.find(".eg-hidecol-list")[0],this.domA=this.gridHidecolList.getElementsByTagName("a"),this.bindEvent(a,c),this.ban=e},bindEvent:function(a,b){function c(){for(var a=l;a<h;a+=1)o[a]?f(n[a-l]).addClass("eg-hidecol-nochecked"):f(n[a-l]).removeClass("eg-hidecol-nochecked")}var d,e,g=this,h=a.colSize,i=a.gridBox,j=null,k=!1,l=0,m=-1,n=this.domA;document.createElement("span");""!==a.selectrowsClass&&(l+=1),a.gridHeadTable.on("click",function(o){var p=f(o.target);if(d=i.offset().left,e=d+a.gridWidth/2,p.hasClass("eg-select")){j&&b.blur(),j=p.parents("th").addClass("eg-thead-select");var q=p.offset().left,r=q-d+2;q>e&&(r-=126);var s=Math.max(a.boxHeight+a.paginationHeight-50,60);28*(h-g.ban)>s?b.children(".eg-hidecol-list").css("height",s):b.children(".eg-hidecol-list").css("height",""),b.css({left:r,top:a.theadHeight}).show().focus().attr("hidefocus","true"),c();var t=a._thIndex(j[0])-l;f(n).removeClass("eg-hidecol-disabled"),f(n[t]).addClass("eg-hidecol-disabled"),m=n[t].getAttribute("banHide")?-1:t,k=!1}else f(b).blur()}),b.on("blur",function(){return k?void b.focus():(j&&j.removeClass("eg-thead-select"),void f(b).hide())}),b.on("mouseover",function(){k=!0}),b.on("mouseout",function(){k=!1});var o=a.colHidden;b.on("click",function(b){var d=f(b.target);if(d.hasClass("eg-hidecol-confirm")){for(var e=l;e<h;e+=1)o[e]=f(n[e-l]).hasClass("eg-hidecol-nochecked");return k=!1,a._colHidden(!1),f(this).blur(),!1}return d.hasClass("eg-hidecol-cancel")?(c(),k=!1,f(this).blur(),!1):"A"===d.prop("tagName")?(d.hasClass("eg-hidecol-disabled")||d.toggleClass("eg-hidecol-nochecked"),!1):void this.focus()}),setTimeout(c,100)}},moveCol:{_init:function(a){var b=f("<div></div>"),c=f("<div></div>"),d=a.gridHeadTable.addClass("eg-col-move");b.addClass("eg-col-move-insert"),c.addClass("eg-col-move-tag"),a.gridHead.append(c).append(b);var e=a.options,g=a.gridOverlay,h=e.fixcolumnnumber,i=a.selectrowsClass,j=null,k=0,l=[],m=[],n=NaN,o=NaN,p=!1,q=!0;d.on("mousedown",function(r){var s=f(r.target);if(s.hasClass("eg-fixed-s")&&!s.hasClass("eg-no-move")){e.colhidden&&a.hideCol.hideCol.blur(),q=!1,j=a.colHidden;var t=a.colWidth,u=a.colSize,v=a.domTh,w=a.domFixed[0],x=Math.round(d.offset().left),y=a.gridScroll[0].scrollLeft,z=0,A=a.theadHeight,B=s.parents("th");n=a._thIndex(B[0]),k=0,l=[],m=[];var C=0,D=null,E=0,F=0;if(n<h){for(p=!0;C<h;C+=1)D=t[C],k+=D,E=Math.round(f(w[C]).offset().left)-x-y,j[C]===!0&&(E=-100),l.push(E),m.push(E),j[C]||(m[C]=E+D/2);l.push(k-y),m.push(k-y-1),i&&(l[0]=m[0]=-100),F=l[n]-1}else{for(p=!1,C=h;C<u;C+=1)D=t[C],E=Math.round(f(v[C]).offset().left)-x-y,j[C]===!0&&(E=-100),l.push(E),m.push(E),j[C]||(m[C-h]=E+D/2);l.push(a.tableWidth-y),m.push(a.tableWidth-y-1),0===h&&i&&(l[0]=m[0]=-100),F=l[n-h]-1}c.show().css({left:F,width:B.width(),height:A-1,lineHeight:A-1+"px"}).html(B.find(".eg-thead-text").eq(0).html()),b.show().css("height",A-5),g.show().css("cursor","move");var G=r.pageX;b.css("left",-1e3),g.off("mousemove").on("mousemove",function(a){a.stopPropagation(),z=a.pageX,c.css("left",F-G+z);for(var d=m.length,e=0;e<d;e+=1){var f=m[e];if(!(f<0)&&z<f){b.css("left",l[e]),o=p?e:e+h;break}}return!1})}}),g.on("mouseup",function(){if(!q&&(q=!0,g.hide(),b.hide(),c.hide(),!isNaN(o)&&!isNaN(n)&&o!==n&&o!==n+1)){if(n>o)return a._switchCol(n,o),void(o=n=NaN);for(var d=n+1;d<o;d+=1)if(!j[d]){a._switchCol(n,o),o=n=NaN;break}}}),g.on("mouseout",function(){
g.hide(),b.hide(),c.hide(),o=n=NaN})}},_initEditType:function(){var a,f,g,h,k,l,m,n=this.options,o=n.edittype,p=this.editType,q=this.bindName,r=this.colRender,s=this.editDict;for(h=0,k=this.colSize;h<k;h++)if(a=q[h],f=o[a],"string"==typeof a&&f)if(i.test(f.uitype)){if(g=f.uitype,g=g.charAt(0).toLowerCase()+g.slice(1),f.uitype=g,p[a]=f,j.test(g))switch(l=f.datasource,s[a]=l,r[h]=[{render:"renderFn",colJson:{bindName:a,editType:f},callback:b}],g){case"multiPullDown":r[h][0].callback=c;break;case"pullDown":"Multi"===f.mode&&(r[h][0].callback=c);break;case"checkboxGroup":r[h][0].callback=e,s[a]=f.checkbox_list;break;case"radioGroup":r[h][0].callback=d,s[a]=f.radio_list}void 0===m&&(m=h)}else"function"==typeof f.create&&"function"==typeof f.returnValue?(p[a]=f,delete f.uitype,void 0===m&&(m=h)):f.thrdui&&(p[a]=f,void 0===m&&(m=h));void 0!==m&&n.fixcolumnnumber>=m&&(n.fixcolumnnumber=m)},_createFormEle:function(a,b,c,d,e){var g,h=f("<div>").addClass("eg-edit-box"),i=b.uitype,j=this.data[c];g=null===j[d]||void 0===j[d]?"":j[d]+"",a.addClass("eg-editing").html(h),i&&!b.thrdui?(i=i.charAt(0).toLowerCase()+i.slice(1),"checkboxGroup"===i&&(g=g.split(";")),this.editObj={cuiObj:window.cui(h)[i](f.extend({width:"100%",name:Math.random()+"",value:g},b)),editTdObj:a,bindName:d,index:c,editOpts:b},this.editObj.cuiObj.editRowData=j,k.test(i)?h.find("input,textarea").select():e&&a.find(":text").eq(0).focus()):(b.thrdui?cap.Editor[i].create(h[0],j,b):b.create(h[0],j),this.editObj={cuiObj:null,editTdObj:a,bindName:d,index:c,editOpts:b})},_destroyFormEle:function(){var g,h,i,k,l,m,n,o,p,q,r,s,t,u,v=this.editObj,w=this.bindName,x=v.bindName,y=v.editTdObj,z=y.find(".eg-edit-box").eq(0),A=v.cuiObj,B=v.editOpts,C=B.validate,D=B.uitype,E=this.data[v.index],F=f.extend({},E);if(A){if(i="checkboxGroup"===D?A.getValueString(";"):A.getValue(),E[x]=i,"input"===D.toLowerCase()&&""!==i)switch(A.options.mask){case"Int":u=f.extend({prefix:"",separator:","},A.options.maskoptions),k=a.Number.money(i,0,u);break;case"Dec":u=f.extend({prefix:"",separator:",",precision:null},A.options.maskoptions),k=a.Number.money(i,u.precision,u);break;case"Money":u=f.extend({prefix:"",separator:",",precision:2},A.options.maskoptions),k=a.Number.money(i,u.precision,u)}if(j.test(D)){switch(D){case"singlePullDown":l="single";break;case"multiPullDown":l="multi";break;case"pullDown":l="Multi"===B.mode?"multi":"single";break;case"checkboxGroup":k=e(E,void 0,{bindName:x,editType:B});break;case"radioGroup":k=d(E,void 0,{bindName:x,editType:B})}"single"===l?(k=b(E,void 0,{bindName:x,editType:B}),A.$box.remove()):"multi"===l&&(k=c(E,void 0,{bindName:x,editType:B}),A.$box.remove())}A.destroy()}else if(i=B.thrdui?cap.Editor[D].returnValue(z[0],E,B):B.returnValue(z[0],F),"object"===f.type(i)&&(k=i.text,i=i.value),E[x]=B.thrdui?E[x]:i,z.remove(),void 0===i)return;if(y.html(k||i).removeClass("eg-editing"),this.editObj=null,(F[x]!==i||""===i)&&(!C||this._validate(x,E,C,y)))if(o=this.options.primarykey,p=F[o],r=this.dataBackup,void 0===p||r[p]||(r[p]=F),m=this.options.editafter,"function"==typeof m&&(n=m(f.extend({},E),x),"object"===f.type(n)&&(E=n,void 0===p?delete E[o]:E[o]=p,this._changeValue(E,void 0!==E[o]?void 0:v.index,x))),void 0===p)this.changeEditData.insertData[F.__insertId__]=E;else{for(s=r[p],h=y.closest("tr").find("td"),q=this.colSize;q--;)g=w[q],s[g]!==E[g]?(h.eq(q).addClass("eg-update"),t=!0):h.eq(q).removeClass("eg-update");t?this.changeEditData.updateData[p]=E:delete this.changeEditData.updateData[p]}},_validate:function(a,b,c,d){var e,g,h,i=c.length,j=b[this.options.primarykey],k=void 0!==j?this.validateState.update:this.validateState.insert,m=j||b.__insertId__;for(void 0===d.attr("tip")&&window.cui.tip(d,{onlyEl:!0}),d.attr("tip","").removeClass("eg-error"),e=0;e<i;e++)if(g=c[e].type,l[g]&&(h=l[g](b[a],f.extend({},{args:b},c[e].rule)),h!==!0))return k[m]=k[m]||{},k[m][a]=h,d.attr("tip",h).addClass("eg-error"),!1;return k[m]&&(delete k[m][a],void 0===this._isNullObj(k[m])&&delete k[m]),!0},insertRow:function(a,b){var c,d,e,g,h,i=this.editType,j=this.bindName,k=this.colSize,l=this.rowSize,m=this.insertId,n=[],o=0,p=0;if("object"===f.type(a)){for(e in i)p++,void 0===a[e]&&(a[e]="",o++),n[e]=!0;for(a.__insertId__=m+"",("number"!=typeof b||b>=l||b<0)&&(b=l),this._addData(a,b),d=this.domTr[b],e=0;e<k;e++)c=j[e],n[c]&&(g=f(d.cells[e]),h=i[c].validate,g.addClass("eg-insert"),h&&this._validate(c,a,h,g));this.insertId=m+1,o!==p&&(this.changeEditData.insertData[m]=this.data[b])}},_isNullObj:function(a){var b;for(b in a)break;if(void 0!==b)return[b,a[b]]},deleteRow:function(a){this.editObj&&this._destroyFormEle(),this.deleteRowByIndex(this._pkToIndex(a,!1))},deleteRowByIndex:function(a){this.editObj&&this._destroyFormEle();var b,c,d,e,g,h=this.data,i=this.options,j=this.changeEditData,k=i.deletebefore,l="function"==typeof k,m=i.deleteafter,n="function"==typeof m,o=i.primarykey,p=f.type(a);if("number"===p)a=[a];else if("array"!==p)return;for(b=a.length;b--;)c=a[b],"number"==typeof c&&(d=h[c],d&&(g=d[o],l&&void 0!==g&&k.call(this,d)===!1||(e=d.__insertId__,void 0!==e&&(delete j.insertData[e],delete this.validateState.insert[e]),void 0!==g&&(delete j.updateData[g],j.deleteData.push(d),delete this.validateState.update[g]),this._removeData(c),n&&m.call(this,d))))},deleteSelectRow:function(){this.editObj&&this._destroyFormEle(),this.deleteRowByIndex(this.getSelectedIndex())},getInsertedIndex:function(){var a,b=this.data,c=this.rowSize,d=[];for(a=0;a<c;a++)b[a].hasOwnProperty("__insertId__")&&d.push(a);return d},getChangeData:function(){this.editObj&&this._destroyFormEle();var a,b,c=this.changeEditData,d=c.insertData,e=c.updateData,g=c.deleteData,h=[],i=[],j=null;for(b in d)a=f.extend({},d[b]),delete a.__insertId__,h.push(a);void 0!==b?this.isChanged=!0:h=null;for(b in e)i.push(f.extend({},e[b]));return void 0!==b?this.isChanged=!0:i=null,g.length&&(this.isChanged=!0,j=f.extend(!0,[],g)),{insertData:h,updateData:i,deleteData:j}},getValidateResult:function(){this.editObj&&this._destroyFormEle();var a=[];return f.each(this.validateState,function(b,c){f.each(c,function(b,c){f.each(c,function(b,c){a.push({id:b,message:c,valid:!1})})})}),[a,[],0==a.length]},submit:function(){this.editObj&&this._destroyFormEle();var a,b,c,d,e,f,g,h,i,j,k=this.getChangeData();if(a=this.validateState.insert,b=this.validateState.update,c=this.bindName,f=this.theadText,g=this._isNullObj,h=g(a),i=-1,void 0!==h?i=this._insertIdToIndex(h[0]):(h=g(b),void 0!==h&&(i=this._pkToIndex(h[0],!0)[0])),i>-1)for(j=g(h[1]),d=0,e=this.colSize;d<e;d++)if(c[d]===j[0])return cui.alert(['\u7b2c"',i+1,'"\u884c\uff0c"',f[d],'" \u5217\uff1a',j[1]].join(""),null,{title:"\u63d0\u793a",opacity:.8}),"fail";return this.isChanged?(this.isSaveing=!0,this._loading("show"),this.options.submitdata(this,k),"success"):"noChange"},_insertIdToIndex:function(a){var b,c=this.data,d=this.rowSize;for(b=0;b<d;b++)if(c[b].__insertId__===a)return b;return-1},submitComplete:function(){this.isSaveing&&(this.isSaveing=!1,this._loading("hide"),this.loadData())},changeData:function(a,b,c,d){if(this.editObj&&this._destroyFormEle(),"object"===f.type(a)&&(c!==!0||"number"==typeof b)){this.editObj&&this._destroyFormEle();var e,g=this.options;if(c!==!0){var h=g.primarykey,i=a[h];if("undefined"!=typeof i){var j=this._pkToIndex(i,!1)[0];b=void 0===j?b:j}}if(!("number"!=typeof b||b<0||b>=this.rowSize)){"undefined"!=typeof this.data[b].__insertId__&&(e=parseInt(this.data[b].__insertId__,10));var k=this.data[b][g.primarykey];d===!0?this.data[b]=f.extend(!0,{},a):this.data[b]=f.extend(!0,{},this.data[b],a),"number"==typeof e?(this.data[b].__insertId__=e+"",delete this.data[b][g.primarykey],this.changeEditData.insertData[e]=this.data[b]):(delete this.data[b].__insertId__,this.data[b][g.primarykey]=k,this.changeEditData.updateData[k]=this.data[b]);for(var l=this._dataToDom([this.data[b]],0,1,b),m=l.domTd[0],n=this.domTd[b],o=this.bindName,p=g.fixcolumnnumber,q=this.colSize;q--;){var r=o[q],s=f(n[q]);if(s.removeAttr("title"),q<p){if("number"!=typeof r){var t=s.find(".eg-fixed-s")[0],u=f(m[q]).find(".eg-fixed-s")[0].innerHTML;t.innerHTML=u,t.nextSibling&&(t.nextSibling.nodeValue=u)}}else"number"!=typeof r&&s.html(m[q].innerHTML)}}}}})}(window.comtop),function(a,b){cui.calculate=cui.calculate||{},cui.calculate.setAutoCalculate=function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d];cui(e).bind("change",function(){var c=b();cui(a).setValue(c)})}}}(window.comtop.cQuery,window.comtop),function(a,b){function c(a){this.$uiCmp=null,this.optsList=[],this.errorLog=[],this._init(a)}function d(){var b=a("[uitype]",a("body"));if(b&&0!==b.length)for(var c=0,d=b.length;c<d;c++)b.eq(c).data("uitype")&&e(b.eq(c),b.eq(c).attr("databind"))}function e(a,c){var d=c;if(d){var e=d.split(".");if(e.length<2)return!1;for(var f,g,h=[],i=0,j=e.length;i<j;i++)i<j-1?h.push(e[i]):g=e[i];if(f=b.namespace(h.join(".")),f.nodeName)return!1;var k=cui(f).databind();k.addBind(a,g)}}function f(b){var c=a(b);return{isScanner:!0,databind:c.attr("databind"),validate:c.attr("validate"),tip:c.attr("tip"),tipTrigger:c.attr("tip_trigger")}}function g(a){for(var b=a.split("."),c=window,d=0;d<b.length;d++)c=c[b[d]];return"object"!=typeof c||c.nodeName?a:c}function h(c,d){c="undefined"==typeof c||c,d="undefined"==typeof d?"body":d;var e,f,g=[],h=a(d);if("document"!==d&&"body"!==d&&"html"!==d)for(e=0,f=b.UI.componentList.length;e<f;e++)h.find(b.UI.componentList[e].options.el).length&&g.push(b.UI.componentList[e]);else g=b.UI.componentList;for(e=0,f=g.length;e<f;e++)"function"==typeof g[e].setReadonly&&g[e].setReadonly(c)}b.UI.scan=function(){for(var b={},d=0;d<arguments.length;d++)switch(typeof arguments[d]){case"string":case"object":b.range=a(arguments[d]);break;case"boolean":b.databind=arguments[d]}b=a.extend({range:document,databind:!0},b);var e=new c(b);e=void 0},b.UI.scan.debug=!1,b.UI.scan.textmode=!1,b.UI.scan.disable=!1,b.UI.scan.readonly=!1,b.UI.scan.designMode=!1,b.UI.scan.databind=d,b.UI.scan.setReadonly=h,c.prototype={_init:function(c){var d=this;this.$uiCmp=a("[uitype]",c.range),this.$uiCmp.each(function(){var c=a(this),e=c.attr("uitype");return c.data("uitype")||!b.UI[e.charAt(0).toUpperCase()+e.substring(1)]?(d.$uiCmp=d.$uiCmp.not(c),!0):void d.optsList.push(d._scan(c,e))});var e=null;if(c.databind&&this._initData(),!b.UI.scan.textmode&&!b.UI.scan.disable&&!b.UI.scan.designMode)for(var f=0,g=this.$uiCmp.length;f<g;f++)e=this.$uiCmp.eq(f).data("uitype"),!e||e.options.textmode||e.options.disable||(this.errorLog.push(this._bindValidate(this.$uiCmp.eq(f),this.optsList[f])),this.errorLog.push(this._bindTip(this.$uiCmp.eq(f),this.optsList[f],e.tipPosition||e.options.el)));b.UI.scan.debug&&this._debug(c.databind),c=void 0},_scan:function(a,c){if(!c&&""===c)return!1;if("dialog"===c.toLocaleLowerCase())return a.addClass("cui-dialog").css("display","block"),{};var d=f(a[0]),e={validate:d.validate},g={databind:d.databind},h={tip:d.tip,trigger:d.tipTrigger?d.tipTrigger:"hover"};delete d.uitype,delete d.tipTrigger,delete d.tip,delete d.databind,delete d.validate;var i=c.charAt(0).toLowerCase()+c.substring(1);if(b.UI.scan.XSSDefense&&(d.XSSDefense=!0),b.UI.scan.textmode&&(d.textmode=!0,d.readonly=!1,d.disable=!1),b.UI.scan.disable&&(d.textmode=!1,d.readonly=!1,d.disable=!0),b.UI.scan.readonly&&(d.readonly=!0,d.textmode=!1,d.disable=!1),b.UI.scan.designMode&&(d.designMode=!0),b.UI.scan.debug)try{a[i](d)}catch(j){this.errorLog.push("["+c+":"+a.attr("id")+"]:\u7ec4\u4ef6\u521b\u5efa\u5931\u8d25\uff0c\u53ef\u80fd\u53c2\u6570\u914d\u7f6e\u4e0d\u6b63\u786e\u6216\u8005\u7ec4\u4ef6\u5b58\u5728\u95ee\u9898\uff1b\n")}else a[i](d);return a.removeAttr("name"),{opts:d,valiOpts:e,dbOpts:g,tipOpts:h}},_initData:function(){if(this.$uiCmp&&0!==this.$uiCmp.length)for(var a=0,b=this.$uiCmp.length;a<b;a++)this.$uiCmp.eq(a).data("uitype")&&this.errorLog.push(this._bindData(this.$uiCmp.eq(a),this.optsList[a]))},_debug:function(a){if(b.UI.scan.debug){for(var c=[],d=0,e=this.errorLog.length;d<e;d++)this.errorLog[d]&&c.push(this.errorLog[d]);c.length>0&&alert(c.join(""))}this.errorLog=[],a||(this.$uiCmp=void 0,this.optsList=[])},_bindData:function(a,c){var d=c.dbOpts.databind,e=null,f=b.UI.scan.debug;if(d){var g=d.split(".");if(g.length<2)return f&&(e="["+a.attr("uitype")+":"+a.attr("id")+"]:\u7ed1\u5b9a\u7684\u6570\u636e\u5fc5\u987b\u4e3aJSON\u683c\u5f0f\u91cc\u7684\u6210\u5458\u53d8\u91cf;\n"),!1;for(var h,i,j=[],k=0,l=g.length;k<l;k++)k<l-1?j.push(g[k]):i=g[k];if(h=b.namespace(j.join(".")),h.nodeName)return f&&(e="["+a.attr("uitype")+":"+a.attr("id")+"]:\u6570\u636e"+j+"\u4e0e\u9875\u9762\u7684\u6807\u7b7eID\u540d\u76f8\u540c\uff0c\u8bf7\u66f4\u540d;\n"),!1;var m=cui(h).databind();m.addBind(a,i)}return e},_bindValidate:function(b,c){var d=c.valiOpts.validate,e="";if(d){var f=/^(?:\{.*\}|\[.*\])$/;if(window.validater||(window.validater=cui().validate()),f.test(d))try{d=a.parseJSON(d.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'"))}catch(h){e="["+b.attr("uitype")+":"+b.attr("id")+"]:\u6821\u9a8c\u7684JSON\u6570\u636e\u6709\u8bef;\n"}else try{d=g(d)}catch(h){e="["+b.attr("uitype")+":"+b.attr("id")+"]:\u6821\u9a8c\u6570\u636e\u6709\u8bef\u6216\u4e0d\u5b58\u5728;\n"}switch(a.type(d)){case"array":for(var i=0;i<d.length;i++)d[i].rule?window.validater.add(cui(b),d[i].type,d[i].rule):window.validater.add(cui(b),d[i].type);break;case"string":window.validater.add(cui(b),d)}}return e},_bindTip:function(b,c,d){var e="";if(d=a(d,b),void 0==cui(b).options.textmode||c.tipOpts.tip||(b.attr("tip",""),c.tipOpts.tip=""),void 0!=c.tipOpts.tip)try{cui.tip(d,{trigger:c.tipOpts.trigger,tipEl:b,uitype:"Tip"})}catch(f){e="["+b.attr("uitype")+":"+b.attr("id")+"]:\u63d0\u793a\u521b\u5efa\u5931\u8d25;\n"}return e}}}(window.comtop.cQuery,window.comtop),function(a,b){b.UI.Label=b.UI.Base.extend({options:{uitype:"Label",name:"",value:"label",isReddot:!1,isBold:!1,model:"",textmode:!1,size:"",cls:"",line:""},_init:function(){var a=this.options;this.$el=a.el,""===a.name&&(a.name=b.guid()+"_"+a.uitype),"title1"===a.model?a.tpls={label:"label1"}:"title2"===a.model&&(a.tpls={label:"label1"},a.blockCls="cui-label-titletwo"),a.value=null===a.value||void 0===a.value?"":a.value},_create:function(){this._initVar(),this._renderDom()},_initVar:function(){this.$textDom=this.$el.find(".cui-label-text")},_renderDom:function(){var b=this.options;this.$el.attr("name",b.name).addClass("cui-label"),b.isBold&&this.$textDom.css("font-weight","bold"),b.size&&this.$textDom.css("font-size",b.size);var c=this;b.cls&&a.each(b.cls.split(";"),function(a,b){var d=b.split(":");c.$textDom.css(d[0],d[1])})},setLabel:function(a){var a=null==a||void 0==a?"":a;this.$el.children("span").text(a)},getLabel:function(){return this.options.value},setReadOnly:function(a){var b=this.options.value,c=this.$el;c.text(b)},setTextMode:function(a){this.setReadOnly(!0)}})}(window.comtop.cQuery,window.comtop),function(a,b){b.UI.Image=b.UI.Base.extend({options:{uitype:"Image",name:"",url:"",cls:"",height:"",width:"",on_click:null,designMode:!1,on_mouseover:null,on_mouseout:null,on_load:null},_init:function(){this.$el=this.options.el},_create:function(){var a=this,b=this.options,c=this.$el.find("img");c.attr("src",b.url),c.on("click",function(c){b.on_click&&b.on_click.call(this,c,a)}).hover(function(c){b.on_mouseover&&b.on_mouseover.call(this,c,a)},function(c){b.on_mouseout&&b.on_mouseout.call(this,c,a)}).on("load",function(c){b.designMode&&(this.height=parseInt(b.height)||this.naturalHeight,this.width=parseInt(b.width)||this.naturalWidth,a.isloadfail&&(this.height=100,this.width=100)),b.on_load&&b.on_load(this,c,a),a._triggerHandler("ready")}).on("error",function(b){a.isloadfail=!0,this.src=comtop.cuiFilePath+"/themes/default/images/image/defalut.png"})}})}(window.comtop.cQuery,window.comtop),function(a,b){b.UI.Frame=b.UI.Base.extend({options:{uitype:"Frame",name:"",id:"",url:"",cls:"",height:"auto",width:"auto",designMode:!1,on_load:null},_init:function(){this.$el=this.options.el},_create:function(){var a=this,b=this.$el.find("iframe");b.css({width:this.options.width,height:this.options.height}),b.on("load",function(b){a.options.on_load&&a.options.on_load.call(this,b,a)}),this.options.designMode&&(b[0].contentDocument.body.style.display="flex",b[0].contentDocument.body.innerHTML="<div style='margin:auto;display:flex;align-content:center;justify-content:center;width:100%;'>Page</div>",b.css({border:"1px solid #ddd"}))}}),b.UI.CodeArea=b.UI.Base.extend({options:{uitype:"CodeArea",height:"100px",width:"100px",text:"",onlyDesign:!0},_init:function(){this.$el=this.options.el},_create:function(){this.$el.find("div").css({width:this.options.width,height:this.options.height,"line-height":this.options.height})}}),b.UI.AtmSep=b.UI.Base.extend({options:{uitype:"AtmSep",height:"150px",width:"300px",text:"",onlyDesign:!0},_init:function(){this.$el=this.options.el},_create:function(){this.$el.find("div").css({width:this.options.width,height:this.options.height,"line-height":this.options.height})}}),b.UI.IncludePage=b.UI.Base.extend({options:{uitype:"IncludePage",height:"200px",width:"300px",text:"",onlyDesign:!0},_init:function(){this.$el=this.options.el},_create:function(){this.$el.find("div").css({width:this.options.width,height:this.options.height,"line-height":this.options.height})}}),b.UI.Line=b.UI.Base.extend({options:{uitype:"Line",name:"",cls:""},_init:function(){this.$el=this.options.el},_create:function(){this.$el.find("hr").addClass(this.options.cls||"")}}),b.UI.Div=b.UI.Base.extend({options:{uitype:"Div",height:"200px",width:"300px",name:"",onlyDesign:!0},_init:function(){this.$el=this.options.el},_create:function(){var a=this.options.height;a.indexOf("px")===-1&&(a+="px"),this.$el.find("div").css({width:this.options.width,height:this.options.height,"line-height":a})}})}(window.comtop.cQuery,window.comtop),comtop.version="V4.2.32-build20161117";